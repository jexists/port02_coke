define("socialTemplates",["handlebars"],function(a){return{facebookPost:function(c){var b=Handlebars.compile('<div class="element facebook-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-facebook-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix">{{#if post_image.desktop}}{{#if post_image.tablet}}{{#if post_image.mobile}}<a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a>{{/if}}{{/if}}{{/if}}<p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},flickrPost:function(c){var b=Handlebars.compile('<div class="element flickr-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-flickr-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix">{{#if post_image.desktop}}{{#if post_image.tablet}}{{#if post_image.mobile}}<a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a>{{/if}}{{/if}}{{/if}}<p class="post-title align-left">{{{post_title}}}</p><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},googlePost:function(c){var b=Handlebars.compile('<div class="element google-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-google-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix">{{#if post_image.desktop}}{{#if post_image.tablet}}{{#if post_image.mobile}}<a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a>{{/if}}{{/if}}{{/if}}<p class="post-title align-left">{{{post_title}}}</p><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},instagramPost:function(c){var b=Handlebars.compile('<div class="element instagram-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-instagram-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix">{{#if post_image.desktop}}{{#if post_image.tablet}}{{#if post_image.mobile}}<a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a>{{/if}}{{/if}}{{/if}}<p class="post-title align-left">{{{post_title}}}</p><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},linkedInPost:function(c){var b=Handlebars.compile('<div class="element likedIn-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-likedIn-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix">{{#if post_image.desktop}}{{#if post_image.tablet}}{{#if post_image.mobile}}<a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a>{{/if}}{{/if}}{{/if}}<p class="post-title align-left">{{{post_title}}}</p><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},twitterPost:function(c){var b=Handlebars.compile('<div class="element twitter-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-twitter-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix"><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},vkontaktePost:function(c){var b=Handlebars.compile('<div class="element vkontakte-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-vkontakte-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix">{{#if post_image.desktop}}{{#if post_image.tablet}}{{#if post_image.mobile}}<a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a>{{/if}}{{/if}}{{/if}}<p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},youTubePost:function(c){var b=Handlebars.compile('<div class="element youTube-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-youTube-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix">{{#if post_image.desktop}}{{#if post_image.tablet}}{{#if post_image.mobile}}<a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /><span class="poster-overlay"><span class="center-vertically"><i class="icon-play theme-link knockout-bgcolor"></i></span></span></a>{{/if}}{{/if}}{{/if}}<p class="post-title align-left">{{{post_title}}}</p><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{web_url}}" target="_blank"></a></div></div></div>');
return b(c)
},vimeoPost:function(c){var b=Handlebars.compile('<div class="element vimeo-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-vimeo-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix">{{#if post_image.desktop}}{{#if post_image.tablet}}{{#if post_image.mobile}}<a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /><span class="poster-overlay"><span class="center-vertically"><i class="icon-play theme-link knockout-bgcolor"></i></span></span></a>{{/if}}{{/if}}{{/if}}<p class="post-title align-left">{{{post_title}}}</p><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{web_url}}" target="_blank"></a></div></div></div>');
return b(c)
}}
});
tccc.initComponent(".m-f-social-feed",["isotope","socialTemplates"],function(d,b,a,c){d.each(function(){var m=$(this),k=m.find(".feed-tab"),i=k.length>1,f=m.find(".tab-container"),n=m.find(".social-links li"),j=m.find(".social-page"),l=m.find(".social-container"),h=m.find("#load-more-button"),g=m.find("span.switch"),o={url:l.data("url"),offset:l.data("offset"),limit:l.data("limit"),brand_accound:"all",network:"all",lang:"all",loadMore:true};
var e=function(){l.imagesLoaded(function(){l.isotope({itemSelector:".element",animationEngine:"jquery",gutter:0})
})
};
if(i){k.on("click","a",function(p){var q=$(this).closest("li.feed-tab");
p.preventDefault();
q.siblings().toggleClass("selected",false);
q.toggleClass("selected");
f.toggleClass("hidden",true);
f.filter("."+$(this).data("tab")).toggleClass("hidden");
if($(this).data("tab")==="social-tab"){l.isotope("reloadItems").isotope("reLayout");
b.global.fireRefreshEventOnWindow()
}})
}$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if(b.global.sizes.current_size===b.global.sizes.MOBILE){n.removeClass("last");
n.filter(":odd").addClass("last")
}else{n.removeClass("last");
n.filter(":last").addClass("last");
n.filter(function(p){return p%6===0
}).addClass("last");
if(n.length>1){n.filter(":first").removeClass("last")
}}l.isotope("reloadItems").isotope("reLayout")
});
if(b.global.sizes.current_size===b.global.sizes.MOBILE){n.removeClass("last");
n.filter(":odd").addClass("last")
}n.on("click","a",function(p){p.preventDefault();
n.children("a").toggleClass("selected",false);
$(this).toggleClass("selected");
j.toggleClass("hidden",true).toggleClass("show",false);
j.filter("."+$(this).data("social-page")).toggleClass("hidden show");
o.offset=l.data("offset");
o.limit=l.data("limit");
o.network=$(this).data("network");
o.brand_accound=$(this).data("account-name")
});
g.on("click",function(q){q.preventDefault();
var p=$(this).next()[0];
if(p.checked){$(this).find(".background").animate({left:"-56px"},200).text(p.getAttribute("data-label-country")).append('<img src="'+p.getAttribute("data-image-country")+'" alt="'+p.getAttribute("data-label-country")+'">');
o.lang=p.getAttribute("data-label-country")
}else{$(this).find(".background").animate({left:"0px"},200).text(p.getAttribute("data-label-all"));
o.lang="all"
}p.checked=!p.checked;
o.offset=l.data("offset")
});
if($(".m-f-social-feed .social-tab").attr("data-social-feed-options")==="true"){$("li.feed-tab").removeClass("selected");
$('li.feed-tab a[data-tab="social-tab"]').parent().addClass("selected");
$(".tab-container.social-tab").removeClass("hidden");
$(".tab-container.product-tab").addClass("hidden")
}$(document).ready(function(){if($(".socialFeed").parents().hasClass("redesignedBrandWrapper")){$(".m-f-social-feed ul li").each(function(){$(this).find("span.product-name").after('<i class="icon-double-angle-right"></i>')
})
}})
})
});
tccc.initComponent(".m-f-social-feed",[],function(d,b,a,c){d.each(function(){var k=$(this),g,e,j,i;
var h=b.global.get_OptanonCookiePrefrence();
j=k.find(".social-links").attr("data-brandlivefyremediawall_networkid");
e=k.find(".social-links").attr("data-brandlivefyremediawalllivefyre_siteid");
i=k.find(".social-links").attr("data-brandlivefyremediawall_isprodmode");
g=k.find(".social-links li").first().find("a").attr("data-brandlivefyremediawall_articleid");
if((!($.isEmptyObject(h)))&&(h.functionalityCookieActive)||(h.allCookiesAllowed)){f()
}else{if($.isEmptyObject(h)){f()
}}$(".social-links li").click(function(l){g=$(this).find("a").attr("data-brandlivefyremediawall_articleid");
f()
});
function f(){if(i==="true"){Livefyre.require(["streamhub-wall#4"],function(m){var l=window.wall=new m({el:document.getElementById("wall"),initial:15,showMore:10,bodyLineHeight:1.5,bodyFontSize:"medium",linkColor:"#f40009",displayNameColor:"#f40009",fontFamily:"proxima-nova, sans-serif",collection:{network:j,siteId:e,articleId:g}})
})
}else{Livefyre.require(["streamhub-wall#4"],function(m){var l=window.wall=new m({el:document.getElementById("wall"),initial:15,showMore:10,bodyLineHeight:1.5,bodyFontSize:"medium",linkColor:"#f40009",displayNameColor:"#f40009",fontFamily:"proxima-nova, sans-serif",collection:{network:j,siteId:e,articleId:g,environment:"t402.livefyre.com"}})
})
}}})
});
tccc.initComponent(".simpleBtn",[],function(b,a){b.each(function(){var c=$(this);
var d=c.find(".simpleBtn");
d.addClass("sb");
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if(a.global.sizes.current_size===a.global.sizes.MOBILE||a.global.sizes.current_size===a.global.sizes.TABLET){}});
if(a.global.sizes.current_size===a.global.sizes.MOBILE||a.global.sizes.current_size===a.global.sizes.TABLET){}})
});
tccc.initComponent(".quiz-module",[],function(b,a){b.each(function(){var l=$(this),C=l.find(".cover-slide"),K=l.find(".questions-slide"),q=l.find(".results-slide"),i=C.find("h3.title"),h=C.find("p.description"),n=K.find("span.actual-question"),s=K.find("span.total-questions"),E=K.find("ul.questions-answers > li"),f=E.find("li.answer"),w=K.find("a.button-next"),m=1,r=E.length,B=0,I=$('<span class="messages correct-msg">'+K.data("correct-msg")+"</span>"),u=$('<span class="messages right-answer-msg">'+K.data("right-answer-msg")+"</span>"),c=$('<span class="messages incorrect-msg">'+K.data("incorrect-msg")+"</span>"),k=q.find(".links"),J=q.find("span.percentage"),o=l.find("li.current").parent().find(".wrapper-answer"),L=q.find("p.result-summary"),A=window.navigator.userAgent,j=/msie|Trident.*rv[ :]*11\./gi,D=j.test(A);
n.text(m);
s.text(r);
$(".button-text , .button-next , .button-result-link ").css("text-decoration","none");
$("li.answer a").css("text-decoration","none");
function H(){return K.find("a.button-next[data-status=ok]")
}function p(){return K.find("a.button-next[data-status=next]")
}function G(){return K.find("a.button-next[data-status=score]")
}function g(){a.util.truncate_text(i,3);
a.util.truncate_text(L,5);
a.util.truncate_text(f.find("span.option-item"),1)
}function F(){if(a.global.sizes.current_size===a.global.sizes.MOBILE){l.find(".question-mobile").append(o).show()
}}function e(){if((a.global.sizes.current_size===a.global.sizes.TABLET)&&($(".two-columns-quiz").length)){l.find(".question-mobile").append(o).show()
}}function t(){return Math.floor((B/r)*100)
}function y(){w.text().trim()
}function d(M){w.attr("data-status",M)
}C.on("click","a.button-text",function(M){M.preventDefault();
$(".errorMessageContainer").hide();
K.find(".question-mobile").html(K.find(".current .question").text());
C.addClass("hidden");
a.util.truncate_text(f.find("span.option-item"),1);
setTimeout(function(){K.slideDown("3000",function(){K.removeClass("hidden")
});
K.toggleClass("fade-in fade-out")
},1000)
});
E.on("click","li.answer a",function(M){M.preventDefault();
if(!$(this).parent("li.answer").hasClass("disabled")){$(this).parent("li.answer").toggleClass("selected",true).siblings().toggleClass("selected",false);
d("ok");
H().removeClass("disabled")
}else{return
}});
function x(){var N=$(E[m-1]).find("li.answer.selected"),M=$(E[m-1]).find('li.answer[data-answer="true"]:visible');
N.css("cursor","default");
M.css("cursor","default");
$(E[m-1]).find('li.answer[data-answer="false"]').hide();
$(E[m-1]).find("li.answer.selected").show();
$(M).click(function(){return false
});
if((N.data("answer"))){B++;
N.find("span.bullet").css("background-color","transparent").addClass("correct");
o.show().html(I);
l.find(".current .question").append(o);
F();
e()
}else{N.children().find("span.option-item").addClass("decoration");
N.find("span.bullet").css("background-color","transparent").addClass("incorrect");
M.insertAfter(N);
M.find("span.bullet").css("background","transparent").addClass("arrow");
o.show().html(c);
l.find(".current .question").append(o);
F();
e()
}y();
if($(E[m-1]).next().length){var O=w.data("text-swap");
w.text(O);
w.addClass("on");
w.addClass("disabled").css("background","#f40009");
d("next")
}else{var O=w.data("text-score");
w.text(O);
w.removeClass("on");
d("score")
}}function z(){o.hide();
K.show();
$(E[m-1]).addClass("hidden").removeClass("current");
$(E[m]).removeClass("hidden").addClass("current");
var M=$("figure.current");
M.addClass("hidden").removeClass("current");
M.next().removeClass("hidden").addClass("current");
a.util.truncate_text(f.find("span.option-item"),1);
m++;
n.text(m);
$(".question-mobile").html($(".current .question").text());
y();
w.css("background","");
w.text("Ok");
w.removeClass("on");
d("ok")
}function v(){$(L).each(function(){var N=$(this);
N.html(N.html().replace(/&amp;nbsp;/g,""));
N.html(N.html().replace(/<(\w+)[^>]*>.*<\/\1>/gm,""))
});
var M=t();
J.text(M+"%");
if(M<=25){k.filter(".result-0-25").removeClass("hidden")
}else{if(M<=50){k.filter(".result-26-50").removeClass("hidden")
}else{if(M<=75){k.filter(".result-51-75").removeClass("hidden")
}else{k.filter(".result-76-100").removeClass("hidden")
}}}K.addClass("hidden");
K.css("display","none");
q.removeClass("hidden");
q.toggleClass("fade-in fade-out")
}w.on("click",function(M){M.preventDefault();
if(w.attr("data-status")=="ok"&&!w.hasClass("disabled")){x()
}else{if(w.attr("data-status")=="next"){z()
}else{if(w.attr("data-status")=="score"){v()
}}}if(w.attr("data-status")=="ok"&&w.hasClass("disabled")){$(".errorMessageContainer").show()
}});
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){g()
});
g();
if(D){$("figure").each(function(){var M=$(this),N=M.find("img").prop("src");
if(N){M.css("backgroundImage","url("+N+") ").addClass("compat-object-fit")
}})
}})
});
tccc.initComponent(".pull-quote",[],function(b,a){b.each(function(){var f=$(this),c=f.find(".twitter-link");
var e=a.global.get_OptanonCookiePrefrence();
function d(){var g=document.createElement("script");
g.type="text/javascript";
g.text="!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');";
document.body.appendChild(g)
}c.on("click",function(j){j.preventDefault();
var g="";
if(f.find("#tweetTextOverride").text()!=null){g=$.trim(f.find("#tweetTextOverride").text())
}if(f.find("#tweetTextOverride").text()==null||f.find("#tweetTextOverride").text()==""){g=$.trim(f.find(".text-container").text())
}var h=$(this),i={text:g,url:window.location.href};
h.attr("href",h.attr("href")+"?"+$.param(i));
window.open(h.attr("href"),"popupWindow","width=533,height=380,scrollbars=yes")
});
if((!($.isEmptyObject(e)))&&(e.functionalityCookieActive)||(e.allCookiesAllowed)){d()
}else{if($.isEmptyObject(e)){d()
}}})
});
tccc.initComponent(".photo-text",[],function(b,a){b.each(function(){var e=$(this),c=e.find(".summary p");
function d(){a.util.truncate_text(c,5)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){d()
});
d()
})
});
tccc.initComponent(".pdf-report",[],function(b,a){b.each(function(){var e=$(this),c=e.find(".report-group li span"),g=e.find(".report-group li"),f=e.find(".pdf-download input:submit");
function d(){a.util.truncate_text(c,3)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){d()
});
g.on("click","input:checkbox",function(h){if(g.find("input:checked").length>0){f.removeAttr("disabled").removeClass("disabled")
}else{f.attr("disabled","disabled").addClass("disabled")
}});
d()
})
});
tccc.initComponent(".oportunities-map",[],function(b,a){b.each(function(){var g=$(this),d="";
var f={region:g.find(".region a"),overlay:g.find(".overlay")};
function c(i){d=i.data("region-name");
f.overlay.fadeIn(300);
f.overlay.toggleClass(d)
}function e(){f.overlay.hide();
f.overlay.toggleClass(d)
}function h(){f.region.off();
if(a.global.sizes.current_size===a.global.sizes.MOBILE||a.global.sizes.current_size===a.global.sizes.TABLET){f.region.on("click",function(j){j.preventDefault();
var i=$(this).attr("href");
c($(this));
setTimeout(function(){window.location.href=i
},1000)
})
}else{f.region.on("mouseover",function(){c($(this))
}).on("mouseleave",function(){e()
})
}}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){h()
});
h()
})
});
tccc.initComponent(".NutritionInformation",[],function(c,b){c.each(function(){if($('html[lang="ja-JP"]').length){if($(".nutricion-information img.product-logo").length){$(".nutricion-information img.product-logo").prependTo($("div.product-link-wp"));
$("div.product-link-wp div.importedContent").css("margin-top","-20px");
$("div.product-link-wp>a").css("margin-left","126px");
$("div.product-link-wp>p").css("margin-left","126px")
}}});
setTimeout(function(){a()
},1000);
function a(){$(".nutricion-information img").each(function(f,e){var g=$(e);
var h=g.attr("width");
var d=g.attr("height");
if(typeof h!==undefined&&h!==false){if(typeof d!==undefined&&d!==false){g.removeAttr("width");
g.removeAttr("height");
g.css("width","auto");
g.css("height","auto")
}}})
}});
tccc.initComponent(".map-2x1",["handlebars"],function(b,a,c){b.each(function(){var v=$(this),m=document.getElementById("map-container"),y=v.find("h2"),n=v.find("#map-list-items-container"),x=b.data("google-maps-api-key"),q=b.data("markers-url"),l=b.data("default-zoom"),u=b.data("default-latitude"),t=b.data("default-longitude"),k,p={},d={},w;
function s(){var z=document.createElement("script");
z.type="text/javascript";
z.src="https://maps.googleapis.com/maps/api/js?key="+x+"&sensor=false&callback=window.loadInfobox";
document.body.appendChild(z)
}window.loadInfobox=function(){LazyLoad.js("/etc/designs/journey/libs/js/infobox.min.js",function(){h()
})
};
function h(){var z={center:new google.maps.LatLng(u,t),mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:l};
w=new google.maps.Map(m,z);
g()
}function g(){$.getJSON(q).done(function(z){f(z);
j();
o()
})
}function f(z){$.each(z,function(G,F){var C=new google.maps.LatLng(F.latitude,F.longitude),H=new google.maps.Marker({position:C,map:w,title:F.name,shortDescription:F.shortDescription,longDescription:F.longDescription,thumbnail:F.imageUrl,address:F.address,phone:F.phone,url:F.url,linkText:F.linkText?F.linkText:"Website",icon:F.overrideMarkerImageUrl}),D=H.thumbnail?'<img src="{{thumbnail}}" title="{{title}}" class="thumbnail"/>':"",I=H.url?'<a href="{{url}}" class="url" title="{{title}}" target="_blank">{{linkText}}</a>':"",J='<div class="details">'+D+'<div class="meta"><span class="title">{{title}}</span><span class="address">{{address}}</span><span class="phone">{{phone}}</span>'+I+'</div></div><p class="description">{{longDescription}}</p>',A=c.compile(J),E=A(H),B=new InfoBox({content:E,boxClass:"infobox"});
p[H.title]=H;
d[H.title]=B;
r(H)
})
}function r(z){var D=z.thumbnail?'<img src="{{thumbnail}}" class="thumbnail"/>':"",C='<div class="list-item" data-id="'+z.title+'">'+D+'<div class="meta"><span class="title theme-color-secondary">{{title}}</span><span class="description">{{shortDescription}}</span></div></div>',B=c.compile(C),A=B(z);
n.append(A)
}function j(){k=v.find(".list-item");
k.each(function(){var z=$(this);
z.on("click",function(){k.removeClass("active");
z.addClass("active")
});
google.maps.event.addDomListener(z[0],"click",function(){var A=z.data("id");
i(A)
})
})
}function o(){$.each(p,function(A,z){google.maps.event.addListener(z,"click",function(){var B=z.title;
i(B);
k.removeClass("active");
v.find('.list-item[data-id="'+B+'"]').addClass("active")
})
})
}function i(A){var z=p[A];
$.each(d,function(C,B){B.close()
});
d[A].open(w,z)
}function e(){a.util.truncate_text(y,1)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){e()
});
e();
s()
})
});
tccc.initComponent(".liveFyreMediaWallcontainer",[],function(b,a){b.each(function(){var i=$(this),f,d,k,e,h,g=i.find("#mediaWallSectionTitle h4 span");
var c=i.find("#wall").attr("data-livefyreMediaWallBean");
var l=a.global.get_OptanonCookiePrefrence();
c=c.replace(/'/g,'"');
c=JSON.parse(c);
d=c.articleID;
e=c.network;
k=c.siteId;
h=c.isProdEnv;
if(c.modalBehavior){f=false
}else{f=true
}if((!($.isEmptyObject(l)))&&(l.functionalityCookieActive)||(l.allCookiesAllowed)){j()
}else{if($.isEmptyObject(l)){j()
}}function j(){if(h==="true"){Livefyre.require(["streamhub-wall#4"],function(n){var m=window.wall=new n({el:document.getElementById("wall"),initial:c.intialItems,modal:f,showMore:10,bodyLineHeight:1.5,bodyFontSize:"medium",linkColor:"#f40009",displayNameColor:"#f40009",fontFamily:"proxima-nova, sans-serif",collection:{network:e,siteId:k,articleId:d}})
})
}else{Livefyre.require(["streamhub-wall#4"],function(n){var m=window.wall=new n({el:document.getElementById("wall"),initial:c.intialItems,modal:f,showMore:10,bodyLineHeight:1.5,bodyFontSize:"medium",linkColor:"#f40009",displayNameColor:"#f40009",fontFamily:"proxima-nova, sans-serif",collection:{network:e,siteId:k,articleId:d,environment:"t402.livefyre.com"}})
})
}}g.text(c.longTitle);
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(m,n){if(n.current_size===a.global.sizes.MOBILE){g.text(c.shortTitle)
}else{g.text(c.longTitle)
}})
})
});
tccc.initComponent(".list-of-lists",["selectBoxIt"],function(c,b,a){c.each(function(){var g=$(this),e=g.find("#filter-by-category"),f=g.find("#lists-container");
e.selectBoxIt(b.global.selectBoxItOptions);
e.on("change",function(){var h=$(this).find("option:selected").val();
f.find("ul").addClass("hidden");
f.find("#"+h.replace(" ","")).removeClass("hidden");
d()
});
function d(){b.util.truncate_text(".list-of-lists h3",1);
b.util.truncate_text(".list-of-lists .title-meta",1);
b.util.truncate_text(".list-of-lists .description",2)
}$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){d()
});
d()
})
});
tccc.initComponent(".list-view",["listContentHandler"],function(c,a,b){c.each(function(e,d){var h=$(d);
var g={dom_pointers:{post_template:$(".library-list-template"),load_more_button:$("#load-more-button")},offset:c.data("offset"),limit:c.data("limit"),section:c.data("section"),section_path:c.data("section-path"),all_content:c.data("content-type"),byline_label:c.data("byline-label"),topic:c.data("topic"),tag:c.data("tag"),date:c.data("date"),list_type:"list",base_search_uri:c.data("base-url")},f=$("html"),i=new b();
i.init(g.dom_pointers,g.offset,g.limit,g.section,g.section_path,g.topic,g.tag,g.date,g.list_type,g.base_search_uri,g.all_content,g.byline_label,undefined);
if($(".tag-template").length>0){$(".post-container article").css("float","left")
}else{$(".post-container article").css("float","none")
}a.util.truncate_text("h2 > a",4);
h.find("article").each(function(l,j){var m=$(j);
if(m.find(".img-container img").length){m.find(".summary").addClass("summary-with-image")
}m.find(".summary").each(function(p,o){var n=$(this);
n.data("original-text",n.text())
})
});
if(f.hasClass("desktop")||f.hasClass("big_desktop")){a.util.truncate_text(".summary",5);
a.util.truncate_text(".summary-with-image",7)
}else{if(f.hasClass("tablet")){a.util.truncate_text(".summary",6);
a.util.truncate_text(".summary-with-image",4)
}else{if(f.hasClass("mobile")){a.util.truncate_text(".summary",9);
a.util.truncate_text(".summary-with-image",9)
}}}$(".list-view article .summary").css("display","inline");
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(j,k){a.util.truncate_text("h2 > a",4);
h.find("article .summary").each(function(n,m){var l=$(m);
l.text(l.data("original-text"))
});
if(k.current_size===a.global.sizes.DESKTOP||k.current_size===a.global.sizes.BIG_DESKTOP){a.util.truncate_text(".summary",5);
a.util.truncate_text(".summary-with-image",7)
}else{if(k.current_size===a.global.sizes.TABLET){a.util.truncate_text(".summary",6);
a.util.truncate_text(".summary-with-image",4)
}else{if(k.current_size===a.global.sizes.MOBILE){a.util.truncate_text(".summary",9);
a.util.truncate_text(".summary-with-image",9)
}}}$(".list-view article .summary").css("display","inline")
})
})
});
tccc.initComponent(".image-grid",["listContentHandler"],function(c,a,b){c.each(function(){var e={dom_pointers:{post_template:$(".library-grid-template"),load_more_button:$("#load-more-button")},section:c.data("section"),section_path:c.data("section-path"),topic:c.data("topic"),tag:c.data("tag"),date:c.data("date"),limit:c.data("limit"),offset:c.data("offset"),list_type:"grid",base_search_uri:c.data("base-url"),download_label:c.data("download-label")},d=$("html"),g=new b();
g.init(e.dom_pointers,e.offset,e.limit,e.section,e.section_path,e.topic,e.tag,e.date,e.list_type,e.base_search_uri,undefined,undefined,e.download_label);
if(d.hasClass("mobile")){a.util.truncate_text(".meta h2",2);
a.util.truncate_text(".meta p",2)
}else{a.util.truncate_text(".meta h2",2);
a.util.truncate_text(".meta p",3)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(h,i){if(i.current_size===a.global.sizes.MOBILE){a.util.truncate_text(".meta h2",2);
a.util.truncate_text(".meta p",2)
}else{a.util.truncate_text(".meta h2",2);
a.util.truncate_text(".meta p",3)
}});
if(d.hasClass("lt-ie9")){var f=c.find(".post-container > article");
$.each(f,function(h,j){var i=h+1;
if(i%3===0){$(this).addClass("multiple-of-three")
}})
}})
});
var isIE11=!(window.ActiveXObject)&&"ActiveXObject" in window;
if(isIE11&&typeof brightcove!=="undefined"){brightcove.experiences={};
brightcove.experienceObjects={};
brightcove.renderExperienceInProcess=false;
brightcove.createExperiencesQueue=[];
brightcove.renderExperienceQueue=[];
brightcove.flashTimeoutInterval=10000;
var brightcoveJS=brightcove;
brightcove.createFlashObject=function(b){var a=brightcove.createElement("object");
a.type=b.type;
if(b.data){a.data=b.data
}a.id=b.id;
a.width=b.width;
a.height="500";
a.className=b.className;
a.setAttribute("seamlesstabbing",b.seamlessTabbing);
var f;
var e="flashParam_";
for(var c in b){var d=c.indexOf(e);
if(d==0){f=brightcove.createElement("param");
f.name=c.substring(e.length);
f.value=b[c];
a.appendChild(f)
}}return a
}
}tccc.initComponent(".lead-media",["jqUI"],function(b,a){b.each(function(){var m=$(this),g=(m.find(".item").length>1),j=m.find(".royalSlider"),l=m.find(".media-container"),p=l.find(".item"),q=l.find(".overlay-left-ie8"),k=l.find(".overlay-right-ie8"),c=$(".article-content"),i=$(".media-caption"),d,o,f;
if(c.find(".media-data-attributes").data("hide-credit")){c.find(".media-data-attributes").addClass("hidden")
}function n(){f=f?f:m.find(".rsArrow")
}function h(r){r.off();
r.on("click",function(s){if(d){return false
}else{return true
}})
}function e(s,r,u){if(s!==undefined&&s.length>1){var t=m.find(".credit-url");
m.find(".media-data-attributes").removeClass("hidden");
m.find(".media-credit span").html(s);
if(!r){t.removeAttr("href");
t.addClass("no-link");
d=true
}else{t.attr("href",r);
t.attr("target",u);
t.removeClass("no-link");
d=false
}h(t)
}else{m.find(".media-data-attributes").addClass("hidden");
m.find(".media-credit").addClass("hidden")
}}if(a.global.sizes.current_size!==a.global.sizes.MOBILE){e(p.data("credit"),p.data("credit-url"),p.data("credit-open-in-new-window"))
}else{e(p.data("credit-mobile"),p.data("credit-url"),p.data("credit-open-in-new-window"))
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(r,s){if(s.current_size===a.global.sizes.MOBILE){e(p.data("credit-mobile"),p.data("credit-url"),p.data("credit-open-in-new-window"))
}else{e(p.data("credit"),p.data("credit-url"),p.data("credit-open-in-new-window"))
}});
if(g){l.find(".item").each(function(){e($(this).data("credit"),$(this).data("credit-url"),$(this).data("credit-open-in-new-window"))
});
l=j.royalSlider({keyboardNavEnabled:true,arrowsNav:true,controlNavigation:"none",loop:true,arrowsNavAutoHide:false,autoHeight:true,imageScaleMode:"none",imageScalePadding:0,imageAlignCenter:false,navigateByClick:false}).data("royalSlider");
l.ev.on("rsAfterSlideChange",function(){n();
o=l.currSlide;
e(o.holder.find(".item").data("credit"),o.holder.find(".item").data("credit-url"),o.holder.find(".item").data("credit-open-in-new-window"))
});
$(".rsArrowIcn").hover(function(){p.addClass("opacity-hover");
q.addClass("opacity-hover");
k.addClass("opacity-hover")
},function(){p.removeClass("opacity-hover");
q.removeClass("opacity-hover");
k.removeClass("opacity-hover")
})
}else{m.find(".lead-carousel").removeClass("royalSlider")
}})
});
tccc.initComponent(".lead-image-slideshow",[""],function(b,a){b.each(function(){var e=($(".lead-carousel").find(".item").length>1),h=$(".media-container"),d=h.find(".item"),g=$(this).find(".royalSlider"),c=h.find(".overlay-left-ie8"),f=h.find(".overlay-right-ie8");
if(e){h=g.royalSlider({keyboardNavEnabled:true,arrowsNav:true,controlNavigation:"none",loop:true,autoPlay:{enabled:true,pauseOnHover:true},arrowsNavAutoHide:false,autoScaleSlider:true,autoScaleSliderWidth:596,autoScaleSliderHeight:334,imageScalePadding:0}).data("royalSlider");
$(".rsArrowIcn").hover(function(){d.addClass("opacity-hover");
c.addClass("opacity-hover");
f.addClass("opacity-hover")
},function(){d.removeClass("opacity-hover");
c.removeClass("opacity-hover");
f.removeClass("opacity-hover")
})
}})
});
tccc.initComponent(".immersive-callouts",[],function(k,h){var b=$(".lightbox-panel");
var n=$(".video-callout .image");
var j=$(".video-callout .caption .call-to-action");
var g=$(".video-callout .caption");
var e=$("#lightbox");
var c=$(".video-callout .image")[0];
var j=$(".video-callout .caption .call-to-action")[0];
var a=$("#videoFrameContainer");
var l=$("#videoFrameContainer").attr("src");
a.attr("src","");
function f(){b.removeClass("lightBoxForMobile");
n.show();
$(".video-callout .caption").show();
e.hide();
b.hide();
$("#videoFrameContainer").attr("src","")
}function d(){f();
$(".video-callout .image, .video-callout .caption .call-to-action").on("click",function(o){e.show();
a.attr("src",l);
b.show();
b.removeClass("lightBoxForMobile");
o.stopPropagation()
});
$("body").on("click",function(o){if(o.target.id=="videoCalloutImage"||o.target.id=="callToAction"){return
}if($(o.target).closest(".lightbox-panel").length){return
}$(e).hide();
b.hide();
a.attr("src","");
n.show();
g.show()
})
}function i(){f();
$(".video-callout .image, .video-callout .caption .call-to-action").on("click",function(){n.hide();
g.hide();
a.attr("src",l);
b.addClass("lightBoxForMobile").appendTo(".video-callout").show();
e.hide()
})
}function m(){if((h.global.sizes.current_size===h.global.sizes.DESKTOP)||(h.global.sizes.current_size===h.global.sizes.BIG_DESKTOP)){d()
}else{i()
}}$(h.global).bind(h.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){m()
});
if((h.global.sizes.current_size===h.global.sizes.DESKTOP)||(h.global.sizes.current_size===h.global.sizes.BIG_DESKTOP)){d()
}else{i()
}$(document).on("keydown",function(o){if(o.keyCode===27){alert("clicked esc");
f()
}});
$("#close-lightbox").on("click",function(){f()
});
$(window).bind("beforeunload",function(){f()
})
});
tccc.initComponent(".contact-us-form",["footerUtils","jqJSONP"],function(a,b,c,d){var e=!$("html").hasClass("CQ");
if(e&&(locationStr.indexOf("http:")>-1)){locationStr=locationStr.replace("http:","https:");
location.replace(locationStr)
}if(b.global.captcha_api_key===null){b.global.captcha_api_key=$("html").data("captcha-api")
}$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if(b.global.sizes.current_size===b.global.sizes.MOBILE){$("#contact_us_form_captcha").attr("data-size","compact")
}else{$("#contact_us_form_captcha").removeAttr("data-size")
}});
if(b.global.sizes.current_size===b.global.sizes.MOBILE){$("#contact_us_form_captcha").attr("data-size","compact")
}else{$("#contact_us_form_captcha").removeAttr("data-size")
}$("#contactUsForm").submit(function(J){J.preventDefault();
var G=true,h=$("input[name='firstName']").val(),B=$("input[name='lastName']").val(),r=$("input[name='contactEmail']").val(),t=$("input[name='zipCode']").val(),o=$("input[name='phone']").val(),w=$("input[name='birthday']").val(),v=$("input[name='termsConditions']"),x=$("input[name='currentPagePath']").val(),k=$(".error.first_name"),l=$(".error.last_name"),H=$(".error.email_address"),K=$(".error.zipCode_details"),f=$(".error.phone_number"),I=$(".error.termsAndConditions"),i=$(".error.birthday"),q=$(".error.recaptcha"),u=$(".error.recaptcha"),A=$(".error.error-message"),F=/(^(((0[1-9]|1[0-9]|2[0-8])[\/](0[1-9]|1[012]))|((29|30|31)[\/](0[13578]|1[02]))|((29|30)[\/](0[4,6,9]|11)))[\/](19|[2-9][0-9])\d\d$)|(^29[\/]02[\/](19|[2-9][0-9])(00|04|08|12|16|20|24|28|32|36|40|44|48|52|56|60|64|68|72|76|80|84|88|92|96)$)/,z=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,s=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
(function C(){if(h===""){k.show().text(k.data("error-message"));
G=false
}else{k.hide()
}})();
(function m(){if(B===""){l.show().text(l.data("error-message"));
G=false
}else{l.hide();
G=true
}})();
(function E(){if(r===""||!(z.test(r))){H.show().text(H.data("error-message"));
G=false
}else{H.hide()
}})();
(function p(){if(t===""){K.show().text(K.data("error-message"))
}else{K.hide()
}})();
(function n(){if(o===""){f.show().text(f.data("invalid-phone-format-message"));
G=false
}else{if(!s.test(o)){f.show().text(f.data("error-message"));
G=false
}else{f.hide()
}}})();
(function y(){if(v.prop("checked")===false){I.show().text(I.data("error-message"));
G=false
}else{I.hide()
}})();
var g=grecaptcha.getResponse();
(function D(){if(g.length===0){q.show().text(q.data("message-recaptcha-empty"));
G=false
}else{q.hide()
}})();
(function j(){if(w===""){i.show().text(i.data("error-message"));
G=false
}if(!F.test(w)){i.show().text(i.data("invalid-birthday-format-message"));
G=false
}else{i.hide()
}})();
if(G){$.ajax({type:"POST",url:"/bin/journey/contactUsFormSubmit",datatype:"html",data:$("#contactUsForm").serialize(),statusCode:{910:function(){q.show().text(q.data("message-recaptcha-retry"));
$("#recaptcha_reload").click()
},500:function(){A.show().text(A.data("error-message"))
}}}).done(function(M,O,L){var N=L.status;
if(N==200){$("#contactUsForm").hide();
$(".contact-us-form-success").removeClass("hide")
}})
}else{}})
});
tccc.initComponent(".cloud-list-view",["aws-sdk-2.187.0.min","moment"],function(c,a,b){c.each(function(ak,ac){var n=$(ac),aj,ao,e,j=10,M=10,V=0,p=20,D,d,I,al,L,ab,O,ag,x,ai,am,K,m,Y=[],U=false,ar,R,ap,P=false,C=false,f=true,af,S=false,s=[],t="",N=0,w,l,ad,X,A,aa,aq,o,Q,an,i,r,h,z,y,Z,ah,W,ae,G=[],g="",T,E,q;
$(document).ready(function(){var k=$(".cloud-list-view").attr("data-cloudSearchBean");
var aw=$("#filterSearch").attr("data-filter-json");
E=$("body").attr("data-lambda-endpoint-cloudsearchrecords");
if(k){k=JSON.parse(k);
aj=k.endPoint;
ao=k.awsVersion;
D=k.language;
d=k.country;
I=d+"_"+D;
O=k.isAuthorMode;
pagePathSection=k.sectionPath;
ag=k.readmoreLinkLabel;
byLineLabel=k.byLineLabel;
am=k.isTagTemplate;
x=k.currentPageName;
j=k.moreLoadCount;
M=k.initialLoadCount;
ai=k.showLeadImage;
K=k.sectionPath;
T=k.displayAllContent
}if(typeof(Storage)!=="undefined"){localStorage.setItem("displayAllContent",T);
localStorage.setItem("sectionPath",K)
}if(aw){aw=JSON.parse(aw);
w=aw.defaultYear;
l=aw.defaultMonth;
ad=aw.displayStartingFrom;
X=aw.displayTopicTagFilter;
A=aw.filterButtonLabel;
aa=aw.dateFilterLabel;
aq=aw.topicTagFilterButtonLabel;
o=aw.topicTagFilterLabel;
Q=aw.selectTopicTagFilterLabel;
an=aw.componentFilterTitle;
i=aw.doNotIncludeTopics;
r=aw.doNotIncludeTags;
h=aw.defaultTopics;
z=aw.defaultTags;
y=aw.selectedTopics;
Z=aw.selectedTags;
ah=false;
W=false
}$(window).scroll(function(){sessionStorage.scrollPos=$(window).scrollTop()
});
var az=function(){$(window).scrollTop(sessionStorage.scrollPos||0)
};
window.onload=az;
if(!an&&!ad&&!X){$("#filterWrapper").hide()
}function ay(){var aB;
if(!S){ar=(parseInt(l,10)-1).tcccPad(2);
R=w
}if(R&&ar){if(S){ar=(parseInt(ar,10)-1).tcccPad(2);
aB=moment(new Date(R,ar,1))
}else{aB=moment(new Date(R,ar,new Date().getDate()))
}}if(ar&&!R){var aD=new Date().getFullYear();
if(S){aB=moment(new Date(R,ar,1))
}else{aB=moment(new Date(R,ar,new Date().getDate()))
}}if(!ar&&R){var aA=new Date().getMonth();
aA=(parseInt(aA,10)+1).tcccPad(2);
if(S){aB=moment(new Date(R,ar,1))
}else{aB=moment(new Date(R,ar,new Date().getDate()))
}}if(!ar&&!R){var aD=new Date().getFullYear();
var aA=new Date().getMonth();
aA=(parseInt(aA,10)+1).tcccPad(2);
if(S){aB=moment(new Date(R,ar,1))
}else{aB=moment(new Date(R,ar,new Date().getDate()))
}}if(!am){if(!S){if(d==="jp"){var aC=aB.add(1,"d");
af=aC.toDate().toISOString()
}else{af=aB.toDate().toISOString()
}}else{af=aB.toDate().toISOString()
}}}if(l&&l.toUpperCase()==="CURRENT"){l=new Date().getMonth();
l=parseInt(l,10)+1
}$("#month").val(l);
if(w&&w.toUpperCase()==="CURRENT"){w=new Date().getFullYear()
}$("#year").val(w);
ar=l;
R=w;
ay();
if(y&&y.length>0){P=true
}if(Z&&Z.length>0){C=true
}if(K){g=K.substr(K.lastIndexOf("/")+1);
m=K.substr(0,K.lastIndexOf("/"));
m=m.substr(m.lastIndexOf("/")+1)
}if(h&&h.length>0){ah=true
}if(z&&z.length>0){W=true
}if(am&&am){e={query:x,queryParser:"structured",filterQuery:"(and (or site:'"+I+"' (phrase field=override_video_info'"+I+"')) (or (phrase field=cq_template'article') (phrase field=cq_template'recipe'))(phrase field=tags_and_topics_details'"+x+"') )",start:V,size:M,sort:"cq_last_published_date desc"}
}if(K&&!am&&!ah&&!W){if(T){e={query:I,queryParser:"structured",filterQuery:"(and is_black_listed:'false' (and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+K+"') (phrase field=path'dam') (phrase field=is_downloadable'true') ) ( range field=cq_last_published_date  {,'"+af+"'])))",start:V,size:p,sort:"cq_last_published_date desc"}
}else{e={query:I,queryParser:"structured",filterQuery:"(and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=cq_template'article') (phrase field=cq_template'recipe'))(phrase field=path'"+K+"')( range field=cq_last_published_date  {,'"+af+"']) )",start:V,size:p,sort:"cq_last_published_date desc"}
}}if(K&&!am&&(ah||W)){s=h.concat(z);
if(s.length>0){if(s.length==1){t="(phrase field=tags_and_topics_details'"+s[0]+"'))"
}else{t=t+"(and ";
s.forEach(function(aA){t=t+"(phrase field=tags_and_topics_details'"+aA+"')"
});
t=t+") ( range field=cq_last_published_date  {,'"+af+"']))"
}}if(T){var ax="(and is_black_listed:'false' (and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+K+"') (phrase field=path'dam') (phrase field=is_downloadable'true'))) ( range field=cq_last_published_date  {,'"+af+"'])"+t;
e={query:I,queryParser:"structured",filterQuery:ax,start:V,size:p,sort:"cq_last_published_date desc"}
}else{var ax="(and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=content_type'article') (phrase field=cq_template'recipe'))  (or (phrase field=path'"+K+"')  )"+t;
e={query:I,queryParser:"structured",filterQuery:ax,start:V,size:p,sort:"cq_last_published_date desc"}
}}e["return"]="vanity_url,path,override_video_info,long_title,resize_image_url,tags_and_topics_details,formatted_publish_date,author,simple_title,article_body,alt,content_type,cq_last_published_date";
AWS.config.region=k.awsRegion;
csd=new AWS.CloudSearchDomain({endpoint:aj,apiVersion:ao,convertResponseTypes:false});
u(e);
function av(aA){updatedTagTopicList=[];
if(P&&!C){$.each(aA,function(aC,aD){var aB=aD.tagType;
if(aB=="Tag"){updatedTagTopicList.push(aD)
}})
}return updatedTagTopicList
}$("#filterTitle").text(an);
$("#filterToggle #filterToggleButton").text(A);
$("#dateFilterTitle").text(aa);
$("#addFilterLabel").text(aq);
$("#filterByLable").text(o);
if(!(ad)){l=new Date().getMonth();
l=parseInt(l,10)+1;
w=new Date().getFullYear();
$("#dateFilterWrapper").hide()
}else{$("#dateFilterWrapper").show()
}if(!(ad)){$("#dateFilterWrapper").hide()
}else{$("#dateFilterWrapper").show()
}if(!(X)){$("#bottomFilter").hide()
}else{$("#bottomFilter").show()
}$("#toggleFilterContainer").click(function(){$(this).hide();
$("#selectTopic").show()
});
$("#month").on("change",function(){U=true;
S=true;
ar=$("#month option:selected").val();
ay();
J()
});
$("#year").on("change",function(){U=true;
S=true;
R=$("#year option:selected").val();
ay();
J()
});
$("#filterToggleButton").on("click",function(aA){$("#bottomFilter").slideToggle("slow");
$(this).toggleClass("buttonExpanded")
});
$("body").on("click",".removeItemLink",function(aA){aA.preventDefault();
var aB=$(this).prev().text();
Y=$.grep(Y,function(aD,aC){return aD.tagTopicName==aB
},true);
$(this).closest("li").fadeOut("normal",function(){$(this).remove()
});
at("tagsTopics");
J()
});
$("#selectTopic").change(function(){var aB=$("#selectTopic option:selected").text();
var aA=$(this).val();
v(aB,aA)
});
function v(aA,aC){var aB=aC.split(",");
Y.push({tagTopicName:aA,color:aB[1],path:aB[0]});
at("tagsTopics");
au()
}function at(aA){if(!String.prototype.contains){String.prototype.contains=function(aD){return this.indexOf(aD)>-1
}
}if(aA=="tagsTopics"){var aB=_.pluck(Y,"tagTopicName").join(",");
var aC;
aC=window.location.href.split("?")[0];
aC=aC+"?tagstopics="+aB;
history.pushState({},null,aC)
}}function au(){$(".selectedTags").remove();
if(Y&&Y.length>0){var aB="";
var aA=Y;
aB=aB+'<div class="tags selectedTags"><ul class="topicListWrapper">';
aA.forEach(function(aC){aB=aB+'<li style="color:'+aC.color+';border:1px solid;background:#FFFFFF"><a class="selectedItem" href="'+aC.path+'" style="color:'+aC.color+';background:#FFFFFF">'+aC.tagTopicName+'</a><a href="" class="removeItemLink"><span>&nbsp;</span><i class="fa fa-times-circle" aria-hidden="true"></i></a></li>'
});
aB=aB+"</ul></div>";
$("#addFilterWrapper").before(aB)
}J()
}});
function J(){if(s&&s.length>0){var at;
if(Y&&Y.length==0){if(s.length==1){if(T){at="(and is_black_listed:'false' (and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+m+"') (phrase field=path'dam') (phrase field=is_downloadable'true') ) ( range field=cq_last_published_date  ['"+af+"',}) (phrase field=tags_and_topics_details'"+s[0]+"')))"
}else{at="(and is_black_listed:'false' (and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=content_type'article') (phrase field=cq_template'recipe'))  (or (phrase field=path'"+m+"')  ) ( range field=cq_last_published_date  ['"+af+"',}) (phrase field=tags_and_topics_details'"+s[0]+"')))"
}}else{if(T){at="(and is_black_listed:'false' (and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+m+"') (phrase field=path'dam') (phrase field=is_downloadable'true')))( range field=cq_last_published_date  ['"+af+"',}) "+t+"))"
}else{at="(and is_black_listed:'false' (and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=content_type'article') (phrase field=cq_template'recipe'))  (or (phrase field=path'"+m+"')  ) ( range field=cq_last_published_date  ['"+af+"',})"+t+")))"
}}e={query:I,queryParser:"structured",filterQuery:at,start:V,size:p,sort:"cq_last_published_date asc"}
}if(Y&&Y.length>0){var k=_.pluck(Y,"tagTopicName");
var av=k.concat(s);
av=av.concat(s);
var au="";
au=au+"(and ";
av.forEach(function(aw){au=au+"(phrase field=tags_and_topics_details'"+aw+"')"
});
au=au+") ( range field=cq_last_published_date  {,'"+af+"'])";
if(T){at="(and is_black_listed:'false' (and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+m+"') (phrase field=path'dam') (phrase field=is_downloadable'true') )"+au+")"
}else{at="(and is_black_listed:'false' (and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=content_type'article') (phrase field=cq_template'recipe'))  (or (phrase field=path'"+m+"')  )"+au+")"
}e={query:I,queryParser:"structured",filterQuery:at,start:V,size:p,sort:"cq_last_published_date asc"}
}}if(s&&s.length==0){var at;
if(Y&&Y.length==1){if(T){at="(and is_black_listed:'false' (and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+m+"') (phrase field=path'dam') (phrase field=is_downloadable'true') ) ( range field=cq_last_published_date  ['"+af+"',}) (phrase field=tags_and_topics_details'"+Y[0].tagTopicName+"')))"
}else{at="(and is_black_listed:'false' (and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=content_type'article') (phrase field=cq_template'recipe'))  (or (phrase field=path'"+m+"')  ) ( range field=cq_last_published_date  ['"+af+"',}) (phrase field=tags_and_topics_details'"+Y[0].tagTopicName+"')))"
}}if(Y&&Y.length>1){var v="";
v=v+"(and ";
Y.forEach(function(aw){v=v+"(phrase field=tags_and_topics_details'"+aw.tagTopicName+"')"
});
if(T){at="(and is_black_listed:'false' (and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+m+"') (phrase field=path'dam') (phrase field=is_downloadable'true') )( range field=cq_last_published_date  ['"+af+"',}) "+v+")))"
}else{at="(and is_black_listed:'false' (and (or site:'"+I+"' (phrase field=override_video_info'"+I+"'))(or (phrase field=content_type'article') (phrase field=cq_template'recipe'))  (or (phrase field=path'"+m+"')  ) ( range field=cq_last_published_date  ['"+af+"',})"+v+")))"
}}e={query:I,queryParser:"structured",filterQuery:at,start:V,size:p,sort:"cq_last_published_date asc"}
}if((Y&&Y.length==0&&s&&s.length==0&&ad)||((!(X))&&ad)){e={query:I,queryParser:"structured",filterQuery:"(and is_black_listed:'false' (and (or site:'"+I+"' (phrase field=override_video_info'"+I+"')) (or (phrase field=cq_template'article') (phrase field=cq_template'recipe')) (phrase field=path'"+g+"') ( range field=cq_last_published_date  ['"+af+"',})))",start:V,size:M,sort:"cq_last_published_date asc"}
}u(e)
}$(".cloud-list-view").find("#load-more-button").click(function(){f=false;
F()
});
function F(){if(V===0){V=p
}else{V=parseInt(V,10)+parseInt(j,10)
}e.start=V;
e.size=j;
u(e)
}function u(at){var k,v={query:at.filterQuery,parser:at.queryParser,"return":at["return"],start:at.start,size:at.size,sort:at.sort};
$.ajax({type:"POST",url:E,data:JSON.stringify(v),dataType:"json"}).done(function(av,aw,au){JSON.stringify(av);
console.log("response results",av);
k=av.hits.hit;
$(".button-container").show();
if(k.length<j){$(".button-container").hide()
}if(k.length>0){if(f){N=0;
$(".post-container article").remove()
}$.each(k,function(aJ){var aD=k[aJ].fields,aN=aD.vanity_url,aF=aD.path,aG,ax,aI="";
N++;
if(aD.tags_and_topics_details){aG=JSON.parse(aD.tags_and_topics_details)
}var aC="";
if(aD.long_title){aC=aD.long_title;
if(aC){var aH='<span class="theme-secondary">';
var aK="</span>";
aC=aC.replace("{",aH);
aC=aC.replace("}",aK)
}}var aA=ay(O,aN,aF);
function ay(aT,aQ,aS){var aR;
if(aT){aR=aS+".html"
}else{aR=aQ
}if(aD.content_type==="image"){if(aN){aR=aN
}else{aR=aF
}}return aR
}if(ai){if(aD.resize_image_url){ax=true
}else{ax=false
}}else{ax=false
}var aP=moment(aD.formatted_publish_date).format(a.global.get_date_format());
var aE;
var aB="";
var aL=$("footer").data("search-url");
aL+="?q="+aD.author;
if(typeof aD.author!=="undefined"){aB="<span id='fromText'>"+byLineLabel+"</span> <span itemprop='author' class='theme-secondary-link author_name'><a href='"+aL+"' data-status='NOTUPDATED' data-author-name='"+aD.author.replace(/'/g,"")+"'>"+aD.author+"</a></span> <span id='seperator'> | </span> "
}if(am){if(ax&&aD.content_type=="article"){aE="<article class='"+N+"' style='float: left;'><h2><a href='"+aA+"'><span itemprop='name' class='titles_updated'>"+aC+"</span></a></h2><div class='info'>"+aB+"<span itemprop='datePublished'>"+aD.formatted_publish_date+"</span></div><a class='entry-image' href='"+aA+"'><div class='img-container'><img alt='"+aD.alt+"' title='"+aD.simple_title+"' class='listItemImage' src='"+aD.resize_image_url+"'></div></a>";
if(aD.article_body){aE+="<p class='summary theme-font-secondary' style='display: inline; line-height: 25px;'>"+aD.article_body+"</p>"
}aE+="<a href='"+aA+"' class='read-more theme-color-secondary'>"+ag+"</a></article>";
$(".post-container").append(aE)
}else{if((!(ai)&&aD.content_type=="article")||(!ax)){aE="<article class='"+N+"' style='float: left;'><h2><a href='"+aA+"'><span itemprop='name' class='titles_updated'>"+aC+"</span></a></h2><div class='info'>"+aB+"<span itemprop='datePublished'>"+aD.formatted_publish_date+"</span></div>";
if(aD.article_body){aE+="<p class='summary theme-font-secondary' style='display: inline; line-height: 25px;'>"+aD.article_body+"</p>"
}aE+="<a href='"+aA+"' class='read-more theme-color-secondary'>"+ag+"</a></article>";
$(".post-container").append(aE)
}else{if(aD.content_type=="video"||aD.content_type=="image"){aE="<article class='"+N+"' style='float: left;'><h2><a href='"+aA+"'><span itemprop='name' class='titles_updated'>"+aC+"</span></a></h2><div class='info'><span itemprop='author' class='theme-secondary-link'><a href=''>"+aD.content_type+"</a></span> | <span itemprop='datePublished'>"+aD.formatted_publish_date+"</span></div><a class='entry-image' href='"+aA+"'><div class='img-container'><img alt='"+aD.alt+"' title='"+aD.simple_title+"' class='listItemImage' src='"+aD.resize_image_url+"'></div></a></article>";
$(".post-container").append(aE)
}}}}if(!am){var aO=aF.split("/");
var az=aO.includes(g);
if(aO.includes(g)){if(ax&&aD.content_type=="article"){aE="<article class='"+N+"' style='float: left;'><h2><a href='"+aA+"'><span itemprop='name' class='titles_updated'>"+aC+"</span></a></h2><div class='info'>"+aB+"<span itemprop='datePublished'>"+aD.formatted_publish_date+"</span></div><a class='entry-image' href='"+aA+"'><div class='img-container'><img alt='"+aD.alt+"' title='"+aD.simple_title+"' class='listItemImage' src='"+aD.resize_image_url+"'></div></a>";
if(aD.article_body){aE+="<p class='summary theme-font-secondary' style='display: inline; line-height: 25px;'>"+aD.article_body+"</p>"
}aE+="<a href='"+aA+"' class='read-more theme-color-secondary'>"+ag+"</a></article>";
$(".post-container").append(aE)
}else{if(!(ax)&&aD.content_type=="article"){aE="<article class='"+N+"' style='float: left;'><h2><a href='"+aA+"'><span itemprop='name' class='titles_updated'>"+aC+"</span></a></h2><div class='info'>"+aB+"<span itemprop='datePublished'>"+aD.formatted_publish_date+"</span></div>";
if(aD.article_body){aE+="<p class='summary theme-font-secondary' style='display: inline; line-height: 25px;'>"+aD.article_body+"</p>"
}aE+="<a href='"+aA+"' class='read-more theme-color-secondary'>"+ag+"</a></article>";
$(".post-container").append(aE)
}else{if(aD.content_type=="video"||aD.content_type=="image"){aE="<article class='"+N+"' style='float: left;'><h2><a href='"+aA+"'><span itemprop='name' class='titles_updated'>"+aC+"</span></a></h2><div class='info'><span itemprop='author' class='theme-secondary-link'><a href=''>"+aD.content_type+"</a></span> | <span itemprop='datePublished'>"+aD.formatted_publish_date+"</span></div><a class='entry-image' href='"+aA+"'><div class='img-container'><img alt='"+aD.alt+"' title='"+aD.simple_title+"' class='listItemImage' src='"+aD.resize_image_url+"'></div></a></article>";
$(".post-container").append(aE)
}}}}}if(aG&&aG.length>0){aI="";
aI=aI+'<div class="tags"><ul class="topicListWrapper">';
var aM=aG;
aM.forEach(function(aQ){var aR=(aQ.tagName).split("+").join(" ");
aR=aS(aR);
function aS(aT){return decodeURIComponent(aT)
}aI=aI+'<li><a href="'+aQ.tagPath+'" style="color:'+aQ.color+";border:1px solid "+aQ.color+';background:#FFFFFF">'+aR+"</a></li>"
});
aI=aI+"</ul></div>";
$(".post-container article").each(function(aQ){if(($(this).hasClass(N))){$(this).find(".info").after(aI);
if(!(aD.author)){$(this).find("#seperator").hide();
$(this).find("#fromText").hide();
$(this).find(".author_name").hide()
}}})
}a.util.truncate_text($("article .summary"),5)
});
B()
}})
}function B(){var k="/bin/journey/GetAuthorProfileServlet";
var v=[];
$(".author_name a[data-status='NOTUPDATED']").each(function(av,au){var at=$(au).text();
v.push(at)
});
v=_.uniq(v);
_.each(v,function(at){$.ajax({type:"GET",url:"/bin/journey/GetAuthorProfileServlet",datatype:"html",data:{authorProfile:at,locale:I}}).done(function(av,ay,au){var ax=au.status;
if(ax===200){if(av&&av.authorProfilePath){var aw=av.authorProfilePath;
if(aw.length>0){var az=$(".author_name a[data-status='NOTUPDATED'][data-author-name='"+at+"']");
az.attr("href",aw).data("status","UPDATED")
}}}})
})
}if($(".tag-template").length>0){$(".post-container article").css("float","left")
}else{$(".post-container article").css("float","none")
}a.util.truncate_text("h2 > a",4);
var H=$("html");
if(H.hasClass("desktop")||H.hasClass("big_desktop")){a.util.truncate_text(".summary",5);
a.util.truncate_text(".summary-with-image",7)
}else{if(H.hasClass("tablet")){a.util.truncate_text(".summary",6);
a.util.truncate_text(".summary-with-image",4)
}else{if(H.hasClass("mobile")){a.util.truncate_text(".summary",9);
a.util.truncate_text(".summary-with-image",9)
}}}$(".cloud-list-view article .summary").css("display","inline");
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(k,v){a.util.truncate_text("h2 > a",4);
n.find("article .summary").each(function(av,au){var at=$(au);
at.text(at.data("original-text"))
});
if(v.current_size===a.global.sizes.DESKTOP||v.current_size===a.global.sizes.BIG_DESKTOP){a.util.truncate_text(".summary",5);
a.util.truncate_text(".summary-with-image",7)
}else{if(v.current_size===a.global.sizes.TABLET){a.util.truncate_text(".summary",6);
a.util.truncate_text(".summary-with-image",4)
}else{if(v.current_size===a.global.sizes.MOBILE){a.util.truncate_text(".summary",9);
a.util.truncate_text(".summary-with-image",9)
}}}$(".cloud-list-view article .summary").css("display","inline")
})
})
});
tccc.initComponent(".cloud-image-grid",["aws-sdk-2.187.0.min","moment","handlebars"],function(c,a,b){c.each(function(){var F,h,B,z,A,r=0,i,v,o,s,e,u,y,k,g,d,m,C,l,p,w,E,n=false,D,j=$(".cloud-image-grid").find("#load-more-button");
$(document).ready(function(){var G=$(".cloud-image-grid").attr("data-cloudSearchBean");
if(G){G=JSON.parse(G);
F=G.endPoint;
h=G.awsVersion;
i=G.language;
v=G.country;
o=v+"_"+i;
y=G.isAuthorMode;
pagePathSection=G.sectionPath;
k=G.readmoreLinkLabel;
z=G.loadmorecount;
A=G.initialcount;
C=G.sectionPath;
s=G.downloadImageLabel;
p=G.loadMoreImagesLabel
}$(j).text(p);
$(j).prepend('<i class="icon-double-angle-right"></i>');
setTimeout(function(){document.getElementById("year").addEventListener("change",H,false);
document.getElementById("month").addEventListener("change",H,false);
function H(){if(typeof(Storage)!=="undefined"){w=localStorage.getItem("dateSelcted")
}if(w){E="(and (or site:'"+o+"' (phrase field=override_video_info'"+o+"')) ( range field=cq_last_published_date  {,'"+w+"']) content_type:'image' is_downloadable:'true')"
}else{E="(and (or site:'"+o+"' (phrase field=override_video_info'"+o+"')) content_type:'image' is_downloadable:'true')"
}B={query:o,queryParser:"structured",filterQuery:E,start:r,size:A,sort:"cq_last_published_date desc"};
B["return"]="vanity_url,path,override_video_info,resize_image_url,formatted_publish_date,author,alt,content_type,dc_title,dc_description";
n=true;
q(B)
}},500);
setTimeout(function(){w=localStorage.getItem("dateSelcted");
if(w){E="(and (or site:'"+o+"' (phrase field=override_video_info'"+o+"')) ( range field=cq_last_published_date  {,'"+w+"']) content_type:'image' is_downloadable:'true')"
}else{E="(and (or site:'"+o+"' (phrase field=override_video_info'"+o+"')) content_type:'image' is_downloadable:'true')"
}B={query:o,queryParser:"structured",filterQuery:E,start:r,size:A,sort:"cq_last_published_date desc"};
B["return"]="vanity_url,path,override_video_info,resize_image_url,formatted_publish_date,author,alt,content_type,dc_title,dc_description";
AWS.config.region=G.awsRegion;
csd=new AWS.CloudSearchDomain({endpoint:F,apiVersion:h,convertResponseTypes:false});
q(B)
},900)
});
$(".cloud-image-grid").find("#load-more-button").click(function(){n=false;
x()
});
function f(I,G,J){var H;
if(G&&G.indexOf(".html")==-1){H=G+".html"
}else{H=G
}return H
}function t(I){var G='<span class="theme-secondary">';
var H="</span>";
I=I.replace("{",G);
I=I.replace("}",H);
return I
}function x(){r=parseInt(r,10)+parseInt(A,10);
B.start=r;
B.size=z;
q(B)
}function q(H){var G;
csd.search(H,function(I,J){if(I){}else{G=J.hits.hit;
index=0;
if(n){$(".post-container-image article").remove()
}if(G.length>0){$.each(G,function(T){var R=G[T].fields,V=R.vanity_url,L=R.path;
index++;
if(R.tags_and_topics_details){tags=JSON.parse(R.tags_and_topics_details)
}var N="";
if(R.long_title){N=R.long_title
}else{if(R.dc_title){try{N=R.dc_title[0]
}catch(Q){}}}N=t(N);
var U=f(y,V,L);
var P="";
try{P=R.dc_description[0];
P=t(P)
}catch(Q){}var K=$("#cloud-library-image-grid-template").html();
var S=Handlebars.compile(K);
var M={index:index,titleVal:N,resolvePathUrl:U,alt:R.alt,resize_image_url:R.resize_image_url,downloadImageLabel:s,desc:P};
var O=S(M);
$(".post-container-image").append(O)
});
a.util.truncate_text(".post-container-image .titles_updated",2,true,{lineHeight:25});
a.util.truncate_text(".post-container-image .descriptions_updated",3,true,{lineHeight:25})
}}})
}})
});
tccc.initComponent("#filterSearch",["aws-sdk-2.187.0.min","moment"],function(c,a,b){c.each(function(){var B=[],y=false,M,v,K,u=false,q=false,d=true,G,x=false,k=[],l="",t=0,m,g,F,C,p,D,L,h,w,J,e,j,f,o,n,E,I,A,H,r=[],s,z=0,i;
$(document).ready(function(){console.log("search filter document ready begin");
var P=$("#filterSearch").attr("data-filter-json");
if(P){P=JSON.parse(P);
m=P.defaultYear;
g=P.defaultMonth;
F=P.displayStartingFrom;
C=P.displayTopicTagFilter;
p=P.filterButtonLabel;
D=P.dateFilterLabel;
L=P.topicTagFilterButtonLabel;
h=P.topicTagFilterLabel;
w=P.selectTopicTagFilterLabel;
J=P.componentFilterTitle;
e=P.doNotIncludeTopics;
j=P.doNotIncludeTags;
f=P.defaultTopics;
o=P.defaultTags;
n=P.selectedTopics;
E=P.selectedTags;
_lang=P.language;
_country=P.country;
s=_country+"_"+_lang;
I=false;
A=false
}if(!J&&!F&&!C){$("#filterWrapper").hide()
}function O(){var T,S;
if(!x){M=g;
v=m
}if(v&&M){G=v+"-"+M+"-"+new Date().getDate()+new Date().toISOString().substring(10)
}if(M&&!v){T=new Date().getFullYear();
G=T+"-"+M+"-"+new Date().getDate()+new Date().toISOString().substring(10)
}if(!M&&v){S=new Date().getMonth();
S=(parseInt(S,10)+1).tcccPad(2);
G=v+"-"+S+"-"+new Date().getDate()+new Date().toISOString().substring(10)
}if(!M&&!v){T=new Date().getFullYear();
S=new Date().getMonth();
S=(parseInt(S,10)+1).tcccPad(2);
G=T+"-"+S+"-"+new Date().getDate()+new Date().toISOString().substring(10)
}if(typeof(Storage)!=="undefined"){previousDateSelected=localStorage.getItem("dateSelcted");
localStorage.setItem("dateSelcted",G)
}}if(g&&g.toUpperCase()==="CURRENT"){g=new Date().getMonth();
g=parseInt(g,10)+1
}$("#month").val(g);
if(m&&m.toUpperCase()==="CURRENT"){m=new Date().getFullYear()
}$("#year").val(m);
if(e&&j){$("#bottomFilter").hide()
}M=g;
v=m;
if(n&&n.length>0){u=true
}if(E&&E.length>0){q=true
}if(f&&f.length>0){I=true
}if(o&&o.length>0){A=true
}ajaxUrl="/bin/journey/getTagTopicCacheDataCloudFilter.json";
K={locale:s};
if(e){K={locale:s,filterType:"Tag"}
}if(j){K={locale:s,filterType:"Topic"}
}if(q&&!u){ajaxUrl="/bin/journey/getTagTopicCacheDataCloudFilter.overrideTags.json";
K.overrideTags=E.join()
}if(u&&!q){ajaxUrl="/bin/journey/getTagTopicCacheDataCloudFilter.overrideTopics.json";
K.overrideTopics=n.join()
}if(u||q){ajaxUrl="/bin/journey/getTagTopicCacheDataCloudFilter.overrideTopics.overrideTags.json";
K.overrideTopics=n.join();
K.overrideTags=E.join()
}$.ajax({url:ajaxUrl,type:"GET",data:K,dataType:"json",success:function(W,X,U){r=W;
function T(Z,Y){if(!Y){Y=window.location.href
}Z=Z.replace(/[\[\]]/g,"\\$&");
var ab=new RegExp("[?&]"+Z+"(=([^&#]*)|&|#|$)"),aa=ab.exec(Y);
if(!aa){return null
}if(!aa[2]){return""
}return decodeURIComponent(aa[2].replace(/\+/g," "))
}var S=T("tagstopics");
if(S){var V=S.split(",");
V.forEach(function(Y){var aa=r.length;
while(aa--){if(Y==r[aa].tagTitle){var Z={tagTopicName:r[aa].tagTitle,color:r[aa].color,path:r[aa].pagPath};
B.push(Z);
break
}}});
Q()
}$.each(W,function(Y,aa){var Z=aa.pagPath+","+aa.color;
$("#selectTopic").append($("<option>").text(aa.tagTitle).attr("value",Z))
})
},error:function(S,U,T){}});
$("#filterTitle").text(J);
$("#filterToggle #filterToggleButton").text(p);
$("#dateFilterTitle").text(D);
$("#addFilterLabel").text(L);
$("#filterByLable").text(h);
$("#selectTopic").append($("<option>",{value:0,text:w}));
if(!(F)){g=new Date().getMonth();
g=parseInt(g,10)+1;
m=new Date().getFullYear();
$("#dateFilterWrapper").hide()
}else{$("#dateFilterWrapper").show()
}if(!(F)){$("#dateFilterWrapper").hide()
}else{$("#dateFilterWrapper").show()
}if((!(C))||(e&&j)){$("#bottomFilter").hide()
}else{$("#bottomFilter").show()
}$("#toggleFilterContainer").click(function(){$(this).hide();
$("#selectTopic").show()
});
$("#month").on("change",function(){y=true;
x=true;
M=$("#month option:selected").val()
});
$("#year").on("change",function(){y=true;
x=true;
v=$("#year option:selected").val()
});
$("#filterToggleButton").on("click",function(S){$("#bottomFilter").slideToggle("slow");
$(this).toggleClass("buttonExpanded")
});
$("body").on("click",".removeItemLink",function(S){S.preventDefault();
var T=$(this).prev().text();
B=$.grep(B,function(V,U){return V.tagTopicName==T
},true);
$(this).closest("li").fadeOut("normal",function(){$(this).remove()
});
R("tagsTopics")
});
$("#selectTopic").change(function(){var T=$("#selectTopic option:selected").text();
var S=$(this).val();
N(T,S)
});
function N(S,U){var T=U.split(",");
B.push({tagTopicName:S,color:T[1],path:T[0]});
R("tagsTopics");
Q()
}function R(S){if(!String.prototype.contains){String.prototype.contains=function(V){return this.indexOf(V)>-1
}
}if(S=="tagsTopics"){var T=_.pluck(B,"tagTopicName").join(",");
var U;
U=window.location.href.split("?")[0];
U=U+"?tagstopics="+T;
history.pushState({},null,U)
}}function Q(){$(".selectedTags").remove();
if(B&&B.length>0){var T="";
var S=B;
T=T+'<div class="tags selectedTags"><ul class="topicListWrapper">';
S.forEach(function(U){T=T+'<li style="color:'+U.color+';border:1px solid;background:#FFFFFF"><a class="selectedItem" href="'+U.path+'" style="color:'+U.color+';background:#FFFFFF">'+U.tagTopicName+'</a><a href="" class="removeItemLink"><span>&nbsp;</span><i class="fa fa-times-circle" aria-hidden="true"></i></a></li>'
});
T=T+"</ul></div>";
$("#addFilterWrapper").before(T)
}$("#selectTopic").val(0)
}})
})
});
tccc.initComponent(".click-to-tweet",[],function(b,a){b.each(function(){var f=$(this),c=f.find(".twitter-link");
var e=a.global.get_OptanonCookiePrefrence();
function d(){var g=document.createElement("script");
g.type="text/javascript";
g.text="!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');";
document.body.appendChild(g)
}c.on("click",function(i){i.preventDefault();
var g=$(this),h={text:$.trim(f.find(".text-container").text()),url:window.location.href};
g.attr("href",g.attr("href")+"?"+$.param(h));
window.open(g.attr("href"),"popupWindow","width=533,height=380,scrollbars=yes")
});
if((!($.isEmptyObject(e)))&&(e.functionalityCookieActive)||(e.allCookiesAllowed)){d()
}else{if($.isEmptyObject(e)){d()
}}})
});
tccc.initComponent(".brazil-contact-us-form",["footerUtils","jqJSONP"],function(g,d,c,a){if(d.global.captcha_api_key===null){d.global.captcha_api_key=$("html").data("captcha-api")
}$(d.global).bind(d.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if(d.global.sizes.current_size===d.global.sizes.MOBILE){$("#brContact_us_form_captcha").attr("data-size","compact")
}else{$("#brContact_us_form_captcha").removeAttr("data-size")
}});
if(d.global.sizes.current_size===d.global.sizes.MOBILE){$("#brContact_us_form_captcha").attr("data-size","compact")
}else{$("#brContact_us_form_captcha").removeAttr("data-size")
}$(".js-day-selectbox option:first").attr("selected","selected");
$(".js-month-selectbox option:first").attr("selected","selected");
$(".js-year-selectbox option:first").attr("selected","selected");
$(".js-day-selectbox").on("change",function(){$('select.js-day-selectbox option[selected="selected"]').each(function(){$(this).removeAttr("selected")
});
var j=$(this).val();
$(".js-day-selectbox option").each(function(){if($(this).text()==j){$(this).attr("selected","selected")
}})
});
$(".js-month-selectbox").on("change",function(){$('select.js-month-selectbox option[selected="selected"]').each(function(){$(this).removeAttr("selected")
});
var j=$(this).val();
$(".js-month-selectbox option").each(function(){if($(this).text()==j){$(this).attr("selected","selected")
}})
});
$(".js-year-selectbox").on("change",function(){$('select.js-year-selectbox option[selected="selected"]').each(function(){$(this).removeAttr("selected")
});
var j=$(this).val();
$(".js-year-selectbox option").each(function(){if($(this).text()==j){$(this).attr("selected","selected")
}})
});
$("#connectionTypeCountry").on("change",function(){var k=$("option:selected",this);
var j=this.value;
if(j!="Brasil"){$("#brazil-state").prop("selectedIndex",0);
$("#brazil-city").prop("selectedIndex",0);
$("#brazil-state").prop("disabled",true);
$("#brazil-city").prop("disabled",true);
$("#stateDropDown").addClass("disabledDropDown");
$("#cityDropDown").addClass("disabledDropDown")
}else{$("#brazil-state").prop("disabled",false);
$("#stateDropDown").removeClass("disabledDropDown");
$("#brazil-city").prop("disabled",false);
$("#cityDropDown").removeClass("disabledDropDown")
}});
$("#brazil-state").on("change",function(){var k=$("#brazil-state option:selected").val(),j=this.value,l=$("#brazil-city"),m=document.getElementsByName(k)[0].value,n=m.split("\n");
l.empty();
l.prop("selectedIndex",0);
$.each(n,function(o,p){$("#brazil-city").append($("<option></option>").attr("value",p).text(p))
})
});
var f=4000;
function b(o,j,m){var n=o.val().length;
var k=j-n;
var l=m.find(".characters-remaining-number");
l.text(k);
if(k<0){if(!l.hasClass("msg_error")){l.addClass("msg_error")
}}else{if(l.hasClass("msg_error")){l.removeClass("msg_error")
}}}$(".form-characters-remaining-message > span").clone().prependTo(".characters-remaining-message");
var i=$("form");
i.find("textarea").each(function(l,j){var o=$(j);
f=parseInt(o.attr("data-maximum-characters"),10);
var m=$(".characters-remaining-message");
var n=o.attr("data-character-count-enabled");
if(n==="true"){o.on("keydown keypress keyup",function(){b(o,f,m)
});
b(o,f,m)
}else{m.hide()
}});
function h(){var j=$(".js-year-selectbox option:selected");
var k=new Date().getFullYear()-12;
var l=parseInt(j.val());
return(l<k)
}function e(){var l=$(".js-day-selectbox option:selected").text(),n=$(".js-day-selectbox").attr("selectedIndex"),p=$(".js-month-selectbox option:selected").text(),j=$(".js-month-selectbox").attr("selectedIndex"),o=$(".js-year-selectbox option:selected").text(),k=$(".js-year-selectbox").attr("selectedIndex"),m;
if((n===0||l==="")||(j===0||p==="")||(k===0||o==="")||!h()){$(".error.birthday").show().text($(".error.birthday").data("error-message"));
isValid=false
}else{$(".error.birthday").hide();
m=l+"/"+p+"/"+o;
$("#dob").val(m)
}}$(function(){$("#brazilContactUsForm").submit(function(w){w.preventDefault();
var y=true;
firstName=$("input[name='firstName']").val(),lastName=$("input[name='lastName']").val(),gender=$("input[name='gender']:checked").size(),country=$("input[name='country']").val(),state=$("input[name='state']").val(),city=$("input[name='city']").val(),email=$("input[name='email']").val(),dateOfBirth=$("input[name='dateOfBirth']").val(),phoneNumber=$("input[name='phoneNumber']").val(),areaCodePhoneResidential=$("input[name='areaCodePhoneResidential']").val(),areaCodePhoneComercial=$("input[name='areaCodePhoneComercial']").val(),areaCodeCellphone=$("input[name='areaCodeCellphone']").val(),phoneResidential=$("input[name='phoneResidential']").val(),phoneComercial=$("input[name='phoneComercial']").val(),cellphone=$("input[name='cellphone']").val(),reasonForContact=$("#reasonOfContact").val(),message=$("textarea[name='message']").val(),termsAndConditions=$("input[name='terms-conditions']"),$errorFirstName=$(".first_name"),$errorLastName=$(".last_name"),$errorGender=$(".error.gender"),$errorCountry=$(".error.country"),$errorState=$(".error.state"),$errorCity=$(".error.cityError"),$errorEmailAddress=$(".error.email_address"),$errorGender=$(".error.gender"),$errorDateOfBirth=$(".error.birthday"),$errorPhoneNumber=$(".error.phone_number"),$errorPhoneNumberCom=$(".error.phone_Comercial"),$errorPhoneNumberCell=$(".error.phone_cell"),$errorPhoneNolable=$(".phoneNolable"),$errorReasonForContact=$(".error.reason_for_contact"),$errorMessage=$(".error.message"),$errorTermsAndConditions=$(".error.termsAndConditions"),$errorRecaptcha=$(".error.recaptcha"),$errorSubmit=$(".submitError.error"),birthdayRegex=/(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d/,emailRegex=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,areaCodeRegex=/^[0-9]{2}$/,phoneNumberRegex=/^(\d{7}|\d{8}|\d{9})$/;
(function s(){if(firstName===""){$errorFirstName.show().text($errorFirstName.data("error-message"));
y=false
}else{$errorFirstName.hide()
}})();
(function l(){if(lastName===""){$errorLastName.show().text($errorLastName.data("error-message"));
y=false
}else{$errorLastName.hide();
y=true
}})();
(function z(){if(message.length>f){$(".characters-exceeded-message").show();
y=false
}else{$(".characters-exceeded-message").hide();
y=true
}})();
(function j(){if(gender==0){$errorGender.show().text($errorGender.data("error-message"));
y=false
}else{$errorGender.hide()
}})();
(function q(){var A=document.getElementById("connectionTypeCountry");
var B=A[A.selectedIndex].value;
if(B==="Selecione"||B===""){$errorCountry.show().text($errorCountry.data("error-message"));
y=false
}else{$errorCountry.hide();
y=true
}})();
(function t(){var A=document.getElementById("connectionTypeCountry");
var C=A[A.selectedIndex].value;
if(C==="Brasil"){var A=document.getElementById("brazil-state");
var B=A[A.selectedIndex].value;
if(B==="Selecione"||B===""){$errorState.show().text($errorState.data("error-message"));
y=false
}else{$errorState.hide();
y=true
}}})();
(function k(){var B=document.getElementById("connectionTypeCountry");
var C=B[B.selectedIndex].value;
if(C==="Brasil"){var B=document.getElementById("brazil-city");
var A=B[B.selectedIndex].value;
if(A==="Selecione"||A===""){$errorCity.show().text($errorCity.data("error-message"));
y=false
}else{$errorCity.hide();
y=true
}}})();
(function m(){if(email===""||!(emailRegex.test(email))){$errorEmailAddress.show().text($errorEmailAddress.data("error-message"));
y=false
}else{$errorEmailAddress.hide()
}})();
(function p(){var C=$(".js-day-selectbox option:selected").text(),E=$(".js-day-selectbox option:selected").val(),G=$(".js-month-selectbox option:selected").text(),A=$(".js-month-selectbox option:selected").val(),F=$(".js-year-selectbox option:selected").text(),B=$(".js-year-selectbox option:selected").val(),D;
if((E=="")||(A=="")||(B=="")||!h()){$errorDateOfBirth.show().text($errorDateOfBirth.data("error-message"));
y=false
}else{$errorDateOfBirth.hide();
D=C+"/"+A+"/"+F;
$("#dob").val(D)
}})();
(function r(){var C=false,E=false,D=false,B=false,A=false;
if((!(areaCodePhoneResidential.length)&&!(phoneResidential.length))&&(!(areaCodePhoneComercial.length)&&!(phoneComercial.length))&&(!(areaCodeCellphone.length)||!(cellphone.length))){E=true;
$errorPhoneNolable.show().text($errorPhoneNolable.data("error-message"))
}if(!E){if((areaCodePhoneResidential.length>0)&&(phoneResidential.length>0)){if(!areaCodeRegex.test(areaCodePhoneResidential)||!phoneNumberRegex.test(phoneResidential)){$errorPhoneNumber.show().text($errorPhoneNumber.data("error-message"));
$errorPhoneNolable.hide();
B=true;
C=true
}}if(!C&&(areaCodePhoneComercial.length>0)&&(phoneComercial.length>0)){if(!C&&(!areaCodeRegex.test(areaCodePhoneComercial)||!phoneNumberRegex.test(phoneComercial))){$errorPhoneNumberCom.show().text($errorPhoneNumberCom.data("error-message"));
$errorPhoneNolable.hide();
B=true;
C=true
}}if(!C&&(areaCodeCellphone.length>0)&&(cellphone.length>0)){if(!C&&(!areaCodeRegex.test(areaCodeCellphone)||!phoneNumberRegex.test(cellphone))){$errorPhoneNolable.hide();
$errorPhoneNumberCell.show().text($errorPhoneNumberCom.data("error-message"));
A=true;
C=true
}}}if(D||B||A){y=false
}else{$errorPhoneNumber.hide();
$errorPhoneNumberCom.hide();
$errorPhoneNumberCell.hide()
}})();
(function x(){if(reasonForContact===""){$errorReasonForContact.show().text($errorReasonForContact.data("error-message"));
y=false
}else{$errorReasonForContact.hide()
}})();
(function n(){if($.trim($(".extraMessage").val())===""){$errorMessage.show().text($errorMessage.data("error-message"));
y=false
}else{$errorMessage.hide()
}})();
(function v(){if(termsAndConditions.prop("checked")===false){$errorTermsAndConditions.show().text($errorTermsAndConditions.data("error-message"));
y=false
}else{$errorTermsAndConditions.hide()
}})();
var u=grecaptcha.getResponse();
(function o(){if(u.length===0){$errorRecaptcha.show().text($errorRecaptcha.data("message-recaptcha-empty"));
y=false
}else{$errorRecaptcha.hide()
}})();
if(y){$("#brazilContactUsFormSubmit").prop("disabled",true);
$.ajax({type:"POST",url:"/bin/journey/brazilContactUsFormSubmit",datatype:"html",data:$("#brazilContactUsForm").serialize(),statusCode:{910:function(){$errorRecaptcha.show().text($errorRecaptcha.data("message-recaptcha-retry"));
$("#recaptcha_reload").click();
$("#brazilContactUsFormSubmit").prop("disabled",false)
},406:function(){$(".submitError").show();
$("#brazilContactUsFormSubmit").prop("disabled",false)
},500:function(){$("#brazilContactUsFormSubmit").prop("disabled",false);
$errorSubmit.show();
if($($errorSubmit).is(":visible")){console.log("is block");
$("html, body").animate({scrollTop:$($errorSubmit).offset().top},100)
}}}}).done(function(B,D,A){var C=A.status;
if(C==200){$("#brazilContactUsForm").hide();
$(".contact-us-form-success").removeClass("hide")
}else{}})
}else{}})
})
});
tccc.initComponent(".brand-product-description-list",[],function(b,a){b.each(function(){var f=$(this),d=f.find("h1"),e=f.find("h2");
function c(){a.util.truncate_text(d,1);
a.util.truncate_text(e,1)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){c()
});
c()
})
});
tccc.initComponent("#brands-container",[],function(b,a){b.each(function(){var k=$(this),f,j=k.find(".brands-col"),p=$("body").attr("data-author-mode"),g,o,l,c,i="long,short",d,n=$(".brand-list-with-logo").attr("data-brands-root-path"),p;
$(document).ready(function(){e()
});
function h(v){var w,x,y,u,r,t,s,q=0;
t=m();
if(!v||!v.length){return
}s=$("<ul class='items'>").appendTo(j);
for(w=0;
w<v.length;
w++){o=v[w]["title"+t];
c=v[w].altText;
l=v[w].url;
d=v[w]["imgSrc"+t];
y='<img class="logoImg" data-src="" src="'+d+'" alt="'+o+'"/>';
u='<span itemprop="name" data-title="'+i+'">'+o+"</span>";
r='<a href="'+l+'"> '+y+" "+u+" </a>";
x='<li class="item"> '+r+" </li>";
s.append(x)
}}function e(){var q="/bin/journey/brandlist?useBlackList=true&forPath="+n;
$.ajax({type:"GET",url:q,dataType:"json"}).done(function(s,t,r){console.log("response",s);
f=s;
h(f)
}).fail(function(r,s){console.log("error",s)
})
}function m(){if($("html").hasClass("tablet")){return"Tablet"
}else{if($("html").hasClass("mobile")){return"Mobile"
}else{return"Desktop"
}}}})
});
tccc.initComponent(".m-f-brand-launcher",[],function(b,a){b.each(function(){var v=$(this),i=v.find(".brand-grid"),t=v.find(".brands-container"),e=t.find(".brand-row"),j=t.find(".brand-row.topRow"),u=v.find(".icon-chevron-sign-down"),f=v.find(".textBrandLinks .brand-list li a span"),k=v.attr("data-brands-root-path"),s=v.attr("data-remove-collapse"),p=$("body").attr("data-author-mode"),c=v.attr("data-replace-logo"),r=v.attr("data-current-page"),m=v.find(".textBrandLinks").attr("data-totalBrands"),x,n,o;
$(document).ready(function(){isMobile=h();
if(isMobile&&c){t.addClass("mobile")
}d()
});
if(a.global.sizes.current_size!==a.global.sizes.MOBILE&&v.hasClass("open")){w()
}var l=$(".brand-list li").length;
if(l===7){$(".brands-toggle").addClass("hidden-lg hidden-md")
}a.util.truncate_text(f,2);
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){a.util.truncate_text(f,2);
if(v.hasClass("open")){if(a.global.sizes.current_size!==a.global.sizes.MOBILE){w();
i.show()
}else{if(!$(this).hasClass("closed")){$(this).addClass("closed")
}if(u.hasClass("icon-chevron-sign-up")){u.toggleClass("icon-chevron-sign-down icon-chevron-sign-up")
}i.hide()
}}});
t.on("click",".brands-toggle",function(y){console.log("click",t);
y.stopPropagation();
y.preventDefault();
if(y.type==="touchstart"){$(this).off("click")
}if(y.type==="click"){$(this).off("touchstart")
}$(this).toggleClass("closed");
u.toggleClass("icon-chevron-sign-down icon-chevron-sign-up");
i.slideToggle("slow")
});
function w(){e.show();
if($(this).hasClass("closed")){$(this).removeClass("closed")
}if(u.hasClass("icon-chevron-sign-down")){u.toggleClass("icon-chevron-sign-up icon-chevron-sign-down")
}}function d(){var y="/bin/journey/brandlist?forPath="+k;
$.ajax({type:"GET",url:y,dataType:"json"}).then(function(A,B,z){x=A;
console.log("response",A);
q(x,h())
}).fail(function(z,A){console.log("error",A,z)
})
}function q(Q,K){var L,O,y,T,P,F,K,S,G,A,M,R,K=K,J=$('<ul class="brand-list clearfix"></ul>'),E=$('<ul class="brand-list brand-banner clearfix"></ul>'),H,C,B,N,I=[],z=[],D;
n=g(h());
if(!Q||!Q.length){return
}I=Q.slice(0,n).filter(function(U){return U
});
z=Q.slice(n).filter(function(U){return U
});
$(E).insertBefore(j);
$(J).prependTo(i);
for(L=0;
L<I.length;
L++){M=Q[L].altText;
F=Q[L]["title"+K];
A=Q[L].url;
isMatch=A.match(r);
P='<span itemprop="name" data-title="'+F+'">'+F+"</span>";
R='<a href="'+A+'"> '+P+" </a>";
if(!c){G=Q[L]["imgSrc"+K];
T='<img class="" src="'+G+'" alt="'+M+'"  />';
y='<a href="'+A+'"> '+T+" </a>";
if(isMatch){O='<li class="flex-row selected"> '+y+"</li>"
}else{O='<li class="flex-row"> '+y+"</li>"
}}else{t.addClass("textBrandLinks");
if(isMatch){O='<li class="flex-row selected"> '+R+"</li>"
}else{O='<li class="flex-row"> '+R+"</li>"
}}H=E.append(O)
}for(L=0;
L<z.length;
L++){M=z[L].altText;
F=z[L]["title"+K];
A=z[L].url;
isMatch=A.match(r);
P='<span itemprop="name" data-title="'+F+'">'+F+"</span>";
R='<a href="'+A+'"> '+P+" </a>";
if(!c){G=z[L]["imgSrc"+K];
T='<img class="" src="'+G+'" alt="'+M+'"  />';
y='<a href="'+A+'"> '+T+" </a>";
if(isMatch){O='<li class="flex-row selected"> '+y+"</li>"
}else{O='<li class="flex-row"> '+y+"</li>"
}}else{t.addClass("textBrandsLinks");
if(isMatch){O='<li class="flex-row selected"> '+R+"</li>"
}else{O='<li class="flex-row"> '+R+"</li>"
}}H=J.append(O)
}}function h(){if($("html").hasClass("tablet")){return"Tablet"
}else{if($("html").hasClass("mobile")){return"Mobile"
}else{return"Desktop"
}}}function g(y){return y==="Tablet"?7:y==="Desktop"?7:y==="Mobile"?4:4
}})
});
if(window.tccc!==undefined){tccc.initComponent(".m-profile .details",[],function(a){setTimeout(function(){a.addClass("transition-in")
},600)
})
}tccc.initComponent(".all-brands-list",["selectBoxIt","brandAllHandler.min"],function(d,c,b,a){d.each(function(){var h=$(this),m=h.find("h2"),f=h.find("#filter-by-country"),n=h.find("div#brands-text > p"),j=d.data("brands-url"),o=d.data("countries-url"),i=d.data("selected-country"),g=d.data("view-all-brands"),s='<option value="all">'+g+"</option>",e=new a(),q;
var k=function(){if($("#filter-by-countrySelectBoxItText").attr("data-val")!=="all"){$(n).css("display","none")
}else{$(n).css("display","block")
}};
function r(){var t=q.length,v=0;
for(v;
v<t;
v+=1){var z=q[v],y=z.text,x=z.value,w=(x===i)?"selected":"",u='<option value="'+x+'"'+w+">"+y+"</option>";
s+=u
}f.html(s);
f.selectBoxIt(c.global.selectBoxItOptions).data("selectBoxIt");
$(document).click(function(){$(".selectboxit").removeClass("selectboxit-open");
$(".selectboxit-options").hide()
});
$(document).on("click",".selectboxit-container",function(A){A.stopPropagation()
});
f.on("change",function(){e.init($(this).val(),j,h);
k()
})
}function p(){$.getJSON(o).done(function(t){q=t;
r();
k()
})
}function l(){c.util.truncate_text(m,1)
}$(c.global).bind(c.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){l()
});
l();
p()
})
});