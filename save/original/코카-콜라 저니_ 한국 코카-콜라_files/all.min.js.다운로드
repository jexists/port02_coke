tccc.initComponent(".press-center-countries",["tccc"],function(a){var b=$("#isPublishModePressCenter").val();
$("#presscenter-country-dropdown").change(function(){defaultPagePath=$(this).find(":selected").attr("data-default-page-path");
if(b==="true"){relocatePath=splitCurrentPagePath(defaultPagePath)
}else{relocatePath=defaultPagePath
}window.location=relocatePath
})
});
tccc.initComponent(".subNav",["subNav"],function(c,b,a){c.each(function(){var d=a;
d.Top.init();
a.Bottom.init();
$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(e,f){d.Top.init();
a.Bottom.init()
})
})
});
tccc.initComponent(".redesignedNutritionWrapper",["mobileJquery"],function(b,a){b.each(function(){$(document).ready(function(){var e=$(".brand-banner li");
e.each(function(g,f){if($(f).hasClass("selected")){$(this).parent().prepend(this)
}});
var c=$(".brand-grid .brand-list li");
c.each(function(g,f){if($(f).hasClass("selected")){$(".brand-banner li").removeClass("selected");
$(this).addClass("selected");
$(".brand-banner").prepend(this);
$(".brand-grid .brand-list li:nth-child(1)").before($(".brand-banner li:last"))
}});
if(a.global.sizes.current_size===a.global.sizes.MOBILE){$(".brands-container").children("a").click(function(f){$(".brand-grid .brand-list").prepend($(".brand-banner li:nth-child(1)"))
});
var d=$(".brands-container").children("a").find("span").attr("data-view-all-expand-link-mobile");
$(".brands-container").children("a").find("span").text("View All Brands");
$("a").buttonMarkup({icon:"carat-d"})
}})
})
});
tccc.initComponent(".video-assets-template",[],function(b,a){b.each(function(){var c=$(this),d=c.find(".description-asset span");
a.util.truncate_text(d,2);
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(e,f){a.util.truncate_text(d,2)
})
})
});
tccc.initComponent(".subNav",["subNav"],function(c,b,a){c.each(function(){var d=a;
d.Top.init();
a.Bottom.init();
$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(e,f){d.Top.init();
a.Bottom.init()
})
})
});
if(typeof is_fact_slides_loaded==="undefined"&&$("article.facts-slides-experience").length){is_fact_slides_loaded=true;
define("factSlides",["tccc","brightcovePlayer"],function(a){return function(c,d,b){$(document).ready(function(k){if(typeof window.isFactSlideLoaded==="undefined"){window.isFactSlideLoaded=true;
var s=c,j=k(d||".facts-slides-experience"),n=j.attr("data-thumb-url"),h=j.attr("data-related-url"),l=j.attr("data-slide-text"),m=j.attr("data-home-url");
if(k(".facts-slides-experience").length){k("html, body").css({"font-size":"100%","background-color":"#000","min-height":"100%",height:"100%"});
k("h1, h2, h3").css({margin:"0"});
k("body").css("overflow","hidden")
}if(!k("html").hasClass("mobile")){k(".mobile-only").remove()
}var g=b||{deeplinking:{enabled:true,change:true,prefix:""},arrowsNavAutoHide:true,arrowsNavHideOnTouch:true,keyboardNavEnabled:false,controlNavigation:"none",navigateByClick:false,sliderDrag:false,globalCaption:true,globalCaptionInside:false,autoScaleSlider:false,autoHeight:false,autoCenter:false,imageScaleMode:"fit",loopRewind:false,addActiveClass:true,numImagesToPreload:1};
k(".slideNum").each(function(y,x){var z=y+1;
k(x).text(z)
});
if(k(".experience-wrapper").parent().attr("data-role")==="page"){k(".experience-wrapper").unwrap()
}var t=u();
k(".gallery-cover img").each(function(y,x){var z=k(x);
var B=z.data("src");
if(B){var A=B[t];
if(A.length>0){z.attr("src",A)
}}});
k(".gallery-cover .vertically-centering-bounds img").each(function(y,x){var z=k(x);
var B=z.attr("src");
var C=z.closest(".gallery-cover");
if(!C.hasClass("title-slide")){if(B.length<1){z.remove()
}else{if(C.length){var A=C.find(".banner-top");
A.remove()
}}}});
var e=j.find(".media-gallery");
if(e.length){var f=e.royalSlider(g).data("royalSlider");
f.ev.on("rsAfterSlideChange",function(y){var z=k(f.currSlide.content);
var x=z.find(".js-related-galleries-container").length;
if(x){if(k("html").hasClass("mobile")){q.overlay.load_related_galleries()
}}});
if(g.elementToAppendCaption){e.find(" > .rsGCaption").appendTo(g.elementToAppendCaption)
}}var r=null;
var v={do_intro:function(z){var A=j.find(".gallery-cover .coca-cola-logo"),x=j.find(".slideNum");
if(!r){r=j.find(".gallery-cover .textblock")
}if(z){function z(G,F){var D=Math.ceil((Math.random()*4)),C={from:{},to:{}};
if(!F){G.css("display","inline")
}if(F){switch(true){case D<=1:animationDirection="top";
C.from.top="-100%";
if(a.global.current_size==="tablet"){C.to.top="50%"
}else{C.to.top="25%"
}break;
case D>1&&D<=2:animationDirection="right";
C.from.left="100%";
C.to.left="0%";
break;
case D>2&&D<=3:animationDirection="bottom";
C.from.top="100%";
if(a.global.current_size==="tablet"){C.to.top="50%"
}else{C.to.top="25%"
}break;
case D>3:animationDirection="left";
C.from.left="-100%";
C.to.left="0%";
break
}k.extend(C.from,{visibility:"visible"});
G.css(C.from).promise().done(function(){setTimeout(function(){if(C.from.left){G.animate(C.to,1000)
}else{G.animate(C.to,600)
}},50)
})
}else{switch(true){case D<=1:animationDirection="top";
C.from.top="-50%";
C.to.top="50%";
break;
case D>1&&D<=2:animationDirection="right";
C.from.left="100%";
C.to.left="0%";
break;
case D>2&&D<=3:animationDirection="bottom";
C.from.top="-50%";
C.to.top="50%";
break;
case D>3:animationDirection="left";
C.from.left="-100%";
C.to.left="0%";
break
}k.extend(C.from,{visibility:"visible"});
k(".facts-slides-experience .gallery-cover .banner-top").css("visibility","visible");
var E=k(".rsSlide .gallery-cover .vertically-centering-bounds .vertically-centered-content");
E.css(C.from).promise().done(function(){setTimeout(function(){if(C.from.left){E.animate(C.to,1000)
}else{E.animate(C.to,600)
}},50)
})
}}var B=r.closest(".banner-top");
if(B.length){z(B,true)
}else{var y=j.find(".clearfix img.image-overlay");
z(y,false)
}}else{setTimeout(function(){x.removeClass("static").addClass("animate");
A.removeClass("static").addClass("animate");
r.addClass("animate").removeClass("static")
},450)
}}},q={_visible_class:"show",_hidden_class:"hide",$container:j.find(".js-media-toolbar-container"),states:{is_visible:false,is_slide_meta_visible:true},selectors:{layer:".layer1",slide_meta_caption:".js-caption",slide_meta_attribution:".js-attribution-wrapper",tools_wrapper:".js-media-toolbar"},show:function(){var x=this.states;
if(!x.is_visible){this.$container.toggleClass(this._hidden_class+" "+this._visible_class);
x.is_visible=true
}},hide:function(){var x=this.states;
if(x.is_visible){this.$container.toggleClass(this._visible_class+" "+this._hidden_class);
x.is_visible=false
}},buttons:{_selected_class:"selected",_deselected_class:"",_disabled_class:"button-disabled",_enabled_class:"button-enabled",states:{$selected:null},$accordion_button:j.find(" .js-accordion-button"),$overlay_close_button:j.find(" .js-overlay-close-button"),$gallery_button:j.find(" .js-gallery-button"),$comments_button:j.find(" .js-comments-button"),$share_button:j.find(" .js-share-button"),$goto_article_button:j.find(" .js-gotoArticle-button"),$related_galleries_button:j.find(" .js-related-button"),$download_button:j.find(" .js-download-button"),$exit_button:k(".js-exit-button"),toggle_selected:function(x){x.toggleClass(this._selected_class+" "+this._deselected_class);
var y=this.states.$selected;
if(y){y.toggleClass(this._deselected_class+" "+this._selected_class)
}y=x
},disable_download:function(){this.$download_button.hide()
},enable_download:function(){this.$download_button.show()
}},overlay:{classes:{closed:"minimized",open:"maximized",hidden:"hidden",visible:"visible"},selectors:{full_overlay_container:".js-full-overlay",sharebar_container:"#js-media-sharing",gallery_directory_container:".js-gallery-directory-container",comments_container:"#js-comments-container",comments_plugin:"js-comments",related_galleries_container:".js-related-galleries-container",thumbnail_list:".js-gallery-thumbnail-list",close_button:".js-overlay-close-button",load_thumbnails_button:".js-load-more-thumbnails-button",load_comments_button:".js-load-more-comments-button"},states:{$current_container:null,thumbnail_request_limit:8,thumbnail_request_offset:0,is_minimized:true,is_sharebar_visible:false,can_load_more:false,already_loaded_related:false,already_loaded_thumbnails:false},set_container:function(x){this.states.$current_container=x
},render_gallery_directory:function(z){var y=q.overlay,x=j.find(this.selectors.thumbnail_list);
x.append(z);
x.find("li.related-gallery-item").each(function(A){k(this).data("slide-index",A)
});
x.off("click");
x.on("click","li",function(){f.goTo(k(this).data("slide-index"));
if(!y.states.is_minimized){y.toggle_closed(j.find(y.selectors.gallery_directory_container))
}});
this.do_intro_for_thumbnail_directory()
},render_related_galleries:function(y){var x=j.find(this.selectors.related_galleries_container);
x.append(y);
k(".related-gallery-item").each(function(A,z){var B=k(z);
if(!B.find(".media-stack .media-wrapper").length){B.remove()
}});
this.do_intro_for_related_galleries()
},toggle_open:function(A){var z=this,y=this.states.$current_container,x=j.find(this.selectors.close_button);
if(!y){return console.warn("You didn't set a container node yet.")
}if(y.data("transitionType")==="drawer"){y.toggleClass(this.classes.open+" "+this.classes.closed);
A.toggleClass(this.classes.visible+" "+this.classes.hidden)
}else{y.toggleClass(this.classes.open+" "+this.classes.closed);
y.fadeIn(120,"swing",function(){A.toggleClass(z.classes.visible+" "+z.classes.hidden)
})
}this.states.is_minimized=false;
x.on("overlay.close",function(B){z.toggle_closed(A)
})
},toggle_closed:function(A){var z=this,y=this.states.$current_container,x=j.find(this.selectors.close_button);
if(y.data("transitionType")==="drawer"){A.toggleClass(this.classes.hidden+" "+this.classes.visible);
y.toggleClass(this.classes.closed+" "+this.classes.open)
}else{y.fadeOut(400,"swing",function(){A.toggleClass(z.classes.hidden+" "+z.classes.visible);
k(this).toggleClass(z.classes.closed+" "+z.classes.open)
})
}this.states.is_minimized=true;
if(x.length){x.off("overlay.close")
}},load_thumbs:function(){var x=this;
k.ajax({url:n+"/"+s+"/"+x.states.thumbnail_request_limit+"/"+x.states.thumbnail_request_offset+".html"}).done(function(A){x.render_gallery_directory(A);
var y=k(".requestLoadMore:last").val();
x.states.thumbnail_request_offset=k(".requestOffset:last").val();
if(y==="false"){var z=".js-load-more-thumbnails-button";
k(z).off("thumbnails.loadMore");
k(z).hide()
}})
},load_related_galleries:function(){var x=this;
if(this.states.already_loaded_related){this.do_intro_for_related_galleries();
return
}k.ajax({url:h+"/"+s+".html"}).done(function(y){x.render_related_galleries(y);
x.states.already_loaded_related=true
})
},load_social_shares:function(){},update_social_params:function(){var x=window.location.protocol+"//"+window.location.host;
k("meta[property=og\\:description]").attr("content",(k.trim(k(".media-caption-wrapper .rsCaption h1").text())+" "+k.trim(k(".media-caption-wrapper .rsCaption .js-caption").text())).replace(/(\r\n|\n|\r)/gm,""));
k("meta[property=og\\:url]").attr("content",window.location.href);
if(window.location.port!==""){x+=":"+window.location.port
}k("meta[property=og\\:image]").attr("content",x+f.currSlide.image);
window.dinamicLoad=true
},do_intro_for_thumbnail_directory:function(){var x=j.find(this.selectors.gallery_directory_container)
},do_intro_for_related_galleries:function(){}}},w=k(".js-media-caption-wrapper"),p=k(".rsGCaption"),o=k(".js-media-current-index-label");
w.html(p);
function u(){var x="desktop";
switch(a.global.sizes.current_size){case a.global.sizes.BIG_DESKTOP:case a.global.sizes.DESKTOP:x="desktop";
break;
case a.global.sizes.TABLET:x="tablet";
break;
case a.global.sizes.MOBILE:x="mobile";
break
}return x
}(function(){var B=function(Q){if(a.global.gigya_available){I()
}else{k(a.global).on(a.global.events.ON_GIGYA_READY,function(R){I()
})
}P(q);
M(Q);
L(Q);
x(Q)
};
var I=function(){var Q=q.buttons;
Q.$share_button.toggleClass(Q._enabled_class+" "+Q._disabled_class);
Q.$comments_button.toggleClass(Q._enabled_class+" "+Q._disabled_class)
};
var P=function(){var R=q.buttons,Q=q.overlay;
j.find(Q.selectors.close_button).click(function(S){k(this).trigger("overlay.close")
});
j.find(Q.selectors.load_thumbnails_button).click(function(S){k(this).trigger("thumbnails.loadMore")
});
R.$gallery_button.click(function(){E()
});
R.$comments_button.click(function(){C()
});
R.$share_button.click(function(){O()
});
R.$related_galleries_button.click(function(){J()
});
R.$goto_article_button.click(function(){z()
});
R.$download_button.click(function(){H()
});
R.$exit_button.click(function(){G()
});
R.$accordion_button.click(function(){A()
})
};
var y=function(Q){return Q.currSlide.id===0
};
var M=function(R,Q){o=k(".js-media-current-index-label");
if(typeof R!=="undefined"){if(!Q){Q=R.currSlide
}if(k("html").hasClass("mobile")){if(R.currSlideId===R.numSlides-1){k(".rsArrow").css("visibility","hidden");
k(".close-button").off("click").click(function(S){f.prev()
})
}else{k(".rsArrow").css("visibility","visible")
}if(R.currSlideId===0){k("header .layer3 .col2").css("visibility","hidden")
}else{k("header .layer3 .col2").css("visibility","visible")
}}else{k(".rsArrow").css("visibility","visible");
k("header .layer3 .col2").css("visibility","visible")
}if(R.currSlideId>0){o.html(""+R.currSlideId+" "+l+" "+(R.slides.length-1)).show();
v.do_intro(true)
}else{w.html("").hide();
o.empty().hide()
}q.show()
}};
var L=function(Q){j.find(q.selectors.layer).removeClass("hide").addClass("show")
};
var F=function(){var Q=q.overlay,R=q.buttons.$share_button,S=j.find(Q.selectors.sharebar_container);
if(!Q.states.is_sharebar_visible){Q.load_social_shares();
Q.update_social_params();
Q.set_container(S);
Q.toggle_open(S);
q.buttons.toggle_selected(R);
Q.states.is_sharebar_visible=true
}};
var D=function(){var Q=q.overlay,R=q.buttons.$share_button,S=j.find(Q.selectors.sharebar_container);
if(Q.states.is_sharebar_visible){Q.set_container(S);
Q.toggle_closed(S);
q.buttons.toggle_selected(R);
Q.states.is_sharebar_visible=false
}};
var O=function(){var Q=q.overlay;
if(Q.states.is_sharebar_visible){D()
}else{F()
}};
var A=function(){var Q=q.buttons.$accordion_button,T=j.find(q.selectors.slide_meta_caption),S=j.find(q.selectors.tools_wrapper),R=j.find(q.selectors.slide_meta_attribution);
q.buttons.toggle_selected(Q);
D();
if(Q.hasClass("selected")){q.states.is_slide_meta_visible=false
}else{q.states.is_slide_meta_visible=true
}if(!q.states.is_slide_meta_visible){q.states.is_slide_meta_visible=true;
T.addClass("visible");
R.addClass("visible");
S.addClass("visible")
}else{q.states.is_slide_meta_visible=false;
T.removeClass("visible");
R.removeClass("visible");
S.removeClass("visible")
}};
var E=function(){var Q=q.overlay,S=q.buttons.$gallery_button,R=j.find(Q.selectors.load_thumbnails_button);
D();
q.buttons.toggle_selected(S);
Q.set_container(j.find(Q.selectors.full_overlay_container));
Q.toggle_open(j.find(Q.selectors.gallery_directory_container));
if(!Q.states.already_loaded_thumbnails){Q.load_thumbs();
R.on("thumbnails.loadMore",function(T){T.stopPropagation();
Q.load_thumbs()
});
R.show()
}else{Q.do_intro_for_thumbnail_directory()
}};
var C=function(){var Q=q.overlay,R=q.buttons.$comments_button;
D();
q.buttons.toggle_selected(R);
Q.set_container(j.find(Q.selectors.full_overlay_container));
Q.toggle_open(j.find(Q.selectors.comments_container))
};
var J=function(){var Q=q.overlay,R=q.buttons.$related_galleries_button;
D();
q.buttons.toggle_selected(R);
Q.set_container(j.find(Q.selectors.full_overlay_container));
Q.states.$current_container.find(".media-wrapper").removeClass("animate");
Q.toggle_open(j.find(Q.selectors.related_galleries_container));
Q.load_related_galleries()
};
var H=function(){alert("Feature coming soon...");
D()
};
var G=function(){var S=q.buttons.$goto_article_button,R=S.data("articleUrl"),T=S.data("target"),Q=document.referrer;
if(R!==undefined){window.open(R,T)
}else{if(Q.split("/")[2]===location.host){window.open(Q,"_self")
}else{window.open(m,"_self")
}}};
var z=function(){G()
};
var K=function(Q){var R=Q.content[0].children[0],T=Q.content[0].children[1],V,S,U,W;
if(R!==undefined){V=R.width;
S=R.height;
U=R.style.marginLeft;
W=R.style.marginTop
}if(T!==undefined){k(T).width(V).height(S).css("margin-left",U).css("margin-top",W)
}};
var x=function(Q){if(typeof Q!=="undefined"){f.ev.on("rsAfterContentSet",function(S){var R=this.currSlide;
setTimeout(function(){K(R)
},250)
});
f.ev.on("rsAfterSlideChange",function(S){var R=this.currSlide;
M(this,R);
D()
});
f.ev.on("rsBeforeAnimStart",function(U){j.find(".banner-top").attr("style","");
k(".clearfix img.image-overlay").hide();
if(k(".effectImg").length>0){var R=this.currSlide;
K(R);
var X;
var W;
var Y;
var S=R.content[0].children[0];
var V=S.width;
var T=S.height;
k(".effectImg").each(function(){X=k(this);
W=X.attr("data-move-effect");
if(W==="top"){Y=T
}else{if(W==="right"){Y=V
}else{if(W==="bottom"){Y=T
}else{Y=V
}}}k(this).attr("data-move-offset",Y)
});
this.updateSliderSize()
}});
f.ev.on("rsOnCreateVideoElement",function(V,T){var U=T.split("|"),S,R;
if(U.length){S=U[0];
R=U[1]
}if(S==="brightcove"){f.videoObj=a.templates.getBrightcoveVideoPlayer(R);
LazyLoad.js("https://sadmin.brightcove.com/js/BrightcoveExperiences.js",function(){k(".rsPreloader").hide();
k(".rsCloseVideoBtn").hide()
})
}})
}};
try{f.slides[0].holder.on("rsAfterContentSet",function(Q){v.do_intro()
})
}catch(N){}B(f)
})(q)
}})
}
})
}$(window).load(function(){if($("article.facts-slides-experience").length){setTimeout(function(){if(!$("body").hasClass("cq-wcm-edit")){require(["factSlides"],function(a){if($(".immersive-gallery-experience").length>0){new a("ugc-snapshots-gallery")
}else{var c=true;
if($("html").hasClass("mobile")){c=false
}var b={deeplinking:{enabled:true,change:true,prefix:""},block:{speed:500,delay:200},arrowsNavAutoHide:c,arrowsNavHideOnTouch:false,keyboardNavEnabled:false,navigateByClick:false,sliderDrag:false,globalCaption:true,globalCaptionInside:false,autoScaleSlider:false,autoHeight:false,autoCenter:false,imageScaleMode:"fit",loopRewind:false,controlNavigation:"none",numImagesToPreload:1};
new a("ugc-snapshots-gallery",".facts-slides-experience",b)
}})
}else{setInterval(function(){$(".cq-packagemgr-edit-box .photos .thumb_wrapper").css("float","none");
$(".cq-packagemgr-edit-box .photos .thumb").css("width","99%");
$(".cq-packagemgr-edit-box .photos .thumb").css("height","80px")
},1000)
}},500)
}});
tccc.initComponent(".image-asset",["jqJSONP"],function(c,a,b){c.each(function(){var d=$(this);
launchAsset=d.find(".launch-asset-download");
downloadButton=d.find("#download-button");
closeButton=d.find(".close");
context={section:"press_center",permalink:"",download_link:launchAsset.data("link"),asset_type:"image/jpeg",subscribe_url:launchAsset.data("subscribe"),needs_download_challenge:true};
launchAsset.on("click",function(){var g=$(this).data("link"),f=$(this).data("type"),e=$("#download-modal");
e.find('input[name="download_link"]').val(g);
e.find("h3").html('<span class="icon"></span>'+f);
e.fadeIn("slow");
closeButton.on("click",function(){e.fadeOut("slow")
})
});
downloadButton.on("click",function(m){var m=window.event||m;
m.preventDefault?m.preventDefault():m.returnValue=false;
m.stopPropagation?m.stopPropagation():m.returnValue=false;
download_link=$("#download-modal").find('input[name="download_link"]').val(),email_address=$("#download-modal").find('input[name="email"]').val(),media_outlet=$("#download-modal").find('input[name="company"]').val();
form_fields_not_available=$('#download-modal input[name="email"]').length==0;
if(download_link!==""){var k=true;
if(email_address===""||(!/(.+)@(.+){2,}\.(.+){2,}/.test(email_address))){$(".error.email_address").css("color","#f90").text("Please provide a valid email address");
k=false
}else{$(".error.email_address").css("color","#fff")
}if(media_outlet===""||media_outlet==="Media Outlet"){$(".error.media_outlet").css("color","#f90").text("Please provide a media outlet");
k=false
}else{$(".error.media_outlet").css("color","#fff")
}if((!context.needs_download_challenge)||form_fields_not_available){var h=document.createElement("a");
h.setAttribute("href",download_link);
h.setAttribute("target","_blank");
var n=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;
var j;
if(document.createEvent&&!n){document.body.insertBefore(h,document.body.firstChild);
j=new MouseEvent("click",{view:window,bubbles:true,cancelable:true});
h.dispatchEvent(j)
}else{j=new MouseEvent("click",{view:window,bubbles:true,cancelable:true});
h.dispatchEvent(j)
}$("#download-modal").fadeOut();
return
}if(k){var f=window.open(""),l=form2object("asset_download_challenge"),g=JSON.stringify(l);
$.ajax({type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:context.subscribe_url,data:g}).done(function(e){f.location=download_link;
$("#download-modal").fadeOut()
})
}}else{console.error("Download link is not set");
$("#download-modal").fadeOut();
return false
}})
})
});
tccc.initComponent(".company-main-template",[],function(b,a){b.each(function(){$(document).ready(function(){if($(".subNavTopLevel li").length==0){$(".company-main-template .grid-2-col .SubNavigationContainer header").css("paddingBottom","20px")
}})
})
});
tccc.initComponent(".brands-header",["selectBoxIt"],function(a,l,k){var j=$(this);
var m=$("#isPublishModeBrand").val();
var q=$("a.link-brands");
var r=$(".brand-section-dropdown");
var o=$(".link-brands");
var h=$("#mobileHeader");
var c=$("#myId").attr("href");
var b=$("#brands-country-dropdownSelectBoxItArrowContainer");
if($("#brands-country-dropdown").length){$("#brands-country-dropdown").selectBoxIt();
var f=$("#brands-country-dropdown").selectBoxIt(l.global.selectBoxItOptions).data("selectBox-selectBoxIt");
if(f){f.setOptions({autoWidth:false,copyClasses:"container"})
}}$("#brands-country-dropdown").change(function(){defaultPagePath=$(this).find(":selected").attr("data-redirect-url");
if(m==="true"){relocatePath=splitCurrentPagePath(defaultPagePath)
}else{relocatePath=defaultPagePath
}window.location=relocatePath
});
function n(){$(".brands-mobile-link").append(q)
}function g(){$("h1.theme-main-title.heading-xlarge").attr("id","mobileHeader").css("padding-top","0px");
$(".brands-header")
}function e(){if((r.length)&&(o.length)>0){$(".brands-header").css("min-height","85px");
$("h1.theme-main-title").css("padding-top","1em")
}}function d(s){var s=$("h1 > span").text();
if(s.length>=20&&(o.length>0)){$(".brands-wrapper").css("margin-top","30px");
$(".brands-mobile-link").css("float","left")
}}function p(){var t="userSelectedCountryCode";
var y="userSelectedCountryCode";
var s="";
var x=sessionStorage.getItem(t);
var w=sessionStorage.getItem(y);
if(x!==null&&x!=="default"){s=x
}else{if(w!==null&&w!=="default"){s=w
}}if(s!==""&&$("#myId").length>0){var v=c.slice(0,c.indexOf(".html"));
var u=(v+"."+s+".html");
c=$("#myId").attr("href",u)
}else{}}$(l.global).bind(l.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if(l.global.sizes.current_size===l.global.sizes.MOBILE){n();
g();
d()
}});
p();
e();
$(document).ready(function(){$(".redesignedBrandWrapper .brand-description a").each(function(){$(this).addClass("theme-secondary-link ")
})
})
});
var productionMode=$("#productionMode").val();
if(productionMode==="true"){tccc.initComponent(".virtualAgent",["VirtuOz","VirtuOz"],function(b,a,c){})
}else{tccc.initComponent(".virtualAgent",["VirtuOzPreProd","VirtuOzPreProd"],function(c,b,a){})
}tccc.initComponent(".videoDirSearchForm",[],function(b,a){b.each(function(){var c=$(this);
c.find(".mini-video-search-toggle").click(function(d){d.preventDefault();
c.find(".mini-search").toggleClass("active inactive")
});
c.find(".mini-video-search-input").keyup(function(f){if(f.keyCode===13){this.blur();
var d=$(this).val();
c.find(".video-search-input").val(d);
c.submit()
}})
})
});
tccc.initComponent(".lazyloadvideo",[],function(a){a.each(function(){var c=tccc.global.get_OptanonCookiePrefrence();
function b(e){var h=e.data("videosrc"),g=e.data("iframeid"),d=e.data("iframeclass"),f=e.data("iframeattr");
e.click(function(){$iframe=$("<iframe />").attr("src",h).attr("height","100%").attr("width","100%").attr("type","text/html").attr("frameborder","0");
if(g){$iframe.attr("id",g)
}if(d){iframeClassArray=d.split(/[ ,]+/);
for(var j=0;
j<iframeClassArray.length;
j++){$iframe.attr("class",iframeClassArray[j])
}}if(f){iframeAttrArray=f.split(/[ ,]+/);
for(var j=0;
j<iframeAttrArray.length;
j++){$iframe.attr(iframeAttrArray[j],"")
}}$(this).empty().append($iframe)
})
}if((!($.isEmptyObject(c)))&&(c.functionalityCookieActive)||(c.allCookiesAllowed)){b($(this))
}else{if($.isEmptyObject(c)){b($(this))
}}})
});
function global_ugcformsubmit(){}$(function(){var a;
var b=false;
if($("#publishModeUgcForm").length){if($("#publishModeUgcForm").val()==="true"){b=true
}}if(b){a=["fineuploader","dialogPolyfill","mobileJquery","parsley"]
}else{a=["fineuploader"]
}tccc.initComponent("#ugcFormWrapper",a,function(f,d,c,e){f.each(function(){var o=this,J=$("#qq-form"),H=true,E=J.attr("data-form-url"),x=$("#form_name").val(),t="",K=$(".error.recaptcha"),q=false;
window.dialogPolyfill=e;
var G=[];
var B=null,h=null;
var n=false;
if(J.attr("data-form-redirect-url")&&J.attr("data-form-redirect-url").length>0){n=J.attr("data-form-redirect-url")
}var z=false;
var s=false;
var y=false;
var l=false;
var D=false;
var j=false;
var m=false;
function L(){const T=J.attr("data-photo-field-error");
const V=J.attr("data-video-field-error");
g();
var S={autoUpload:false,debug:false,form:{interceptSubmit:false},template:"qq-simple-thumbnails-template",messages:{},retry:{},callbacks:{onComplete:function(ac,Z,ab,aa){var Y=ab;
if(ab.url){G.push(Y)
}else{D=true
}},onError:function(ab,aa,Y,Z){if(Y==="No files to upload."){return
}}}};
var W=10;
if($("#image-uploader").attr("data-photo-upload-limit")){W=parseInt($("#image-uploader").attr("data-photo-upload-limit"),10)
}var R=$.extend({},S,{element:document.getElementById("image-uploader"),messages:{minSizeError:T,sizeError:T,typeError:T,tooManyItemsError:T},request:{inputName:"image-files",params:{"ugc-method":"s3"},endpoint:E},validation:{acceptFiles:"image/jpeg,image/pjpeg,image/png",allowedExtensions:["jpg","jpeg","png"],itemLimit:W,sizeLimit:10000000}});
R.callbacks.onStatusChange=function(Z,ae,af){if(af==="uploading"||af==="submitted"){s=typeof h.getName(0)==="undefined"?false:true;
z=true;
y=false
}if(af==="uploading"){var ac=this.getName(Z);
var aa=ac.substr(ac.lastIndexOf(".")+1);
var Y=x.replace(new RegExp(" ","g"),"");
var ag=t.replace(new RegExp(" ","g"),"");
ag=ag.replace(new RegExp("/","g"),"");
ag=ag.replace(new RegExp("\\\\","g"),"");
var ab=Z+1;
var ad=Y+"-"+ag+"-image-"+ab+"."+aa;
this.setName(Z,ad)
}};
R.callbacks.onAllComplete=function(Z,Y){y=true;
C()
};
if($("#image-uploader").length){B=new c.FineUploader(R)
}var U=$.extend({},S,{element:document.getElementById("video-uploader"),messages:{minSizeError:V,sizeError:V,typeError:V,tooManyItemsError:V},multiple:false,request:{inputName:"video-file",params:{"ugc-method":"s3"},endpoint:E},validation:{acceptFiles:"video/mp4,video/quicktime",allowedExtensions:["mp4","mov"],itemLimit:1,sizeLimit:50000000}});
U.callbacks.onStatusChange=function(Z,ae,af){if(af==="uploading"||af==="submitted"){z=typeof B.getName(0)==="undefined"?false:true;
s=true;
l=false
}if(af==="uploading"){var ac=this.getName(Z);
var aa=ac.substr(ac.lastIndexOf(".")+1);
var Y=x.replace(new RegExp(" ","g"),"");
var ag=t.replace(new RegExp(" ","g"),"");
ag=ag.replace(new RegExp("/","g"),"");
ag=ag.replace(new RegExp("\\\\","g"),"");
var ab=Z+1;
var ad=Y+"-"+ag+"-video-"+ab+"."+aa;
this.setName(Z,ad)
}};
U.callbacks.onAllComplete=function(Z,Y){l=true;
C()
};
if($("#video-uploader").length){h=new c.FineUploader(U)
}if(B){j=$("#image-uploader").data("photo-field-required")
}if(h){m=$("#video-uploader").data("video-field-required")
}$("label.term-checkbox").click(function(Y){Y.stopPropagation()
});
w(J);
k($("#acceptTermCondition"),"<p>");
if(J.find(".age-checker").length){$ageCheckerInfo=J.find(".age-checker .js-input-date-of-birth");
valueFormatOrder=$ageCheckerInfo.attr("data-valueformat-order");
valueFormatSeparator=$ageCheckerInfo.attr("data-value-format-separator");
fieldDisplayFormat=$ageCheckerInfo.attr("data-field-display-format");
captureDOBData=$ageCheckerInfo.attr("data-capture-dob-data");
if(fieldDisplayFormat==="dayMonthYear"){J.find(".dob-day").prependTo(".js-input-date-of-birth")
}else{if(fieldDisplayFormat==="yearMonthDay"){J.find(".dob-year").prependTo(".js-input-date-of-birth")
}else{}}}$("#ugcFormWrapper form").parsley().on("field:validated",function(){var Y=$(".parsley-error").length===0;
$(".failure").toggleClass("hide",Y)
});
$(d.global).bind(d.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if(d.global.sizes.current_size===d.global.sizes.MOBILE){$("#captcha").attr("data-size","compact")
}else{$("#captcha").removeAttr("data-size")
}});
if(d.global.sizes.current_size===d.global.sizes.MOBILE){$("#captcha").attr("data-size","compact")
}else{$("#captcha").removeAttr("data-size")
}var X=$("#submit");
X.on("click",function(){if($(".captcha-container").length){var aa=grecaptcha.getResponse();
var Z=$(".recaptcha.error");
if(aa.length===0){var Y=Z.attr("data-message-recaptcha-empty");
Z.html(Y).show()
}else{Z.hide()
}}});
J.find(".clear-button").click(function(){J[0].reset();
M()
});
J.find(".terms-conditions-container input").change(function(){M()
});
M();
if(r()){setInterval(function(){v()
},500)
}}function C(){$(".general-failure").addClass("hide");
if(!q){if(!D){if(z&&s){if(y&&l){p()
}}else{if(z){if(y){p()
}}else{if(s){if(l){p()
}}}}}else{}}else{}}function g(){$.ajax({type:"GET",url:E+"?site="+$("#site").val(),datatype:"json"}).done(function(S,T,R){t=S.s3BucketName;
$("#s3BucketName").val(t)
}).fail(function(R,S){})
}function k(S,R){S.html(S.html().replace(R,"").replace(R.replace("<","</"),""));
return true
}function I(R){if(R){$("#ugc_overlay").removeClass("hide")
}else{$("#ugc_overlay").addClass("hide")
}}function u(R,S){if(S&&S==="ENABLE"){$("#submit").addClass("disabled").prop("disabled",false)
}else{if(S&&S==="DISABLE"){$("#submit").addClass("disabled").prop("disabled",true)
}else{if(R.find(".terms-conditions-container").length){if(!R.find(".terms-conditions-container input:checked").length){$("#submit").addClass("disabled").prop("disabled",true)
}else{$("#submit").removeClass("disabled").prop("disabled",false)
}}}}return true
}function M(){$(".FormRow .formRow select, .FormRow .formRow input, .FormRow .formRow textarea").closest("section").css("width","100%");
var R,S;
A($(".formRow.parsys"));
if($("html").hasClass("mobile")){$(".FormRow .formRow select[data-mobile-override]").each(function(U,T){R=$(T).attr("data-mobile-override");
S=$(T).closest(".section");
S.css("width",R+"%")
});
$(".FormRow .formRow input[data-mobile-override]").each(function(U,T){R=$(T).attr("data-mobile-override");
S=$(T).closest(".section");
S.css("width",R+"%")
});
$(".FormRow .formRow textarea[data-mobile-override]").each(function(U,T){R=$(T).attr("data-mobile-override");
S=$(T).closest(".section");
S.css("width",R+"%")
});
$(".Radio_CheckboxInput.section").css("display","inline-block");
$(".Radio_CheckboxInput.section fieldset[data-type='horizontal'] .ui-radio").css("float","left");
$(".Radio_CheckboxInput.section fieldset[data-type='horizontal'] .ui-btn").css("border-right-width","0");
$(".Radio_CheckboxInput.section fieldset[data-type='vertical'] .ui-radio").css("float","none");
$(".Radio_CheckboxInput.section fieldset[data-type='vertical'] .ui-btn").css("border-right-width","1px")
}else{$(".FormRow .formRow select[data-desktop-tablet-override]").each(function(U,T){R=$(T).attr("data-desktop-tablet-override");
S=$(T).closest(".section");
S.css("width",R+"%")
});
$(".FormRow .formRow input[data-desktop-tablet-override]").each(function(U,T){R=$(T).attr("data-desktop-tablet-override");
S=$(T).closest(".section");
S.css("width",R+"%")
});
$(".FormRow .formRow textarea[data-desktop-tablet-override]").each(function(U,T){R=$(T).attr("data-desktop-tablet-override");
S=$(T).closest(".section");
S.css("width",R+"%")
});
$(".Radio_CheckboxInput.section").css("display","inline-block");
$(".Radio_CheckboxInput.section fieldset[data-type='horizontal'] .ui-radio").css("float","left");
$(".Radio_CheckboxInput.section fieldset[data-type='horizontal'] .ui-btn").css("border-right-width","0");
$(".Radio_CheckboxInput.section fieldset[data-type='vertical'] .ui-radio").css("float","none");
$(".Radio_CheckboxInput.section fieldset[data-type='vertical'] .ui-btn").css("border-right-width","1px")
}if(J.find(".terms-conditions-container").length){if(!J.find(".terms-conditions-container input:checked").length){$("#submit").addClass("disabled").prop("disabled",true)
}else{$("#submit").removeClass("disabled").prop("disabled",false);
$("#tcError").hide()
}}u(J)
}function A(R){try{R.contents().filter(function(){return this.nodeType=Node.TEXT_NODE&&/\S/.test(this.nodeValue)===false
}).remove()
}catch(S){}}function w(R){$(".form-characters-remaining-message > span").clone().prependTo(".characters-remaining-message");
R.find("textarea").each(function(U,T){var X=$(T);
var S=X.attr("data-maximum-characters");
var V=X.parent(".section").find(".characters-remaining-message");
var W=X.attr("data-character-count-enabled");
if(W==="true"){X.on("keydown keypress keyup",function(){updateCharsLeft(X,S,V)
});
updateCharsLeft(X,S,V)
}else{V.hide()
}});
return true
}function P(S){var W="";
var U=S.find("input, select, textarea");
var R={};
U.each(function(ab,aa){var Z=$(aa).attr("name");
var Y=["dateOfBirth/day","dateOfBirth/month","dateOfBirth/year","image-files","video-file","undefined"];
var ac=$(aa).val();
if($(aa).is(":radio")||$(aa).is(":checkbox")){if($(aa).attr("checked")!=="checked"){return true
}}if($(aa).hasClass("conditionalInputHide")){return true
}if(typeof $(aa).attr("data-capture-tandcdata")!=="undefined"){if($(aa).attr("data-capture-tandcdata")==="false"){return true
}}if(!_.contains(Y,Z)){R[Z]=ac
}});
var T=[];
_.each(G,function(Y){Y=_.omit(Y,["success"]);
T.push(Y)
});
R.media=JSON.stringify(T);
R["ugc-method"]="dynamodb";
var X=S.find(".openContent").find("input,textarea :first").val();
if(X){R["ugc-title"]=X
}var V;
for(V in R){if(R.hasOwnProperty(V)){W=W+encodeURIComponent(V)+"="+encodeURIComponent(R[V])+"&"
}}if(W.charAt(W.length-1)==="&"){W=W.substring(0,W.length-1)
}return W
}function Q(R){return !isNaN(parseFloat(R))&&isFinite(R)
}function N(S,R){return S.indexOf(R,S.length-R.length)!==-1
}function O(S){switch(S){case 200:case"200":break;
case 789:case"789":case 530:case 530:$(".general-failure").removeClass("hide");
$(".general-failure").get(0).scrollIntoView();
break;
case 510:case"510":case 910:case"910":var R=J.find(".error.recaptcha");
K.show();
K.text(R.attr("data-message-recaptcha-retry"));
$(".general-failure").removeClass("hide");
break;
case 500:case"500":default:$(".general-failure").removeClass("hide");
$(".general-failure").get(0).scrollIntoView();
break
}}function p(){q=true;
$(".qq-editable").css("visibility","hidden");
$.ajax({type:"POST",url:E,datatype:"html",data:P(J),statusCode:{910:function(){I(false);
u(J,"ENABLE");
q=false;
O(910)
},500:function(R){I(false);
u(J,"ENABLE");
q=false;
O(910)
},789:function(){I(false);
u(J,"ENABLE");
q=false;
O(789)
}}}).done(function(S,U,R){I(false);
u(J,"ENABLE");
var T=R.status;
if(T===200){if(S.responseCode){if(S.responseCode==="200"){if(n){window.location=n
}else{J.hide();
$(".success").removeClass("hide").focus()
}}else{q=false;
O(S.responseCode)
}}else{if(n){window.location=n
}else{J.hide();
$(".success").removeClass("hide").focus()
}}}else{q=false;
O(T)
}})
}function F(){if(localStorage){if(localStorage.getItem("underage")==="true"){return false
}else{return true
}}return true
}window.global_ugcformsubmit=function(){I(true);
u(J,"DISABLE");
$(".image-container .parsley-errors-list").addClass("hide");
$(".video-container .parsley-errors-list").addClass("hide");
if(J.find(".age-checker").length){var X,U,V,aa,T,Z;
X=$ageCheckerInfo.find("select.js-day-selectbox").val();
U=$ageCheckerInfo.find("select.js-month-selectbox").val();
V=$ageCheckerInfo.find("select.js-year-selectbox").val();
H=false;
if(Q(U)&&Q(X)&&Q(V)){Z=U+"/"+X+"/"+V;
var W,Y=window.location.hostname,R=window.location.pathname,S=N(R,".html");
if(R.charAt(R.length-1)==="/"){R=R.substring(0,R.length-1)
}$.ajax({type:"POST",url:"/bin/journey/getcontentpath",data:{domainName:window.location.hostname,vanityUrl:R},success:function(ab){var af=ab.contentPath;
var ad="";
var ae=af.split("/");
for(var ac=0;
ac<=3;
ac++){ad=ad+ae[ac]+"/"
}ad=ad+"jcr:content";
$.ajax({type:"POST",url:"/bin/journey/ageVerificationService",data:{age:Z,parentPath:ad},success:function(ak){J.find(".age-checker .error").hide();
H=false;
var aj=F();
if(ak.isEligibleToSignUp&&aj){H=true
}if(captureDOBData==="true"){$("input[id='birthday']").remove();
if(valueFormatOrder==="DDMMYYYY"){aa=X+valueFormatSeparator+U+valueFormatSeparator+V
}else{if(valueFormatOrder==="YYYYMMDD"){aa=V+valueFormatSeparator+U+valueFormatSeparator+X
}else{aa=U+valueFormatSeparator+X+valueFormatSeparator+V
}}var an=$(".js-input-date-of-birth").attr("data-input-name");
var am=$(".age-checker label").text();
$("<input>").attr({type:"hidden",id:"birthday",name:an,value:aa}).attr("data-label",am).appendTo("form")
}if(H){var ah=J.find(".captcha-container .error");
var al=J.find("input[name='recaptcha_response_field']").val();
var ag=true;
var ai=true;
ah.hide();
if(J.find(".terms-conditions-container").length){if(!J.find(".terms-conditions-container input:checked").length){ag=false
}}if($(".captcha-container").length){if((grecaptcha.getResponse()).length===0){ai=false
}}if(ag){if(ai){if(y&&l){if(!q){p()
}}else{if(!B&&!h){if(!q){p()
}}else{if((z||!j)&&(s||!m)){if(z&&B){B.uploadStoredFiles()
}if(s&&h){h.uploadStoredFiles()
}if(!z&&!s){p()
}}else{if(j&&!z){$(".image-container .parsley-errors-list").removeClass("hide").css("opacity","1");
I(false);
u(J,"ENABLE")
}if(m&&!s){$(".video-container .parsley-errors-list").removeClass("hide").css("opacity","1");
I(false);
u(J,"ENABLE")
}}}}}else{I(false);
u(J,"ENABLE");
ah.show();
ah.text(ah.attr("data-message-recaptcha-empty"))
}}else{I(false);
u(J,"ENABLE");
$("#tcError").show()
}}else{J.hide();
$(".underage_message").removeClass("hide");
I(false);
localStorage.setItem("underage","true")
}}})
}})
}else{I(false);
u(J,"ENABLE");
$(".age-checker .error").html($(".error.adult").attr("data-error-missing-age"));
$(".age-checker .error").show()
}}else{if(!q){p()
}}};
function v(){$("body").append($("dialog + .backdrop"));
var R=$("dialog").css("z-index");
if(R===999999){$("dialog").css("z-index","999998");
$("dialog div").css("z-index","999998")
}else{$("dialog").css("z-index","999999");
$("dialog div").css("z-index","999999")
}$("dialog").css("margin","0 auto");
$("dialog").css("padding","20px");
$("dialog").css("max-width","600px");
$("dialog").css("width","600px");
$("dialog").css("text-align","center");
$(".backdrop").css("opacity","0.7");
$(".backdrop").css("position","fixed");
$(".backdrop").css("top","0");
$(".backdrop").css("right","0");
$(".backdrop").css("left","0");
$(".backdrop").css("bottom","0");
$(".backdrop").css("background-color","#ccc")
}function r(){var S=window.navigator.userAgent;
var R=S.indexOf("MSIE ");
if(R>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){return true
}else{return false
}}L();
J.attr("action","javascript: global_ugcformsubmit();")
})
})
});
tccc.initComponent(".twitter-feed",[],function(){var b=tccc.global.get_OptanonCookiePrefrence();
if((!($.isEmptyObject(b)))&&(b.functionalityCookieActive)||(b.allCookiesAllowed)){c()
}else{if($.isEmptyObject(b)){c()
}}function c(){setTimeout(function(){!function(j,e,k){var h,f=j.getElementsByTagName(e)[0],g=/^http:/.test(j.location)?"http":"https";
if(!j.getElementById(k)){h=j.createElement(e);
h.id=k;
h.src=g+"://platform.twitter.com/widgets.js";
f.parentNode.insertBefore(h,f)
}}(document,"script","twitter-wjs")
},500)
}var a=setInterval(function(){if($("#twitter-widget-0").length>0){$("#twitter-widget-0").contents().find(".timeline").css("max-width","100%");
setTimeout(function(){clearInterval(a)
},10000)
}},1000)
});
tccc.initComponent(".trending-topic",["trending"],function(c,a,b){c.each(function(){var f=c.find(".theme-contrast h4 span"),e=c.find(".truncate");
$(".trending-top-ten").css("display","block");
function d(){a.util.truncate_text(f,1);
a.util.truncate_text(e,3)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){d()
});
d();
b.init()
})
});
tccc.initComponent(".packages-t-t",[],function(b,a){b.each(function(){var f=$(this),e=f.find(".topic-title"),d=f.find(".topic-summary");
function c(){a.util.truncate_text(e,2);
a.util.truncate_text(d,2)
}$(".topic-contents").css("display","block");
$(".topic-contents").addClass("blockimportant");
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){c()
});
c()
})
});
tccc.initComponent(".topic-list",[],function(b,a){b.each(function(){var d=$(this);
var c=d.find(".title p");
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){a.util.truncate_text(c,2)
});
a.util.truncate_text(c,2)
})
});
tccc.initComponent(".topic-hero-promo-space",[],function(b,a){b.each(function(){var h=$(this),g=h.find(".description"),f=h.find(".topic-headline"),d=$(".careers").length>0,c=$("#topic-container").length>0;
function e(){if(d){a.util.truncate_text(g,3)
}else{a.util.truncate_text(g,4)
}a.util.truncate_text(f,1)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){e()
});
if(c){$(document).on("GridDataLoad",function(){g=$("#topic-container .topic-hero-promo-space .description");
f=$("#topic-container .topic-hero-promo-space .topic-headline");
e()
})
}e()
})
});
tccc.initComponent(".topic-hero-category-callout",["tccc"],function(b,a){b.each(function(){var g=$(this),f=g.find(".topicCategorySummaryText"),c=g.find(".horizontalLayout a img"),e=a.global.sizes.current_size;
function d(){if(a.global.sizes.current_size===a.global.sizes.BIG_DESKTOP||a.global.sizes.current_size===a.global.sizes.DESKTOP){$(".horizontalLayout img").css("border-right","none");
$(".topic-hero-category-callout a img").css("border","none")
}f.removeAttr("style");
f=f.has(":visible");
a.util.truncate_text(f,6)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){d()
});
$(document).on("GridDataLoaded",function(){d()
});
d()
})
});
tccc.initComponent(".topic-category-callouts",[],function(b,a){b.each(function(){var e=$(this),d=e.find("h3");
function c(){if(a.global.sizes.current_size!==a.global.sizes.MOBILE){a.util.truncate_text(d,2)
}else{a.util.truncate_text(d,3)
}}if($(".home-page").length<0){c()
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if($(".home-page").length<0){c()
}})
})
});
tccc.initComponent(".view-by-topics-tags",["select2"],function(b,a){b.each(function(){var e=$(this),c=e.find("select"),g=e.find(".submit.button"),d=e.closest(".topics-calendar, .press-release").data("url"),f=false;
c.select2();
c.on("change",function(k){k.preventDefault();
var j=e.find("select.topic").val(),h=e.find("select.tag").val();
if(j!==undefined&&j!==""){f=true;
d+=".topic."+j
}if(h!==undefined&&h!==""){f=true;
d+=".tag."+h
}});
g.on("click",function(h){if(!($(this).parents(".grid").find(".column-left .cloud-library-grid").length)){h.preventDefault();
if(f){window.location=d+".html"
}}})
})
});
tccc.initComponent(".topics-calendar",["glDatePicker"],function(d,a){function b(e){return new Date(e.getTime()+e.getTimezoneOffset()*60000)
}window.adjustDate=b;
function c(g){var e,f;
if(_.isString(g)){f={};
_.each(g.split(";"),function(h){var j=h.split("_");
if(j.length>=2){if(!f.selectableDateRange){f.selectableDateRange=[]
}f.selectableDateRange.push({from:b(new Date(j[0])),to:b(new Date(j[1]))})
}else{if(!f.selectableDates){f.selectableDates=[]
}f.selectableDates.push({date:b(new Date(j[0]))})
}})
}return f
}d.each(function(){var h=$(this),k=c(h.data("dates")),f=h.data("selected")?new Date(h.data("selected").split("-")[0],h.data("selected").split("-")[1],0):new Date(),j=k||{selectableDOW:[1,2,3,4,5],dowNames:["S","M","T","W","T","F","S"],prevArrow:"«",nextArrow:"»",selectableDateRange:[{from:h.data("selected")?new Date(h.data("selected").split("-")[0],h.data("selected").split("-")[1]-1,1):new Date(0,0,1),to:f>new Date()?new Date():f}]};
var g=h.find(".date_input").glDatePicker(_.extend(j,{showAlways:true,endDate:new Date(),selectedDate:h.data("selected")?new Date(h.data("selected").split("-")[0],h.data("selected").split("-")[1]-1,h.data("selected").split("-")[2]):undefined,onClick:function(n,l,m){},onChange:function(l){var n=l.getMonth(),m=l.getFullYear();
e(n,m)
}})).glDatePicker(true);
var e=function(n,m){var l=new Date(m,n+1,0)>new Date()?new Date():new Date(m,n+1,0);
g.options.selectableDateRange=[{from:new Date(m,n,1),to:l}];
g.render()
};
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){g.render()
})
})
});
tccc.initComponent(".cross-promo",["jqUI"],function(b,a){b.each(function(){var e=($(".lead-carousel").find(".item").length>=1),h=$(".media-container"),d=h.find(".item a"),g=$(this).find(".royalSlider"),c=h.find(".overlay-left-ie8"),f=h.find(".overlay-right-ie8");
if(e){h=g.royalSlider({keyboardNavEnabled:true,arrowsNav:true,controlNavigation:"none",loop:true,navigateByClick:false,arrowsNavAutoHide:false,autoScaleSlider:true,autoScaleSliderWidth:596,autoScaleSliderHeight:334,imageScalePadding:0}).data("royalSlider");
$(".rsArrowIcn").hover(function(){d.addClass("opacity-hover");
c.addClass("opacity-hover");
f.addClass("opacity-hover")
},function(){d.removeClass("opacity-hover");
c.removeClass("opacity-hover");
f.removeClass("opacity-hover")
})
}})
});
tccc.initComponent(".ThreeColumnLayout",[],function(b,a){b.each(function(){if(!$(".enableGreyBackground").length>0){$("section.three-column-layout").css("border","1px solid transparent")
}})
});
$(document).ready(function(){$(".subNav .ordering li").on("click",function(){if($(this).attr("class")!="dropdown"){$(".subNav .ordering li").each(function(){$(this).removeClass("active")
});
$(this).addClass("active");
$.ajax({url:$(".subNav").attr("data-url")+"/ugc-snapshots-gallery/15/0.html?sortorder="+$(this).index()+"&province="+$(".dropdown select").val()}).done(function(a){$(".submissionsnapshots .container").html(a);
if(window.location.pathname.indexOf("/content/journey/cn/zh/")==-1){$(".submissionsnapshots .container a").each(function(){$(this).attr("href",$(this).attr("href").replace("/content/journey/cn/zh/","/"))
})
}})
}});
$(".dropdown select").on("change",function(){$(".subNav .ordering li").each(function(){if($(this).hasClass("active")){$(this).click()
}})
})
});
tccc.initComponent(".sub-navigations",[],function(b,a){setTimeout(function(){if($(".cq-wcm-edit").size()>0){b.each(function(){function g(n,m){var e=$(n).offset();
if(e.left<(m.left-50)||e.left>m.right){$(n).css("visibility","hidden")
}else{$(n).css("visibility","visible")
}}try{var j=$(this).find(".DynamicParsys_container").offset(),f=$(this).find("li.thumb_wrapper"),d=35+((f.size())*210),c=$(this).find(".callouts-container"),l,h=[];
j.right=j.left+900;
c.css("width",d+"px");
f.on("DOMNodeInserted",'div[class*="placeholder"]',function(){var e="."+$(this).attr("class").replace("placeholder","element");
h.push(e);
setTimeout(function(){g(e,j)
},1000)
});
$(this).find(".DynamicParsys_container").scroll(function(){clearTimeout(l);
l=setTimeout(function(){$(h).each(function(e,m){g(m,j)
})
},1000)
})
}catch(k){console.log(k)
}})
}},500)
});
tccc.initComponent(".sub-navigations",["subNav"],function(c,b,a){c.each(function(){a.Top.init();
a.Bottom.init();
$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(d,e){a.Top.init();
a.Bottom.init()
})
})
});
tccc.initComponent(".story-uploader",["tcccForm","selectBoxIt"],function(d,c,b,a){d.each(function(){var g=$(this),j=g.find(".js-month-selectbox"),h=g.find(".js-day-selectbox"),e=g.find(".js-year-selectbox");
var f={lang:c.global.lang,theme:"red"};
b.init();
b.text();
b.textarea();
b.dateOfBirth();
b.images();
b.termsAndConditions();
b.captcha();
b.validate.email();
j.selectBoxIt(c.global.selectBoxItOptions);
h.selectBoxIt(c.global.selectBoxItOptions);
e.selectBoxIt(c.global.selectBoxItOptions);
if(c.global.sizes.current_size===c.global.sizes.MOBILE){j.on("click mousedown",function(k){k.preventDefault()
});
h.on("click mousedown",function(k){k.preventDefault()
});
e.on("click mousedown",function(k){k.preventDefault()
})
}})
});
tccc.initComponent(".story-content-well",[],function(b,a){b.each(function(){var j=$(this),e=j.find(".tcc-wp"),h=j.find("#load-more-stories-button"),d=b.data("stories-url"),g,c=j.data("stories-limit"),f=j.data("stories-offset");
h.on("click",function(){$.ajax({url:d+"/"+f+"/"+c+".html"}).done(function(k){e.append(k);
g=e.find(".tcc-related-data");
f=g.data("stories-offset");
c=g.data("stories-limit");
if(!g.data("stories-load-more")){h.addClass("hidden")
}g.remove()
})
})
})
});
tccc.initComponent(".stock-ticker",[],function(b,a){b.each(function(){var d=$(this);
(function(){StockTicker=function(){this.price="";
this.delta="";
this.direction="";
this.url=d.data("url")
};
StockTicker.prototype={constructor:StockTicker,getData:function(){$.ajax({method:"get",datatype:"json",cache:"false",url:this.url,success:function(f){if((f!==null)&&(f!==undefined)&&(f!=="")){var e=f;
this.price=e.price!==undefined?e.price:"";
this.delta=e.delta!==undefined?e.delta:"";
this.direction=e.trend;
d.find(".price").text("$"+this.price);
if(this.direction){$(".delta").html(this.delta+' <span class="icon-chevron icon-sort-'+this.direction+'"></span></div>')
}else{$(".delta").html(this.delta+"</div>")
}$(".delta").removeClass("up");
$(".delta").removeClass("down");
$(".delta").addClass(this.direction)
}else{d.find(".price").text("$")
}},error:function(){d.find(".price").text("$")
}})
}}
})();
var c=new StockTicker();
c.getData();
setInterval(function(){c.getData()
},600000)
})
});
tccc.initComponent(".spotify-module",[],function(b,a){b.each(function(){var g=$(this);
var d=g.find(".iframe-wrapper").data("spotify-src");
var f=a.global.get_OptanonCookiePrefrence();
if((!($.isEmptyObject(f)))&&(f.functionalityCookieActive)||(f.allCookiesAllowed)){var c=document.createElement("iframe");
c.setAttribute("src",d);
c.setAttribute("id","00000140-9727-d9c5-ad70-df3f998b0000");
c.style.width="640px";
c.style.height="480px";
$(".iframe-wrapper").append(c);
$(".iframe-wrapper iframe").addClass("spotify-widget")
}else{if($.isEmptyObject(f)){var c=document.createElement("iframe");
c.setAttribute("src",d);
c.setAttribute("id","00000140-9727-d9c5-ad70-df3f998b0000");
c.style.width="640px";
c.style.height="480px";
$(".iframe-wrapper").append(c);
$(".iframe-wrapper iframe").addClass("spotify-widget")
}}function e(h){var l=g.find(".spotify-widget"),k={bigdesktop:{width:"310px",height:"380px"},desktop:{width:"310px",height:"380px"},tablet:{width:"250px",height:"auto"},mobile:{width:"310px",height:"auto"}},j=k[h];
l.attr("width",j.width).attr("height",j.height).attr("src",l.attr("src"))
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(j,h){e(h.current_size);
a.util.truncate_text(".spotify-module > h2",1)
})
})
});
tccc.initComponent("#social-stats",[],function(b,a){b.each(function(){var e=$(this);
var c=$(this).find(".container").attr("data-social-count-service-url"),d=$(this).find(".container").attr("data-social-count-request");
if(!(e.hasClass("no-count"))){$.ajax({url:c,type:"POST",data:d,dataType:"json",success:function(g,h,f){$("#social-stats .container > div").each(function(j){if(g.socialNetworks){var k=(g.socialNetworks[j].count).toLocaleString();
$(this).find(".text-wrapper .value").text(k)
}})
},error:function(f,h,g){}})
}})
});
if(window.tccc!==undefined){tccc.initComponent(".smart-slideshow",[],function(b,a){b.each(function(){var g=($(".lead-carousel").find(".item").length>1),k=$(".media-container"),d=k.find(".item a"),j=$(this).find(".royalSlider"),c=k.find(".overlay-left-ie8"),h=k.find(".overlay-right-ie8"),e;
function f(){if(a.global.sizes.current_size===a.global.sizes.MOBILE){a.util.truncate_text(".smart-slideshow .media-caption p.caption-description",1);
a.util.truncate_text(".smart-slideshow .media-caption p.title-description",2)
}else{a.util.truncate_text(".smart-slideshow .media-caption p.caption-description",2)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if(a.global.sizes.current_size===a.global.sizes.MOBILE){a.util.truncate_text(".smart-slideshow .media-caption p.caption-description",1);
a.util.truncate_text(".smart-slideshow .media-caption p.title-description",2)
}else{a.util.truncate_text(".smart-slideshow .media-caption p.caption-description",2)
}})
}$(window).load(function(){if(g){$(".smart-slideshow .lead-carousel").css("visibility","visible");
k=j.royalSlider({keyboardNavEnabled:true,arrowsNav:true,controlNavigation:"none",loop:true,arrowsNavAutoHide:false,autoScaleSlider:true,imageScaleMode:"fill",imageScalePadding:0,fadeinLoadedSlide:false}).data("royalSlider");
k.ev.on("rsAfterContentSet",function(l){j.addClass("rsLoaded");
f()
});
$(".rsArrowIcn").hover(function(){d.addClass("opacity-hover");
c.addClass("opacity-hover");
h.addClass("opacity-hover")
},function(){d.removeClass("opacity-hover");
c.removeClass("opacity-hover");
h.removeClass("opacity-hover")
})
}else{k.find(".lead-carousel").css("visibility","visible")
}});
$(".x-btn-mc").click(function(){$(".media-caption").css("position","absolute")
});
f()
})
})
}tccc.initComponent(".simple-list",[],function(b,a){b.each(function(){var d=b.find(".title");
function c(){a.util.truncate_text(d,3)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){c()
});
c()
})
});
tccc.initComponent(".sharebar",["jqSmoothScroll","loadGigya","kakao"],function(d,c,a,b){d.each(function(){var t=$(this),p=t.find(".shareBar-list"),j=p.find(".social-share"),B=t.data("content-url"),A=p.data("contentid"),H=t.data("twitter-global-text"),E=t.data("plus-button-social-network"),s=t.attr("data-short-title"),J=$("html").attr("lang"),K=null,w,e,Q=t.data("kakao-key"),z=t.find("ul"),O=t.data("sharebar-label"),P={withShareCountAPI:[],withoutShareCountAPI:[]},I=c.global.get_OptanonCookiePrefrence();
if(typeof s!=="undefined"){s=s.replace(/[{}]/g,"");
s=s.replace(/[<]nobr[^>]*[>]/gi,"");
s=s.replace(/[<]\/nobr[^>]*[>]/gi,"")
}if(c.global.current_size==="mobile"&&c.global.browser.isAndroid&&t.find("li.whatsapp").length){var v=t.find("li.whatsapp");
var h=z.find("li").index(v);
v.remove();
var o='<li class="social-share whatsapp"><a class="icon" href="whatsapp://send/?text='+encodeURIComponent(s.replace(/["]/g,"'"))+"%20"+encodeURIComponent(C())+'"></a></li>';
if(h>1){var D=z.find("li:nth-child("+(h)+")");
$(o).insertAfter(D)
}else{var q=z.find("li:nth-child(1)");
$(o).insertBefore(q)
}}$(t.find("li.viber")).each(function(T){var Y=$(this);
var V=z.find("li").index(Y);
var R=Y.data("display-type");
var S=x(R);
Y.remove();
var X='<li class=" viber '+S+'" data-display-type="'+S+'"><a class="icon" href="viber://forward?text='+O+"%20"+encodeURIComponent(C())+'"></a></li>';
if(V>0){var U=z.find("li:nth-child("+(V)+")");
$(X).insertAfter(U)
}else{var W=z.find("li:nth-child(1)");
$(X).insertBefore(W)
}});
if(t.find("li.lineit").length){var g=t.find("li.lineit");
var f=z.find("li").index(g);
var L=g.data("display-type");
g.remove();
var l='<li class="social-share lineit" data-display-type="'+L+'"><a class="icon" href="//line.naver.jp/R/msg/text/?'+encodeURIComponent(s.replace(/["]/g,"'"))+"%20"+encodeURIComponent(C())+'"></a></li>';
if(f>1){var D=z.find("li:nth-child("+(f)+")");
$(l).insertAfter(D)
}else{var q=z.find("li:nth-child(1)");
$(l).insertBefore(q)
}}var M=t.find("li.kakao");
if(M.length){var G=z.find("li").index(M);
M.remove();
if(typeof Kakao!=="undefined"){var r=M.data("display-type")||"";
var y="<li class='social-share kakao' data-display-type='"+r+"'><a class='icon' href='javascript:;' id='kakao'></a></li>";
if(G>1){var D=z.find("li:nth-child("+(G)+")");
$(y).insertAfter(D)
}else{var q=z.find("li:nth-child(1)");
$(y).insertBefore(q)
}Kakao.init(Q);
Kakao.Link.createDefaultButton({container:"#kakao",objectType:"feed",content:{title:s,description:s,imageUrl:n(),link:{mobileWebUrl:C(),webUrl:C()}},buttons:[{title:s,link:{mobileWebUrl:C(),webUrl:C()}}]})
}}if(c.global.disable_sharebar){return null
}d.find("li a.print").click(function(R){window.print();
return false
});
j=p.find(".social-share");
$.each(j,function(){if($(this).data("with-count")){if($(this).data("provider")){P.withShareCountAPI.push($(this).data("provider"))
}}else{if($(this).data("provider")){P.withoutShareCountAPI.push($(this).data("provider"))
}}var S=$(this).data("display-type");
var R="";
if(S==="mobile"){R="mobileOnly"
}if(S==="desktop"){R="desktopOnly"
}$(this).addClass(R)
});
function n(){var S=document.getElementsByTagName("meta");
for(var R=0;
R<S.length;
R++){if(S[R].getAttribute("property")=="og:image"){return S[R].getAttribute("content")
}}return""
}function C(){var S=window.location;
var R=S.pathname.substring(0,S.pathname.length+1);
return S.href.substring(0,S.href.length-((S.pathname+S.search+S.hash).length-R.length))
}function u(R){_.each(P.withoutShareCountAPI,function(S){p.find("."+S+" .count").addClass("no-share-count")
});
if(R.errorCode===0){_.each(P.withShareCountAPI,function(T){var S=c.util.humanize_number(R.shareCounts[T],0)||0;
p.find("."+T+" .count").html(S)
})
}else{p.find(".count").addClass("no-share-count")
}}function m(){K=new gigya.socialize.UserAction();
K.setTitle(e.title);
K.setDescription(e.description);
K.setLinkBack(e.url);
w.userAction=K;
if(J=="zh-HK"){w.lang=J
}jQuery.extend(w,e);
gigya.socialize.showShareBarUI(w)
}function N(){if(typeof CQ==="undefined"){e={url:C(),title:$("meta[property=og\\:title]").attr("content"),description:$("meta[property=og\\:description]").attr("content"),thumbnailURL:$("meta[property=og\\:image]").attr("content"),shortURLs:"never"}
}}function F(R,S){if(window.dinamicLoad){N();
m()
}var T=S.data("provider");
if(T==="twitter"){e.title=s+" "+H
}else{}if(T!==undefined){if(A!==undefined&&A.length>0){$.ajax({url:B+A,async:false,success:function(V){V=$.parseJSON(V);
e.url=V.url
}})
}if(T!=="email"){R.preventDefault();
var U={provider:T};
$.extend(U,e);
gigya.socialize.postBookmark(U)
}}else{if(S.find(".comment")){$.smoothScroll({easing:"swing",speed:700,scrollTarget:$.find(".comment-box")})
}}}function k(){$("#linktoBeshared").val(window.location.href);
N();
p.find('.social-share[data-provider!="newsletter"]').each(function(){$(this).on("click",function(W){var R=$(W.target);
var S=R.parents(".social-share");
if(!S.hasClass("more")){F(W,$(this))
}else{var T=new gigya.socialize.UserAction();
T.setTitle(e.title);
T.setDescription(e.description);
T.setLinkBack(e.url);
var V={userAction:T,showMoreButton:true,moreEnabledProviders:E,operationMode:"simpleShare",snapToElementID:"gigya-sharebar"};
gigya.socialize.showShareUI(V)
}try{ga("send","event","Sharing Events","Shared","Sharing-With-"+this.attributes["data-provider"].value)
}catch(U){}})
});
$(".urlshare").click(function(){$(".tooltiptext").hide();
$("#linktoBeshared").value=location.href;
Clipboard.copy(location.href)
});
$(".urlshare").hover(function(){$(".tooltiptext").show()
});
gigya.socialize.getProviderShareCounts({enabledProviders:P.withShareCountAPI.toString(),callback:u});
window.dinamicLoad=false
}w={userAction:null,containerID:"gigya-sharebar",shareButtons:[{provider:"email",iconOnly:false},{provider:"share",iconOnly:true,iconImgUp:"../../../../../../etc/designs/journey/main/images/transparent-pixels.png",emailBody:"Hi,<br /><br />$userMsglt;br /><br />I thought you'd like this:<br />$URLlt;br /><br /><br /><br />"}],buttonTemplate:'<a class="gigya-sharebar-button" data-provider="$text" href="#" onclick="$onClick"></a>',moreEnabledProviders:E};
if((!($.isEmptyObject(I)))&&(I.functionalityCookieActive)||(I.allCookiesAllowed)){if(c.global.gigya_api_key===null){c.global.gigya_api_key=$("html").data("gigya-api")
}b.init(c.global.gigya_api_key,function(){k()
})
}else{if($.isEmptyObject(I)){if(c.global.gigya_api_key===null){c.global.gigya_api_key=$("html").data("gigya-api")
}b.init(c.global.gigya_api_key,function(){k()
})
}}window.Clipboard=(function(W,X,Y){var T,S;
function V(){return Y.userAgent.match(/ipad|iphone/i)
}function R(aa){T=X.createElement("textArea");
T.value=aa;
X.body.appendChild(T)
}function Z(){var aa,ab;
if(V()){aa=X.createRange();
aa.selectNodeContents(T);
ab=W.getSelection();
ab.removeAllRanges();
ab.addRange(aa);
T.setSelectionRange(0,999999)
}else{T.select()
}}function U(){X.execCommand("copy");
X.body.removeChild(T);
$(".confirmationText").show();
$(".confirmationText").fadeOut(5000)
}S=function(aa){R(aa);
Z();
U()
};
return{copy:S}
})(window,document,navigator);
function x(R){var S="";
if(R==="mobile"){S="mobileOnly"
}if(R==="desktop"){S="desktopOnly"
}if(!((R==="mobile")||(R==="desktop"))){S="all"
}return S
}})
});
tccc.initComponent(".search-result",[],function(a){a.each(function(){var k=$(this),j=k.find(".total-pages").text(),h=k.find(".entries-result"),b=h.data("url"),m=h.data("query"),d=k.find(".results-quantity").data("limit"),e=k.find(".side-navigation-colum.left"),l=k.find(".side-navigation-colum.right"),n=parseInt($.trim(k.find(".total-entries-returned").text()),10),g=n-d;
firstTotal=n-g,secondTotal=firstTotal-(d-1),clickCounter=1,html=$("html");
if(html.hasClass("mobile")){tccc.util.truncate_text(".search-result .heading-xlarge span",1)
}$(tccc.global).bind(tccc.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(o,p){if(p.current_size===tccc.global.sizes.MOBILE){tccc.util.truncate_text(".search-result .heading-xlarge span",1)
}});
$(document).ready(function(){if($.trim($(".entries-result li:first-child .entry-content .entry-headline").children().html())===""){$(".entries-result li:first-child").css("display","none");
$(".entries-result .topicListWrapper li:first-child").css("display","block")
}else{$(".entries-result li:first-child").css("display","block")
}});
function c(){$.ajax({method:"get",dataType:"html",cache:"false",url:b+"?page="+clickCounter+"&"+m+"&limit="+d,async:false,success:function(o){window.scrollTo(0,0);
h.append(o).fadeIn("slow")
}})
}function f(){if(n>d){k.find(".entries-per-page").text(secondTotal+" - "+firstTotal);
secondTotal=parseInt(firstTotal,10)+1;
firstTotal+=d;
if(firstTotal>n){firstTotal=n
}}else{if(n===0){k.find(".entries-per-page").text("0 - 0")
}else{if(n<=d){k.find(".entries-per-page").text(secondTotal+" - "+n)
}}}}k.find(".side-navigation-colum.right").on("click",function(){clickCounter++;
if(clickCounter+1>j){l.addClass("disabled");
l.removeClass("enabled")
}if(clickCounter<=j){e.removeClass("disabled");
e.addClass("enabled");
k.find(".current-page").html(clickCounter);
h.attr("data-page",clickCounter);
h.find(".entry").remove();
if(clickCounter>=2){c();
f()
}}else{clickCounter=j
}});
k.find(".side-navigation-colum.left").on("click",function(){clickCounter--;
if(clickCounter-1===0){e.addClass("disabled");
e.removeClass("enabled")
}if(clickCounter>0){l.removeClass("disabled");
l.addClass("enabled");
k.find(".current-page").html(clickCounter);
h.attr("data-page",clickCounter);
h.find(".entry").remove();
if(clickCounter>=1){c();
if(firstTotal>=d){firstTotal=clickCounter*d;
secondTotal=parseInt(firstTotal-d,10)+1
}else{firstTotal=d;
secondTotal=1
}f()
}}else{clickCounter=1
}});
f()
})
});
tccc.initComponent(".search-results-box",["bootstrapTypeahead"],function(c,a,b){c.each(function(){var e=$(this),f={delay:200,results:6,charLengthTrigger:2,url:e.data("url"),indexname:e.data("index-name"),admintemplate:e.data("admintemplate-search")},d=e.find(".search-query-field"),h=e.find("#search");
function g(){h.submit()
}h.bind("submit",function(){var j=d.val();
if(j){h.val(j)
}});
d.typeahead({items:f.results,val:"suggestion",itemSelected:g,ajax:{method:"get",url:f.url+"?indexName="+f.indexname+"&isAdminTemplate="+f.admintemplate+"&_charset_=utf-8",timeout:f.delay,triggerLength:f.charLengthTrigger,success:function(j){}}})
})
});
tccc.initComponent(".search-box",["bootstrapTypeahead"],function(c,a,b){c.each(function(){var f=$(this),g={delay:200,results:6,charLengthTrigger:2,url:f.data("url"),indexname:f.data("index-name"),admintemplate:f.data("admintemplate-search")},e=f.find(".search-query-field"),j=f.find("#search");
var d=$("#global-banner .container").height();
function h(){j.submit()
}j.bind("submit",function(){var k=e.val();
if(k){j.val(k)
}});
if(typeof e.typeahead==="function"){e.typeahead({items:g.results,val:"suggestion",ajax:{url:g.url,method:"get",timeout:g.delay,triggerLength:g.charLengthTrigger,preDispatch:function(k){return{q:$.trim(k),indexName:g.indexname,isAdminTemplate:g.admintemplate,_charset_:"utf-8"}
}}})
}})
});
$(document).ready(function(){var c=($("html").attr("lang")).toLowerCase();
var a="zh-cn";
if(c===a){var b=$(window).width();
if(b<500){$(".related-assets li").each(function(f,h){var g=$($(".related-assets li").eq(f).find("a>span")[0]).text();
if(g.length>20){var e=20;
g=g.substring(0,e-1)+"...";
var d=g;
$($(".related-assets li").eq(f).find("a>span")[0]).text(d)
}})
}}});
tccc.initComponent(".regional-interstitial-component",["tccc"],function(b,a){var c=$("#isPublishModeRegInterstitialComponent").val();
$(function(){$("#selectCountry").change(function(){defaultPagePath=$(this).find(":selected").attr("data-default-page-path");
if(c==="true"){relocatePath=splitCurrentPagePath(defaultPagePath)
}else{relocatePath=defaultPagePath
}window.location=relocatePath
})
})
});
tccc.initComponent(".recirculator",["flyInWidget"],function(c,a,d){var b=d;
b.init({$targetEl:$(".recirculator"),$triggerEl:$(".RecommendedTab.section"),$contentLinkEl:$(".recirculator .js-content-link"),triggerOffsetY:250})
});
tccc.initComponent(".recommended-list",[],function(b,a){b.each(function(){var f=b.find(".title"),c=b.find(".description p"),d=$("#topic-container").length>0;
function e(){a.util.truncate_text(f,3);
a.util.truncate_text(c,3)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){e()
});
if(d){$(document).on("GridDataLoad",function(){f=$("#topic-container .recommended-list .title");
c=$("#topic-container .recommended-list .description p");
e()
})
}e()
})
});
define("recipeTemplate",["handlebars"],function(){return{recipeItem:function(b){var a=Handlebars.compile('<li>{{#if image.desktop}}<a class="" href="{{url}}"><img alt="{{{image.altText}}}" src="{{{image.desktop}}}" data-src=\'{"desktop":"{{{image.desktop}}}", "tablet":"{{{image.tablet}}}", "mobile":"{{{image.mobile}}}"}\' /></a>{{/if}}<p class="theme-font-title"><a class="" href="{{url}}"><span data-title=\'{"desktop":"{{{title.desktop}}}", "tablet":"{{{title.tablet}}}", "mobile":"{{{title.mobile}}}"}\'>{{{title.desktop}}}</span></a></p><p class="theme-font-secondary summary hidden-phone">{{{summary}}}</p></li>');
return a(b)
}}
});
tccc.initComponent(".m-f-recipe-directory",["recipeTemplate","selectBoxIt"],function(c,a,b){c.each(function(){var j=$(this),k=j.find(".mobile-collapse"),w=j.find(".recipe-menu"),t=j.find(".recipe-search"),d=t.find("#recipes-search-input"),v=t.find("#recipes-search-button"),n=w.find("li.menu-item"),q=j.find(".recipes-info"),r=q.find("#load-more-button"),h=q.find("ul.recipes-details"),y=q.find("span.counter"),l=q.find("span.current-topic"),f=q.find("span.search-query"),g=q.find("select.selectboxit"),p=j.data("default-category")?j.data("default-category"):"all",o,u;
var s={url:h.data("ajax-url"),itemIndex:p,sort:"recency",initialLimit:h.data("initial-count"),offset:h.data("initial-offset"),limit:h.data("loadmore-limit"),keyword:"all",displyText:"",loadMore:true};
var x=function(z){$.when($.getJSON(s.url+"/"+s.itemIndex+"/"+s.sort+"/"+s.initialLimit+"/"+s.offset+"/"+s.limit+"/"+s.keyword+".json")).done(function(B){var A="";
s.loadMore=B.loadMore;
s.offset=B.offset;
s.limit=B.limit;
if(B.loadMore){r.parent().removeClass("hidden")
}else{r.parent().addClass("hidden")
}_.each(B.contents,function(C){A+=b.recipeItem(C)
});
y.text(B.total_count);
l.text(s.displyText);
if(z){h.append($(A))
}else{h.html("");
h.empty();
h.append($(A));
setTimeout(function(){h.toggleClass("fade-out fade-in");
r.toggleClass("fade-out fade-in")
},600)
}o=h.find("p.theme-font-title span");
u=h.find("p.summary");
e()
})
};
var m=function(z){if(!z){s.sort="recency"
}s.initialLimit=h.data("initial-count");
s.offset=h.data("initial-offset");
s.limit=h.data("loadmore-limit");
s.keyword="all";
s.loadMore=true;
f.parent().addClass("hidden")
};
var e=function(){a.util.truncate_text(o,1);
a.util.truncate_text(u,3)
};
$(document).click(function(){$(".selectboxit").removeClass("selectboxit-open");
$(".selectboxit-options").hide()
});
$(document).on("click",".selectboxit-container",function(z){z.stopPropagation()
});
v.on("click",function(A){A.preventDefault();
h.toggleClass("fade-out fade-in");
r.toggleClass("fade-out fade-in");
m(false);
s.keyword=d.val();
var z='"'+d.val()+'"';
if(d.val()){f.text(z);
f.parent().removeClass("hidden")
}x(false)
});
n.on("click","a",function(z){z.preventDefault();
if(!$(this).closest("li").hasClass("selected")){$(this).closest("li").siblings().removeClass("selected").end().toggleClass("selected",true).focus();
h.toggleClass("fade-out fade-in");
r.toggleClass("fade-out fade-in");
s.itemIndex=$(this).data("item-index");
s.displyText=$(this).text();
m(false);
x(false)
}return
});
r.on("click",function(z){z.preventDefault();
x(true);
$("html, body").animate({scrollTop:$(this).offset().top-30},600)
});
k.on("click","a",function(z){z.preventDefault();
$(this).toggleClass("collapsed");
if($(this).hasClass("collapsed")){n.closest(".selected").siblings().addClass("hidden");
$(this).find("i").removeClass("icon-angle-up").addClass("icon-angle-down")
}else{n.removeClass("hidden");
$(this).find("i").removeClass("icon-angle-down").addClass("icon-angle-up")
}});
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){e()
});
x(false)
})
});
define("promoSlideshow",[],function(){return{slider:null,init:function(d,a,e,c){var b={arrowsNav:true,arrowsNavAutoHide:false,autoCenter:true,autoHeight:true,autoScaleSlider:true,controlNavigation:a,controlsInside:true,fadeinLoadedSlide:false,globalCaption:false,imageAlignCenter:false,imageScaleMode:"none",imageScalePadding:0,keyboardNavEnabled:false,loop:true,loopRewind:true,navigateByClick:true,numImagesToPreload:2,sliderDrag:false,slidesSpacing:0,autoPlay:{delay:+e,enabled:c,pauseOnHover:true}};
$(window).load(function(){this.slider=d.royalSlider(b).data("royalSlider")
})
}}
});
tccc.initComponent(".promo-space",["promoSlideshow"],function(c,a,b){c.each(function(){var d=$(this).find(".media-container .royalSlider .rsContent .media-caption .content-bounds .title-description");
var g=$(this).find(".media-container .royalSlider .rsContent .media-caption .content-bounds .caption-description");
function f(){a.util.truncate_text(d,2);
a.util.truncate_text(g,1)
}f();
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){f()
});
if($(this).find(".rsContent").length>1){var e="none";
if($(".packages-and-verticals-template").length<1){e="bullets"
}b.init($(this).find(".rsPromoStyle"),e,7000,$(this).attr("data-auto-play"))
}})
});
tccc.initComponent(".profiles-container",["handlebars"],function(d,a){var b=Handlebars.compile($("#profiles-template").html()),c=$(".profiles-container").attr("path");
d.each(function(){var g=$(this),h=g.find(".content-list"),j=g.find("#load-more-button"),f=0,k,e;
if(j.length){j.on("click",function(l){if(f===0){k=g.attr("offset");
e=h.find("> li.content-list-item").length
}else{k=f
}l.preventDefault();
$.getJSON(c+"/"+k+"/"+g.attr("max")+"/"+e+"/"+g.attr("limit")+g.attr("data-node")+".json").done(function(n){var m="";
f=n.offset;
e=n.show;
if(n&&n.profiles){_.each(n.profiles,function(o){m+=b(o)
});
h.append(m);
a.global.update_images_for_size(a.global.sizes.current_size,h.find("img[data-src]"));
if(n.hasMore!==true){g.find("#load-more-button").hide()
}}}).fail(function(m){console.warn("Could not load Profiles. Error message: ",m)
})
})
}})
});
if($(".cq-wcm-edit").size()<=0){tccc.initComponent(".m-profile-callouts",[],function(b,a){b.each(function(){var h=$(this),d=h.find("ul.profiles"),g=h.find("ul.royalSlider"),m=d.find("p.profile-description"),f,c,k;
var j=function(){a.util.truncate_text(m,3)
};
var l=function(){f=d.clone().addClass("royalSlider rsDefault visible-phone").removeClass("hidden-phone").insertAfter(d).hide()
};
var e=function(){if(g.size()<=0){l();
g=h.find("ul.royalSlider")
}var n=setInterval(function(){if(document.readyState!=="complete"){return
}clearInterval(n);
f.show();
var o=g.royalSlider({autoScaleSlider:false,controlNavigation:"none",arrowsNavAutoHide:false,loop:true,sliderDrag:false,navigateByClick:false,sliderTouch:false}).data("royalSlider");
if(!g.height()>0){c=g.find("li");
g.css({height:c.height()})
}o.ev.on("rsAfterSlideChange",function(p){k=o.currSlide;
c=k.holder.find("li");
g.css({height:c.height()})
})
},50)
};
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){j();
if(a.global.sizes.current_size===a.global.sizes.MOBILE){e()
}});
if(a.global.sizes.current_size===a.global.sizes.MOBILE){e()
}j()
})
})
}tccc.initComponent(".press-release",[],function(b,a){b.each(function(){var d=$(this);
function c(){a.util.truncate_text(".grid-press-top .asides .PressRelease .arti-title span",2);
a.util.truncate_text("section.grid.grid-2-col.grid-press-top div.asides div.content-wrapper ul > li > span",2)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){c()
});
c();
d.find(".view-by-topics-tags .sbbtn").on("click",function(){var f=$(this).attr("href"),e=$(this).parent().find("select.topic").val();
if(e!==""){f+=".topic."+e
}f+=".html";
$(this).attr("href",f)
})
})
});
tccc.initComponent(".press-latest-stories",["selectBoxIt"],function(c,b,a){c.each(function(){var j=$(this),h=j.find("h2"),g=j.find("li a span"),f=j.find("#selectbox-for-rss-feeds"),e=j.find("#suscribe-button");
function d(){b.util.truncate_text(h,2);
if(b.global.current_size==="mobile"){b.util.truncate_text(g,5)
}}f.selectBoxIt(b.global.selectBoxItOptions).data("selectBoxIt");
f.on("change",function(){var k=e.data("base-url").replace(".xml","")+".topic."+$(this).val()+".xml";
e.attr("href",k)
});
$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){d()
});
d()
})
});
tccc.initComponent(".NutritionTable",[],function(b,a){b.each(function(){var z,j,g,x,e,l,c,q,m;
var f,d,v=false,s=false,y,n=$(".currentPage").data("current-pagepath"),k=$(".currentPage").attr("data-hideRDI"),p=$(".currentPage").attr("data-enable-uk-color"),t=$(".authorValues").find("div"),w,r=[];
k==="true"?k=true:k=false;
p==="true"?p=true:p=false;
y=$(".servingSize option:selected").val();
$(".NutritionTable .currentPage.hideDI").each(function(B,A){$(A).parent().addClass("hideDI")
});
$(".NutritionTable .currentPage.hideRDI").each(function(B,A){$(A).parent().addClass("hideRDI")
});
$(".servingSize option:first").attr("selected","selected");
$("h1.page-title").text($("span.shorten-breadcrumb").text());
$(".servingSize").attr("data-role","none");
$(".servingSize").attr("data-enhance","false");
for(var u=0;
u<t.length;
u++){w=$(t[u]).data();
r.push(w)
}function o(H){var G;
var C=[];
var E;
var F=$("#tab1 .servingSize option");
var A;
for(var D=0;
D<F.length;
D++){G=F[D];
for(var B=0;
B<H.length;
B++){E=H[B].sizelabel;
if((G.value==E)&&(H[B].ishidefromdefaultlist==true)){A=".servingSize option[value='"+E+"']";
$(A).remove()
}}}}o(r);
function h(A){if(!A){var B=$("#tab2 .row");
B.each(function(){this.removeAttribute("data-color-value")
})
}}$.ajax({type:"POST",url:"/bin/journey/containerSizeBasedNutritionInformation",data:{servingSize:y,currentPagePath:n},success:function(B){var A=B;
$.each(A,function(C,D){z=D.label;
j=D.diRdi;
g;
x;
e=D.nutritionValue;
l="data-"+z+"label";
c=$("div.currentPage").attr(l);
f=j.substr(j.length-3);
d=j.substr(j.length-2);
m=D.colorDiRdi;
if(f==="RDI"){j=j.slice(0,-3);
g=j+"%";
x="-";
s=true
}else{if(d==="DI"){j=j.slice(0,-2);
g="-";
x=j+"%";
v=true
}else{x="-";
g="-"
}}if(c){$("#tab1 .nutrition-fact").append('<div class="row" data-nutrition-label="'+z+'"><div class="fact-name '+z+'">'+c+'</div><div class="fact-percent">'+e+"</div></div>");
m=$.trim(m);
var E='<div class="row" data-nutrition-label="'+z+'" data-color-value= "'+m+'"><div class="fact-name '+z+'">'+c+'</div><div class="fact-percent isDI">'+x+"</div>";
if(!k){E=E+'<div class="fact-percent isRDI">'+g+"</div>"
}E=E+"</div>";
$("#tab2 .intake-fact").append(E);
h(p)
}});
if(s===false){$(".intake-fact .isRDI").css("visibility","hidden")
}if(v===false){$(".intake-fact .isDI").css("visibility","hidden")
}}});
$(".tabs .tab-links a").on("click",function(A){var B=jQuery(this).attr("href");
$(".tabs "+B).show().siblings().hide();
$(this).parent("li").addClass("active").siblings().removeClass("active");
A.preventDefault()
});
$(".servingSize").change(function(){var C=$(this).val();
var B=$(".currentPage").data("current-pagepath");
var A=$(this).parent().parent().attr("id");
if(A==="tab1"){$(".nutrition-fact").empty()
}else{if(A==="tab2"){$(".intake-fact").find(".row").not(".intakeHeader").remove()
}}$.ajax({type:"POST",url:"/bin/journey/containerSizeBasedNutritionInformation",data:{servingSize:C,currentPagePath:B},success:function(E){var D=E;
$.each(D,function(F,G){z=G.label;
j=G.diRdi;
g;
x;
e=G.nutritionValue;
l="data-"+z+"label";
c=$("div.currentPage").attr(l);
f=j.substr(j.length-3);
d=j.substr(j.length-2);
m=G.colorDiRdi;
if(f==="RDI"){j=j.slice(0,-3);
g=j+"%";
x="-";
s=true
}else{if(d==="DI"){j=j.slice(0,-2);
g="-";
x=j+"%";
v=true
}else{x="-";
g="-"
}}if(A=="tab1"){$("#tab1 .nutrition-fact").append('<div class="row" data-nutrition-label="'+z+'"><div class="fact-name '+z+'">'+c+'</div><div class="fact-percent">'+e+"</div></div>")
}else{m=$.trim(m);
var H='<div class="row" data-nutrition-label="'+z+'" data-color-value= "'+m+'"><div class="fact-name '+z+'">'+c+'</div><div class="fact-percent isDI">'+x+"</div>";
if(!k){H=H+'<div class="fact-percent isRDI">'+g+"</div>"
}H=H+"</div>";
$("#tab2 .intake-fact").append(H);
h(p)
}});
if(s===false){$(".intake-fact .isRDI").css("visibility","hidden")
}if(v===false){$(".intake-fact .isDI").css("visibility","hidden")
}}})
});
$(".tab-content a").wrap("<span class='theme-secondary-link'></span>");
$(".tab-content a").css("text-decoration","underline")
})
});
tccc.initComponent(".NutritionCompareTool",["iScroll"],function(b,a){b.each(function(){var C=$(this);
var O;
var m;
var H;
var y=$("html."+q+" .slide-product:visible").length;
var q="";
var M=15;
var s=10;
var n=4;
var P;
var c="left";
var L=$(".nutrition-table-label-id-value-mapping").attr("data-preselectedleftid");
var I=$(".nutrition-table-label-id-value-mapping").attr("data-preselectedrightid");
var l=(I!=="");
var p=(L!=="");
var j=$(".product.display-right");
var K=$(".product.display-left");
var v=$(".wrapperCarousel");
var N=$(".nutrition-table-label-id-value-mapping").attr("data-hidecategoryfilter");
var E=$(".slide-product.isHidden");
var h=function(){$(".product-container").css("display","table")
};
function x(){return(!$(".wrapperCarousel").hasClass("containingHiddenSlides"))
}function J(){var R=true;
$(E).each(function(){console.log($(".slide-product.isHidden").siblings(":not(.isHidden)").length);
if($(E).siblings(":not(.isHidden)").length>0){R=false;
return
}});
return R
}function B(){if(x()){if((L.length>0)||(I.length>0)){if($("html").hasClass("mobile")){$(".product-container").css("display","none");
$(".mobile-info-selector").css("display","block")
}else{h()
}F(L,I)
}else{if($("html").hasClass("mobile")){$(".mobile-info-selector").css("display","block")
}else{h()
}}}else{if(!J()){if($("html").hasClass("mobile")){alert("has mobile");
$(".mobile-info-selector").css("display","block")
}else{h()
}console.log("carousel is hiding and product with hidden class has siblings selected from carousel");
$(v).removeClass("containingHiddenSlides");
A();
F(L,I)
}else{if((L.length>0)&&(I.length>0)){h();
F(L,I)
}else{if((L.length>0)&&(I.length=="")){h();
j.remove();
F(L,I)
}else{h();
K.remove();
$(".product-container .product.display-right").find(".product-image").addClass("singleView");
F(L,I)
}}}}}var g=$(".nutrition-table-label-id-value-mapping").attr("data-hiderdi");
g==="true"?g=true:g=false;
if(g){$(".ingredient-recommended-intake").remove();
$(".isRDI").remove()
}var G=$(".slide-product");
var k=new iScroll(document.getElementsByClassName("product-comparison-carousel")[0],{snap:"li",vScroll:false,hScrollbar:false});
t();
var f=63;
$("div.scroller-right").click(function(){var S=k.x;
var R=0-(f*(y-P));
if(S<=R){k.scrollTo(0,0,100);
setTimeout(function(){k.refresh()
},0)
}else{var T=S-(f*P);
if(T<=R){T=R
}k.scrollTo(T,0,100);
setTimeout(function(){k.refresh()
},0)
}});
$("div.scroller-left").click(function(){var R=k.x;
if(R===0){var S=y-P;
k.scrollTo(0-(f*S),0,100);
setTimeout(function(){k.refresh()
},0)
}else{var T=R+(f*P);
k.scrollTo(T,0,100);
setTimeout(function(){k.refresh()
},0)
}});
function t(){if(a.global.sizes.current_size!==q){q=a.global.sizes.current_size;
if(q==="bigdesktop"){q="big_desktop"
}if(q==="mobile"){P=n
}else{if(q==="tablet"){P=s
}else{P=M
}}y=$("html."+q+" .slide-product:visible").length;
console.log("productShown",y)
}}t();
$(window).resize(t);
function z(S,T,R){$.ajax({type:"POST",url:"/bin/journey/containerSizeBasedNutritionInformation",data:{servingSize:T,currentPagePath:R},success:function(V){var U=V;
$.each(U,function(ab,Z){var X=Z.label;
var W=Z.diRdi;
var Y=Z.nutritionValue;
var ae;
var ah;
var ad=W.substr(W.length-2);
var aa=W.substr(W.length-3);
if(aa==="RDI"){W=W.slice(0,-3);
ae=W+"%";
ah="-"
}else{if(ad==="DI"){W=W.slice(0,-2);
ae="-";
ah=W+"%"
}else{ah="-";
ae="-"
}}var af="data-"+X+"Label";
var ag=$("div.nutrition-table-label-id-value-mapping").attr(af);
if(typeof ag!==undefined){if(!ag){ag=X.toProperCase()
}var ac='<div class="product-ingredients ingredient daily-intake nutrition" data-nutrition-label="'+X+'"><div class="ingredient-name '+X+'">'+ag+'</div><div class="ingredient-serving"><span class="serving-value">'+Y+'</span></div><div class="ingredient-daily-intake isDI"><span class="serving-value">'+ah+"</span></div>";
if(!g){ac=ac+'<div class="ingredient-recommended-intake isRDI"><span class="serving-intake">'+ae+"</span></div>"
}ac=ac+"</div>";
$(".product.display-"+S+" .product-ingredients-table").append(ac)
}});
e(S)
}});
$.ajax({type:"POST",url:"/bin/journey/getproductingredients",data:{productpath:R},success:function(U){$(".product.display-"+S+" .ingredient-description").empty().append('<b>Ingredients: </b><div class="activeIngredient">'+U.ingredients+"</div>")
}});
if($(".comparison-tab.ingredients-info").hasClass("active")){Q(S);
w(S)
}}$(".serving-qty").change(function(){var R;
if($("html").hasClass("mobile")){R=$(this).parent().parent().parent().parent().parent().data("current-product-path");
if($(this).parent().parent().parent().parent().hasClass("display-left")){lr="left";
m=$(this).val();
O=m
}else{lr="right";
H=$(this).val();
O=H
}}else{R=$(this).parent().parent().parent().parent().data("current-product-path");
if($(this).parent().parent().parent().parent().hasClass("display-left")){lr="left";
m=$(this).val();
O=m
}else{lr="right";
H=$(this).val();
O=H
}}$(".product.display-"+lr+" .product-ingredients-table .nutrition").remove();
z(lr,O,R)
});
function Q(R){$(".product.display-"+R+" .product-ingredients-table").hide();
$(".product.display-"+R+" .product-ingredients.header").hide()
}function D(R){$(".product.display-"+R+" .product-ingredients-table").show();
$(".product.display-"+R+" .product-ingredients.header").show()
}function w(R){$(".product.display-"+R+" .ingredient-description").show()
}function d(R){$(".product.display-"+R+" .ingredient-description").hide()
}$(document).ready(A());
$(window).resize(A());
function A(){k.refresh();
k.scrollTo(0,0,0);
k.currPageX=0;
y=$("html."+q+" .slide-product:visible").length;
if(y<=P){$(".scroller").css("visibility","hidden")
}else{$(".scroller").css("visibility","visible")
}var R=(y*$(".slide-product").outerWidth());
$(".NutritionCompareTool ul.product-slides").width(R)
}A();
function o(U,R,aa,Y,V){$(".product.display-"+U+" .product-image").removeClass("empty");
$(".product.display-"+U+" .product-image").empty();
$(".product.display-"+U+" .product-name").empty();
$(".product.display-"+U+" .product-ingredients-table .default").hide();
$(".product.display-"+U+" .product-image").append('<img src="'+R+'" />');
$(".product.display-"+U+" .product-name").text(aa);
var Z=$(".product.display-"+U+" .serving-qty");
Z.html("");
var ab=Z;
var T;
T=V[0];
for(var S=0;
S<V.length;
S++){ab.append($("<option />").val(V[S]).text(V[S]))
}Z.prop("disabled",false);
if($(".product-comparison-container .comparison-tab.nutritional-info").hasClass("disabled")){$(".product-comparison-container .comparison-tab").removeClass("disabled");
$(".product-comparison-container .comparison-tab.nutritional-info").addClass("active")
}if(!x()){$(".product.display-"+U+" .button-container").css("display","none");
$(".product.display-"+U+" .product-name").addClass("presel-hidden-car-view")
}else{$(".product.display-"+U+" .button-container").css("display","inline-block")
}$(".product.display-"+U+" .product-name").removeClass("default");
$(".product.display-"+U+" .select-beverage").hide();
$(".product.display-"+U).attr("data-current-product-path",Y);
$(".mobile-info-selector .product.display-"+U).show();
$(".mobile-info-selector").removeClass("empty");
$(".mobile-info-selector .default-single").hide();
$(".mobile-info-selector .two-col").show();
$(".mobile-info-selector .mobile-info-details").show();
if(!x()){var X=$(".mobile-info-selector .mobile-info-details .mobile-sub-details");
var W=$(".mobile .NutritionCompareTool .mobile-info-selector .mobile-info-details .mobile-sub-details");
$(".mobile-info-selector .mobile-info-details .button-container").css("visibility","hidden");
$(X).addClass("single-view");
$(W).addClass("single-view")
}z(U,T,Y)
}function e(R){$(".mobile-info-selector .two-col").css("display","block");
$(".mobile-info-selector .two-col .mobile-info-details").hide();
$(".mobile-info-selector .two-col .product.display-"+R+" .mobile-info-details").show();
$(".mobile-info-selector .two-col .product").removeClass("active");
$(".mobile-info-selector .two-col .product.display-"+R).addClass("active");
$(".mobile-info-selector .product .button-container").hide();
$(".mobile-info-selector .product.display-"+R+" .button-container").show();
if($(".tab-holder .nutritional-info").hasClass("active")){D(R);
d(R)
}else{Q(R);
w(R)
}}function u(S){$(".product.display-"+S+" .product-image").empty();
$(".product.display-"+S+" .product-image").addClass("empty");
$(".product.display-"+S+" .product-name").addClass("default");
$(".product.display-"+S+" .product-name").empty();
var R=$("div.nutrition-table-label-id-value-mapping").attr("data-selectProductText");
$(".product.display-"+S+" .product-name").text(R);
$(".product.display-"+S+" .product-ingredients-table .nutrition").remove();
$(".product.display-"+S+" .product-ingredients-table .default").show();
$(".product.display-"+S+" .serving-qty").prop("disabled",true);
$(".product.display-"+S+" .serving-qty").val("100mL");
$(".product.display-"+S+" .product-ingredients.ingredient-description").hide();
Q(S);
d(S);
if($(".comparison-tab.nutritional-info").hasClass("active")){D(S)
}else{w(S)
}$(".product.display-"+S+" .activeIngredient").remove();
if($(".product.display-"+r(S)+" .product-image").hasClass("empty")){$(".comparison-tab").removeClass("active").addClass("disabled");
$(".product.display-"+S+" .product-image").empty();
$(".product.display-"+S+" .product-image").addClass("empty");
$(".product.display-"+S+" .product-name").empty();
$(".product.display-"+S+" .product-name").text(R);
$(".product.display-"+S+" .product-ingredients-table .nutrition").remove();
$(".product.display-"+S+" .product-ingredients-table .default").show();
$(".product .button-container").hide();
$(".two-col").hide();
$(".default-single").show();
$(".product.display-"+S+" .serving-qty").prop("disabled",true);
$(".product-comparison-container .tab-holder .nutritional-info.comparison-tab").addClass("disabled");
D(S);
d(S);
D(r(S));
d(r(S))
}else{e(r(S))
}}function r(R){if(R==="left"){return"right"
}else{return"left"
}}$(".mobile-info-selector .two-col .product-image").click(function(S){if(!$(this).hasClass("empty")){var R="right";
if($(this).parent().hasClass("display-left")){R="left"
}e(R)
}});
$(".slide-product").click(function(){if($(".product.display-left .product-image").hasClass("empty")||$(".product.display-right .product-image").hasClass("empty")){var U=$("img",this).data("product-path");
var S=$("img",this).attr("src");
var W=$("img",this).data("product-name");
var R=$("img",this).attr("data-dropdown-list");
var X=[];
R=R.split(",");
for(var V=0;
V<R.length;
V++){X[V]=R[V].replace(/ *\([^)]*\) */g,"")
}var T="right";
if(p){T="left";
p=false
}else{if(l){T="right";
l=false
}else{if($(".product.display-left .product-image").hasClass("empty")){T="left"
}}}o(T,S,W,U,X)
}});
$(".button-container .btn-close").click(function(){var R="right";
if($(this).parent().parent().hasClass("display-left")||$(this).hasClass("left")){R="left"
}u(R);
$(this).parent().hide()
});
$(".comparison-tab.nutritional-info").click(function(){var R=$(".mobile-info-selector .two-col .product.display-left .product-image").hasClass("empty");
var S=$(".mobile-info-selector .two-col .product.display-right .product-image").hasClass("empty");
if(!(R&&S)){$(".comparison-tab.nutritional-info").addClass("active");
$(".comparison-tab.ingredients-info").removeClass("active");
D("left");
D("right");
$(".product-ingredients.ingredient-description").hide()
}});
$(".comparison-tab.ingredients-info").click(function(){var R=$(".mobile-info-selector .two-col .product.display-left .product-image").hasClass("empty");
var S=$(".mobile-info-selector .two-col .product.display-right .product-image").hasClass("empty");
if(!(R&&S)){$(".comparison-tab.ingredients-info").addClass("active");
$(".comparison-tab.nutritional-info").removeClass("active");
Q("left");
Q("right");
$(".product-ingredients.ingredient-description").show()
}$(".activeIngredient p a").wrap("<span class='theme-secondary-link'></span>");
$(".activeIngredient p a").css("text-decoration","underline")
});
$(".NutritionCompareTool .drink-type").change(function(){$(".slide-product").hide();
var R=$(this).find(":selected").data("selected");
if(R==="All"){$(".slide-product").show();
A()
}$(".slide-product img").each(function(S,T){var U=$(this).attr("data-product-type");
var W=U.replace(/[\[\]']+/g,"");
var V=W.split(",");
for(S=0;
S<V.length;
S++){if(V[S]===R){$(this).parent().show(0);
$(this).parent().addClass("visible")
}}});
A()
});
$(".NutritionCompareTool .drink-type").click(function(){$(".NutritionCompareTool .drink-type option[value='option1']").remove()
});
B();
function F(X,W){var V=[];
var U=[];
var S;
var R;
R=$(".slide-product img").filter(function(Y){return $(this).attr("id")
}).get();
for(var T=0;
T<R.length;
T++){V.push(R[T].id);
U.push($(R[T]).data("product-path"))
}if(X!==""&&W==""){S=U.indexOf(X);
$("#"+R[S].id).click()
}else{if(W!==""&&X==""){S=U.indexOf(W);
$("#"+R[S].id).click()
}else{S=U.indexOf(X);
$("#"+R[S].id).click();
S=U.indexOf(W);
$("#"+R[S].id).click()
}}}})
});
tccc.initComponent(".newsletter-sign-up",["aes"],function(a){a.each(function(){var d=$(this),c=window.location.hostname,b=d.find(".newsletter-subscribe-form");
b.submit(function(){var g=b.find("input.email");
var f=b.find("input[name='email']");
f.val(CryptoJS.AES.encrypt(e(g.val()),c))
});
function e(f){return f.replace(/^\s+|\s+$/gm,"")
}})
});
tccc.initComponent(".newsletter-signup-container",["footerUtils"],function(c,a,b){c.each(function(){var d=$(this),e=d.data("return-url");
b.notifications_captcha("#notifications_captcha_static");
d.find("a.subscribe").on("click",function(f){f.preventDefault();
b.notifications_submit("#notifications_ui_static","#notifications_form_static")
});
d.find("a.btn-back").on("click",function(f){f.preventDefault();
if(e!==""){e=a.util.parse_url(e).pathname||"/"
}else{e="/"
}window.location.href=e
})
})
});
tccc.initComponent(".newsletter",["footerUtils","selectBoxIt","aes"],function(c,a,b){c.each(function(){var y=$(this),f=y.find(".js-month-selectbox"),w=y.find(".js-day-selectbox"),o=y.find(".js-year-selectbox"),r=y.data("subscribe"),h=window.location.hostname,G="",z,E=y.find("#form-notifications"),q=y.find(".js-month-selectbox").data("text"),C=y.find(".js-day-selectbox").data("text"),d=y.find(".js-year-selectbox").data("text"),e=y.find(".top-description"),H=y.find(".minimumAgeError"),I=y.find(".email-age"),k=y.find(".error.adult"),l=y.find(".error.email"),u=y.find(".error.recaptcha"),n=y.find(".error.subscriptions"),A=false,x=false,D=false,v=false,p=false,g=false,F=false,j,t=0;
if(sessionStorage.getItem("isEligibleToSignUp")!==null&&sessionStorage.getItem("isEligibleToSignUp")==="false"){E.hide();
e.hide();
H.show()
}if(!a.global.captcha_api_key){a.global.captcha_api_key=$("html").data("captcha-api")
}$(".newsletter").find("#captcha").data("sitekey",a.global.captcha_api_key);
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if(a.global.sizes.current_size===a.global.sizes.MOBILE){$("#captcha").attr("data-size","compact")
}else{$("#captcha").removeAttr("data-size")
}});
if(a.global.sizes.current_size===a.global.sizes.MOBILE){$("#captcha").attr("data-size","compact")
}else{$("#captcha").removeAttr("data-size")
}z=function(J){var M=window.location.search.substring(1),L=M.split("&"),K=0,N="";
for(K;
K<L.length;
K++){N=L[K].split("=");
if(N[0]===J){return unescape(N[1])
}}return""
};
G=z("email");
G=decodeURIComponent(G);
G=decodeURIComponent(G);
G=decodeURIComponent(G);
if(G!==""){G=CryptoJS.AES.decrypt(G,h);
G=G.toString(CryptoJS.enc.Utf8);
G=$.trim(G);
y.find(".email-address").val(G)
}function m(){if(sessionStorage.getItem("isEligibleToSignUp")==="true"){D=true;
return D
}else{}}$("input, select",E).on("blur change",function(L){var M=$(this);
var K=(M.is(":checkbox"))?M.is(":not(:checked)"):false;
var J=(M.is("select"));
m();
if(M.val()===""||K){L.preventDefault();
if(M.hasClass("email-address")){l.text(l.data("message-email-empty"));
l.show()
}else{if($(M).hasClass("js-day-selectbox")||$(M).hasClass("js-month-selectbox")||$(M).hasClass("js-year-selectbox")){k.show()
}else{if((M).is("#privacyPolicyCheck")){$(".errorTermsCond").show();
A=false
}else{if($(E).find("input[type=checkbox]").filter(":checked").length<2){n.text(n.data("message-subscription"));
n.show();
A=false
}}}}}else{L.preventDefault();
if(J){if(M.data("text")===C){if(C!==$(M).find(".dob-day span.selectboxit-text").text()){p=true
}else{p=false
}}else{if(M.data("text")===q){if(q!==$(M).find(".dob-month span.selectboxit-text").text()){g=true
}else{p=false
}}else{if(M.data("text")===d){if(d!==$(M).find(".dob-year span.selectboxit-text").text()){F=true
}else{F=false
}}}}if(g&&p&&F){setTimeout(function(){b.notifications_submit(".notifications","#form-notifications",r)
},1000)
}}else{if(M.hasClass("email-address")){l.hide();
(M).keypress(function(N){if(N.keyCode===13){N.preventDefault()
}});
x=b.isValidMail(".notifications","#form-notifications")
}else{if($(M).is("#privacyPolicyCheck")){$(".errorTermsCond").hide()
}else{n.text(n.data("message-subscription"));
n.hide()
}if($(E).find("input[type=checkbox]").filter(":checked").length>=2){A=true
}else{A=false
}}}}if(D){m()
}if(D&&x&&A){s();
if(v){y.find("#suscribe").parent().removeClass("disabled")
}else{grecaptcha.reset();
y.find("#suscribe").parent().removeClass("disabled")
}}else{y.find("#suscribe").parent().addClass("disabled")
}});
function s(){if(grecaptcha.getResponse().length!==0){u.hide();
v=true;
return true
}else{u.show();
return""
}}function B(J){$(J).focusout(function(){console.log("was focused out")
})
}y.find("#suscribe").on("click",function(){b.notifications_submit(".notifications","#form-notifications",r)
});
y.find("#back").on("click",function(){window.location.href=document.referrer
});
f.selectBoxIt(a.global.selectBoxItOptions);
w.selectBoxIt(a.global.selectBoxItOptions);
o.selectBoxIt(a.global.selectBoxItOptions);
if(a.global.sizes.current_size===a.global.sizes.MOBILE){f.on("click mousedown",function(J){J.preventDefault()
});
w.on("click mousedown",function(J){J.preventDefault()
});
o.on("click mousedown",function(J){J.preventDefault()
})
}$(document).click(function(){$(".selectboxit").removeClass("selectboxit-open");
$(".selectboxit-options").hide()
});
$(document).on("click",".selectboxit-container",function(J){J.stopPropagation()
});
a.util.truncate_text(".newsletter h1",1);
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){a.util.truncate_text(".newsletter h1",1)
})
})
});
tccc.initComponent(".most-popular-unbottled",[],function(b,a){b.each(function(){var d=b.find(".text span");
function c(){a.util.truncate_text(d,3)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){c()
});
c()
})
});
tccc.initComponent(".most-popular",[],function(b,a){b.each(function(){var e=b.find(".title span"),c=$("#topic-container").length>0;
function d(){a.util.truncate_text(e,3)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){d()
});
if(c){$(document).on("GridDataLoad GridDataLoaded",function(){e=$("#topic-container .most-popular .title span");
d()
})
}d()
})
});
tccc.initComponent(".more-on-journey",[],function(b,a){b.each(function(){var d=$(this);
var c=d.find("h2.has-images");
function e(h){var j=true;
h.each(function(m,l){var n=$(l);
if(!n.hasClass("titles_updated")){j=false
}});
return j
}function f(){var h=$("div.thumb-link a > span");
if(e(h)){a.util.truncate_text("div.thumb-link a > span",2)
}else{window.setInterval(function(){if(e(h)){a.util.truncate_text("div.thumb-link a > span",2)
}},500)
}}function g(){$("h2.has-images").addClass("headline-section")
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){f()
});
g()
})
});
tccc.initComponent(".list-small-thumbnail",[],function(b,a){b.each(function(){var d=b.find(".description");
var c=b.find(".block-with-text");
function e(){a.util.truncate_text(d,2);
a.util.truncate_text(c,2)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){e()
});
e()
})
});
tccc.initComponent(".list-large-thumbnail",[],function(b,a){b.each(function(){var g=$(this),f=g.find("h2"),d=g.find(".meta a.headline > span"),e=g.find(".meta a.headline > span.content-body");
function c(h){if($(".packages-and-verticals-template").length<1){a.util.truncate_text(f,1)
}a.util.truncate_text(d,2);
if(!h){a.util.truncate_text(e,2)
}}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(h,j){c(j.current_size===a.global.sizes.MOBILE)
});
c()
})
});
tccc.initComponent(".video-grid",["listContentHandler"],function(c,a,b){c.each(function(){var e={dom_pointers:{post_template:$(".library-grid-template"),load_more_button:$("#load-more-button")},section:c.data("section"),section_path:c.data("section-path"),topic:c.data("topic"),tag:c.data("tag"),date:c.data("date"),limit:c.data("limit"),offset:c.data("offset"),list_type:"grid",base_search_uri:c.data("base-url"),download_label:c.data("download-label")},d=$("html"),g=new b();
g.init(e.dom_pointers,e.offset,e.limit,e.section,e.section_path,e.topic,e.tag,e.date,e.list_type,e.base_search_uri,undefined,undefined,e.download_label);
if(d.hasClass("mobile")){a.util.truncate_text(".meta h2",2);
a.util.truncate_text(".meta p",2)
}else{a.util.truncate_text(".meta h2",2);
a.util.truncate_text(".meta p",3)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(h,j){if(j.current_size===a.global.sizes.MOBILE){a.util.truncate_text(".meta h2",2);
a.util.truncate_text(".meta p",2)
}else{a.util.truncate_text(".meta h2",2);
a.util.truncate_text(".meta p",3)
}});
if(d.hasClass("lt-ie9")){var f=c.find(".post-container > article");
$.each(f,function(h,k){var j=h+1;
if(j%3===0){$(this).addClass("multiple-of-three")
}})
}})
});
tccc.initComponent(".latest-content-extended",[],function(b,a){b.each(function(){var d=b.find(".title span");
function c(){a.util.truncate_text(d,3)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){c()
});
c()
})
});
tccc.initComponent(".story-container",["isotope"],function(e,c,b,a,d){e.each(function(){var h=$(this),l=h.find(".isotope-grid"),g="";
var k={urlPath:$(".story-container").data("load-more-url"),loadMore:true,offset:$(".story-container").data("initial-offset"),limit:$(".story-container").data("initial-count")};
var j=function(){var m=$(this);
m.css("cursor","pointer").unbind("click").bind("click",function(n){n.preventDefault();
window.location.href=m.find(".content-bounds").children(".metadata").find("a").attr("href")
})
};
var f=function(){l.imagesLoaded(function(){l.isotope({itemSelector:".element"}).children(".element").not(".infographic").each(j)
})
};
$.ajax({url:k.urlPath+"/"+k.limit+"/"+k.offset+"/format.json",error:function(o,m,n){},success:function(n){n=JSON.stringify(n);
var o=jQuery.parseJSON(n);
for(i=0;
i<o.content.length;
i++){var m;
var p="";
if(o.content[i].url!=null){if(o.content[i].summary!=null||o.content[i].summary!=""){if(o.content[i].summary.length<120){m=o.content[i].summary
}else{m=o.content[i].summary.substring(0,120)+"..."
}}if(o.content[i].image&&(o.content[i].image.desktop==null||o.content[i].image.desktop!="")){p='<img alt="'+o.content[i].image.altText+'" src="'+o.content[i].image.desktop+'" data-src=\'{"desktop":"'+o.content[i].image.desktop+'", "tablet":"'+o.content[i].image.tablet+'", "mobile":"/img/1x1.gif"}\' />'
}$singleString='<div class="element image-title-caption isotope-item" ><div class="content-bounds"><a href="'+o.content[i].url+'">'+p+'</a><div class="metadata"><label><a href="'+o.content[i].url+'"> <span data-title=\'{"desktop":"'+o.content[i].title.desktop+'", "tablet":"'+o.content[i].title.tablet+'", "mobile":" '+o.content[i].title.mobile+"\"}'> "+o.content[i].title.desktop+'</span></a></label><p class="trunk8">'+m+"</p></div></div></div>"
}g+=$singleString
}$(".isotope-grid").append(g);
f();
k.offset=o.offset;
if(!(o.loadMore)){$("#load-more-button").hide()
}},type:"GET"});
$("#load-more-button").click(function(m){m.preventDefault();
load_limit=k.offset;
$.ajax({url:k.urlPath+"/"+5+"/"+load_limit+"/format.json",error:function(p,n,o){},success:function(r){r=JSON.stringify(r);
var o="";
var t=jQuery.parseJSON(r);
for(i=0;
i<t.content.length;
i++){var p;
var q="";
if(t.content[i].url!=null){if(t.content[i].summary!=null||t.content[i].summary!=""){if(t.content[i].summary.length<120){p=t.content[i].summary
}else{p=t.content[i].summary.substring(0,120)+"..."
}}if(t.content[i].image&&(t.content[i].image.desktop==null||t.content[i].image.desktop!="")){q='<img alt="'+t.content[i].image.altText+'" src="'+t.content[i].image.desktop+'" data-src=\'{"desktop":"'+t.content[i].image.desktop+'", "tablet":"'+t.content[i].image.tablet+'", "mobile":"/img/1x1.gif"}\' />'
}$singledata='<div class="element image-title-caption isotope-item" ><div class="content-bounds"><a href="'+t.content[i].url+'">'+q+'</a><div class="metadata"><label><a href="'+t.content[i].url+'"> <span data-title=\'{"desktop":"'+t.content[i].title.desktop+'", "tablet":"'+t.content[i].title.tablet+'", "mobile":" '+t.content[i].title.mobile+"\"}'> "+t.content[i].title.desktop+'</span></a></label><p class="trunk8">'+p+"</p></div></div></div>"
}o+=$singledata
}var n=5;
while(n>0){try{l.isotope("insert",$(o));
break
}catch(s){n--;
continue
}}f();
if(!(t.loadMore)){$("#load-more-button").hide()
}k.offset=t.offset;
k.limit=k.limit+5
},type:"GET"})
})
})
});
tccc.initComponent(".featured-text-links",[],function(b,a){b.each(function(){var f=$(this),e=f.find(".link-element span"),d=$("html");
function c(){if(d.hasClass("mobile")){a.util.truncate_text(e,2)
}}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){c()
});
c()
})
});
if(window.tccc!==undefined){tccc.initComponent(".recipe-ingredients",[],function(b,a){setTimeout(function(){b.each(function(){var g=b.find(".servings"),c=$(".servings-quantity"),f=[];
function h(){var k=[{entity:"&#188;",value:0.25},{entity:"&#189;",value:0.5},{entity:"&#190;",value:0.75},{entity:"&#8528;",value:0.14},{entity:"&#8529;",value:0.11},{entity:"&#8530;",value:0.1},{entity:"&#8531;",value:0.33},{entity:"&#8532;",value:0.66},{entity:"&#8533;",value:0.2},{entity:"&#8534;",value:0.4},{entity:"&#8535;",value:0.6},{entity:"&#8536;",value:0.8},{entity:"&#8537;",value:0.16},{entity:"&#8538;",value:0.83},{entity:"&#8539;",value:0.12},{entity:"&#8540;",value:0.37},{entity:"&#8541;",value:0.62},{entity:"&#8542;",value:0.87}];
for(var j in k){f[k[j].value]=k[j].entity
}e(d())
}function e(n){var j=n.baseline,m=n.current,l=(m-j)/j,k=b.find(".ingredients-list > li");
if(isNaN(m)||m<1){return
}c.text(m);
k.each(function(w){var u=$(this).find(".ingredient-amount"),p=$(this).find(".ingredient-unit"),o=u.data("original-amount"),t=p.data("original-unit");
if(o){var r=parseFloat(o),s=r*l,y=(r+s).toFixed(2).replace(/\.0$/,""),v=y.split("."),x=+v[0],q=v[1]/100,z=f[q];
if(z){if(x===0){x=""
}u.html(x+" "+z)
}else{if(q===0){y=x
}u.text(y)
}if(t&&x>1){p.text(p.data("original-unit")+"s")
}else{if(t){p.text(p.data("original-unit"))
}}}})
}function d(){if(g.length<1){return{baseline:1,current:1}
}return{baseline:g.data("original-servings"),current:parseFloat(g.val())}
}g.on("change",function(){e(d())
});
h()
})
},600)
})
}if(window.define!==undefined){define("heroSlideshow",["tccc"],function(a){return{tccc:a,slider:null,thumbWidth:111,init:function(c,m,j){var p={globalCaption:true,addActiveClass:false,arrowsNav:false,startSlideId:0,transitionSpeed:350,slidesSpacing:4,loop:true,autoHeight:false,fadeinLoadedSlide:false,controlNavigationSpacing:0,controlNavigation:"tabs",imageAlignCenter:true,loopRewind:false,numImagesToPreload:3,usePreloader:false,keyboardNavEnabled:false,sliderDrag:false,sliderTouch:true,navigateByClick:true,autoScaleSlider:true,autoScaleSliderWidth:692,autoScaleSliderHeight:452,allowCSS3:false,autoPlay:{enabled:j,pauseOnHover:true,delay:+m,stopAtAction:false},thumbs:{firstMargin:false,spacing:0,fitInViewport:true}},q=c.find(".rsHeroStyle"),o=this,e=o.slider=q.royalSlider(p).data("royalSlider"),f,h,g=[1,2,3,4,5,6,7,8],l,b=8,d,k,n;
if(a.global.sizes.current_size===a.global.sizes.TABLET){o.thumbWidth=83
}a.util.truncate_text(q.find(".titles_updated"),2);
a.util.truncate_text(q.find(".summary"),3);
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(r,s){if(s.current_size===a.global.sizes.BIG_DESKTOP||s.current_size===a.global.sizes.DESKTOP){o.thumbWidth=111
}else{o.thumbWidth=83
}});
c.find(".thumbseeker .thumb-container").append(q.find(".rsNav"));
c.find(".hero-slideshow-nav-left").on("click",function(){e.prev()
}).on("mouseover",function(){if(j){e.stopAutoPlay()
}}).on("mouseout",function(){if(j){e.startAutoPlay()
}});
c.find(".hero-slideshow-nav-right").on("click",function(){e.next()
}).on("mouseover",function(){if(j){e.stopAutoPlay()
}}).on("mouseout",function(){if(j){e.startAutoPlay()
}});
o.slider.ev.on("rsBeforeAnimStart",function(r){q.find(".rsCaption").removeClass("initially-hidden");
q.find(".rsGCaption").removeClass("transitionIn").addClass("transitionOut");
c.find(".mask-visiblenearby").removeClass("fadeOut").addClass("fadeIn");
$(this.slides).each(function(){var s=$(this.holder);
if(s.hasClass("rsActiveSlide")){s.removeClass("doActiveFadeIn").addClass("doActiveFadeOut")
}})
});
o.slider.ev.on("rsAfterSlideChange",function(r){q.find(".rsGCaption").removeClass("transitionOut").addClass("transitionIn");
c.find(".mask-visiblenearby").removeClass("fadeIn").addClass("fadeOut");
$(this.slides).each(function(){var s=$(this.holder);
if(s.hasClass("rsActiveSlide")){s.removeClass("doActiveFadeOut").addClass("doActiveFadeIn")
}});
a.util.truncate_text(q.find(".titles_updated"),2);
a.util.truncate_text(q.find(".summary"),3)
});
h=c.find(".thumbseeker .rsNavItem");
l=h.length;
d=function(u,s,r){var t=u+r;
if(t>s){t=(u+r)-s
}return t
};
k=function(u,s,r){var t=u-r;
if(t<1){t=(s-Math.abs(t))
}return t
};
f=function(r){var t,s,u=0;
c.find(".thumbseeker .rsNavItem").addClass("hidden");
for(u,len=b;
u<len;
u++){t=g[u];
if(r>0){s=d(t,l,b)
}else{s=k(t,l,b)
}n(s,u);
g[u]=s
}};
n=function(s,r){var t=4,u=(o.thumbWidth*r)+(t*r);
c.find(".thumbseeker .rsNavItem:nth-child("+s+")").removeClass("hidden").css("position","absolute").css("left",u+"px").css("float","none")
};
if(l>b){c.find(".thumbseeker .skip-reverse").on("click",function(){f(-1)
});
c.find(".thumbseeker .skip-forward").on("click",function(){f(1)
})
}else{c.find(".thumbseeker .skip-reverse").remove();
c.find(".thumbseeker .skip-forward").remove()
}setTimeout(function(){q.find(".rsCaption").removeClass("initially-hidden");
q.find(".rsGCaption").removeClass("transitionOut").addClass("transitionIn");
c.find(".side-navigation-colum").addClass("transitionIn")
},750)
}}
})
}if(window.tccc!==undefined){tccc.initComponent(".hero-module-article",["heroSlideshow"],function(c,a,b){c.each(function(){var d=$(this).find(".slideshow_item > img");
a.global.update_images_for_size(a.global.sizes.current_size,d);
b.init($(this),7000,$(this).find(".hero-module-container").attr("data-auto-play")==="true")
})
})
}define("headerUtils",["tccc"],function(a){return{init:function(){this.resize_banner_to(a.global.sizes.current_size);
var A=$("#global-menu-items .sub-menu-wrapper");
var t;
var q=a.global.sizes.current_size;
var l=$("#regional-country-selector");
var p='<section id="global-regional-map"><div class="container"></div></section>';
var m='<section id="global-regional-map-mobile"><div class="container"></div></section>';
var y=$(".country-sel-map");
var B=$(".regions-container");
var w=$("#isfrontPageTemplate").val();
var n=$("#isunbottledTemplate").val();
var e=sessionStorage.getItem("userSelectedCountryCode");
var g=$("ul ul.sites");
var d;
if(n&&$(".latest-ub .hat").length){$("#social-stats div.shadow").remove()
}A.on("click",function(D){D.preventDefault();
D.stopPropagation();
var C=$(this),E=$("#"+C.data("linkedMenuId"));
if(t&&t.is(C)){if(C.hasClass("open-menu")){C.removeClass("open-menu");
E.hide()
}else{C.addClass("open-menu");
E.show()
}}else{$(".desktop-tablet-sub-menu").hide();
C.addClass("open-menu");
E.show();
if(t){t.removeClass("open-menu");
E.show()
}}t=C
});
$(function(){l.find(".showMap").on("click touchstart",function(C){C.stopPropagation();
if(C.type==="touchstart"){$(this).off("click")
}if(C.type==="click"){$(this).off("touchstart")
}if(p!=""){if((w==="true")||(n==="true")){$("#global-banner").before(p);
$("#global-regional-map .container").addClass("frontPageMapSpacing")
}else{$("#global-banner").after(p);
$("#global-regional-map .container").addClass("otherPagesMapSpacing")
}y.appendTo($("#global-regional-map .container"));
y.show();
p=""
}else{$("#global-regional-map").toggle()
}})
});
$(function(){$("#global-menu-items").find("#js-regional-country-menu").on("click touchstart",function(C){if(C.type==="touchstart"){$(this).off("click")
}if(C.type==="click"){$(this).off("touchstart")
}if(m!=""){$("#js-regional-country-menu").after(m);
y.appendTo($("#global-regional-map-mobile .container"));
y.show();
m=""
}else{$("#global-regional-map-mobile").toggle()
}})
});
function j(){B.find("li > ul").each(function(D){var F=$(this).parent("li");
var C=$(this).parent("li").siblings();
var E=$(this).remove();
F.unbind().on("click touchstart",function(I){if($(I.target).hasClass("sitelink")){if((/iphone|ipad|ipod/gi).test(navigator.appVersion)){window.location.href=I.target
}}I.stopPropagation();
if(I.type==="touchstart"){$(this).off("click")
}if(I.type==="click"){$(this).off("touchstart")
}var H=$("li.regionLabel > a");
H.each(function(){$(this).removeClass("activeCountryLink")
});
var G=$("li.regionLabel ul li a");
G.each(function(){if($(this).attr("data-region-name")===$(".map-container > div.overlay").attr("data-class-region")){$(this).removeClass("activeCountryLink");
$("span.region-selected").text("")
}});
g.slideUp("200");
if(E.is(":hidden")){E.slideDown("200");
$(this).find("> a").addClass("activeCountryLink")
}else{E.slideUp("200");
$(this).find("> a").removeClass("activeCountryLink")
}});
F.append(E)
});
g.hide()
}if(a.global.sizes.current_size!==a.global.sizes.MOBILE){j()
}$("body").on("click touchstart",function(E){var D=$("#global-regional-map");
var C=l.find(".showMap a");
var D=$("#global-regional-map");
if((E.target==D)||(E.target.id==C)){return
}if($(E.target).closest("#global-regional-map").length){return
}D.hide()
});
$(function(){return;
var D="";
var G={region:$(".regionLabel a"),sites:$("li a.sitelink"),overlay:$(".map-container > .overlay")};
G.sites.on("click touchstart",function(I){if(G.sites.is(":hidden")){$(this).toggleClass("activeCountryLink")
}else{G.sites.slideUp("200");
$(this).toggleClass("activeCountryLink")
}});
function C(I){D=I.data("region-name");
G.overlay.fadeIn(300);
G.overlay.toggleClass(D);
G.overlay.attr("data-class-region",D)
}function F(I){G.overlay.hide();
G.overlay.toggleClass(D);
G.overlay.attr("data-class-region",D)
}function E(I){D=I.data("region-name");
G.overlay.fadeIn(300);
G.overlay.addClass(D)
}function H(I){G.overlay.hide();
G.overlay.removeClass(D)
}if(a.global.sizes.current_size===a.global.sizes.MOBILE){G.region.on("click touchstart",function(I){if(I.type==="touchstart"){$(this).off("click")
}if(I.type==="click"){$(this).off("touchstart")
}j()
})
}else{G.region.on("mouseover",function(){$("div.overlay").attr("class","overlay");
C($(this))
}).on("mouseleave",function(){F()
});
G.sites.on("mouseover",function(){E($(this))
}).on("mouseleave",function(){H()
})
}});
$(document).ready(function(){$(function(){$("ul.sites > li > a.sitelink").on("click touchstart",function(D){var E=$(this).parent().data("regional-country-code");
if(!(E)){window.sessionStorage.setItem("userSelectedCountryCode",E);
e=sessionStorage.getItem("userSelectedCountryCode")
}var C=$(this).attr("href");
if((/iphone|ipad|ipod/gi).test(navigator.appVersion)||!$(this).attr("target","_blank")){window.location.href=C
}})
});
$(function(){$("ul.sites > li.regionLabel").each(function(){var F=$(this).attr("data-regional-country-code");
var E=$(this).find("> a").attr("data-region-name");
var C=$(this).find("> a").attr("target");
if((F==""||typeof F==="undefined")&&(C==""||typeof C==="undefined")){$(this).find("> a").addClass("activeCountryLink");
d=$(this).text();
$("span.region-selected").text(d);
$(this).parent("ul").prev("a").trigger("touchstart");
$(".map-container > div.overlay").show().addClass(E)
}else{if(F==e){$("li[data-regional-country-code='"+e+"'] > a").addClass("activeCountryLink");
d=$("li[data-regional-country-code='"+e+"'] > a").text();
$("span.region-selected").text(d);
$("li[data-regional-country-code='"+e+"']").parent("ul").prev("a").trigger("touchstart");
var D=$("li[data-regional-country-code='"+e+"'] > a").data("region-name");
$(".map-container > div.overlay").show().addClass(D)
}}})
})
});
$(a.global).on(a.global.events.globalMenu.CLOSE_ALL_MENUS,function(){$(".desktop-tablet-sub-menu").hide();
if(t){t.removeClass("open-menu")
}});
var f=this;
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){f.resize_banner_to(a.global.sizes.current_size);
$("#global-header").removeClass("mobile-open");
if(a.global.sizes.current_size===a.global.sizes.MOBILE&&a.global.sizes.current_size!==q){f.mobile_menu()
}else{if(a.global.sizes.current_size!==a.global.sizes.TABLET&&a.global.sizes.current_size!==a.global.sizes.DESKTOP){f.mobile_menu()
}}if(a.global.sizes.current_size&&a.global.sizes.current_size===a.global.sizes.BIG_DESKTOP||a.global.sizes.current_size===a.global.sizes.DESKTOP){v()
}else{o()
}});
$(document).click(function(){$(a.global).trigger(a.global.events.globalMenu.CLOSE_ALL_MENUS)
});
$("#mobile-menu").click(function(){if($("#global-header").hasClass("mobile-open")){$("#global-header").removeClass("mobile-open")
}else{$("#global-header").addClass("mobile-open")
}});
$(".section-column li.primary").each(function(){$(this).click(function(C){C.preventDefault();
if($(this).hasClass("open")){$(this).removeClass("open").siblings().slideUp()
}else{$(this).addClass("open").siblings().slideDown()
}})
});
var x=$("#global-package-nav");
var k=x.find(".package-link");
var r=$("#supertooltip-list");
var z=500;
var h;
function v(){x.off("mouseleave").on("mouseleave",function(){clearTimeout(h);
k.find(".icon-caret-up").removeClass("visible");
x.removeClass("expanded").addClass("collapsed")
});
k.each(function(D){var C=$(this);
if(C.data("hasTooltip")){C.off("mouseenter").on("mouseenter",function(){clearTimeout(h);
h=setTimeout(function(){r.find(".supertooltip-item").addClass("hidden");
k.find(".icon-caret-up").removeClass("visible");
C.find(".icon-caret-up").addClass("visible");
r.find(".supertooltip-item:eq("+D+")").removeClass("hidden");
x.removeClass("collapsed").addClass("expanded")
},z)
})
}else{C.off("mouseenter").on("mouseenter",function(){r.find(".supertooltip-item").addClass("hidden");
x.removeClass("expanded").addClass("collapsed")
})
}})
}function o(){clearTimeout(h);
x.off("mouseleave");
k.each(function(){$(this).off("mouseenter")
})
}if(q===a.global.sizes.BIG_DESKTOP||q===a.global.sizes.DESKTOP){v()
}$("#js-company-menu, #js-country-menu, #js-regional-country-menu").appendTo("#global-menu-items");
g.hide();
function c(){return window.innerHeight>window.innerWidth
}if((/iphone|ipad|ipod/gi).test(navigator.appVersion)){if(c()){var b=$("#global-header");
var s=$("#header-container:visible");
if(!b.hasClass("skinny")){if(s.length){var u=s.height();
if(q===a.global.sizes.TABLET){$("#global-package-nav").css("margin-top",u)
}}}}}},resize_banner_to:function(b){var c=(b===a.global.sizes.MOBILE)?$("#mobile-logo img"):$("#global-banner img");
c.each(function(){var f=$(this);
var e=b;
var g=f.data("src");
var d=f.data("overrideSize");
if(e===a.global.sizes.BIG_DESKTOP){e=a.global.sizes.DESKTOP
}if(d&&d.length){switch(d){case"small":e=a.global.sizes.MOBILE;
break;
case"medium":e=a.global.sizes.TABLET;
break;
case"large":e=a.global.sizes.DESKTOP;
break
}}if(g){f.removeClass("hidden");
f.attr("src",g[e])
}})
},mobile_menu:function(){$(".desktop-tablet-sub-menu").hide();
$(".sub-menu-wrapper").removeClass("open-menu")
}}
});
tccc.initComponent("header",["headerUtils"],function(a,b,c){c.init()
});
tccc.initComponent(".grid-topic-filters",["iScroll"],function(e,d){function a(g,h){$.ajax({url:g,context:h}).done(function(k){$(this).html(k);
var j=$(this).find("img[data-src]");
d.global.update_images_for_size(d.global.sizes.current_size,j);
b(g);
$(document).trigger("GridDataLoaded")
})
}$(document).ready(function(){b();
var g=function(){if(d.global.sizes.current_size===d.global.sizes.MOBILE){var h=$("li.topic-list"),j=0,l=parseInt(h.length/4,10);
var k=new iScroll(document.getElementsByClassName("navListwrapper")[0],{snap:"li",vScroll:false,hScrollbar:false});
var m=function(){if(k.currPageX===k.pagesX.length-1){$("div.scroller-right").css("visibility","hidden")
}else{$("div.scroller-right").css("visibility","visible")
}if(k.currPageX===0){$("div.scroller-left").css("visibility","hidden")
}else{$("div.scroller-left").css("visibility","visible")
}};
$("div.scroller-right").click(function(){k.scrollToPage(k.currPageX+3,0,1000)
});
$("div.scroller-left").click(function(){k.scrollToPage(k.currPageX-3,0,1000)
})
}};
g();
$(d.global).bind(d.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){g()
})
});
if(e.find(".categories li a.selected").length===0){e.find(".navListwrapper").closest(".grid-topic-wp").hide()
}$(document).on("click",".seeMore_toggle",function(g){g.preventDefault();
$(".callouts-group1").show();
$(".callouts-group2").show();
$(".seeMore_toggle").hide()
});
e.find(".categories li a").on("click",function(g){g.preventDefault();
window.location.hash=$(this).data("id");
e.find(".categories li a.selected").removeClass("selected");
$(this).addClass("selected");
a($(this).data("topic"),$("#topic-container"))
});
if(window.location.hash){var c=e.find('.categories li a[data-id="'+window.location.hash.substr(1)+'"]');
if(c.length>0){c.addClass("selected");
b(c.data("topic"))
}}function b(j){var k,h,g=$(".grid-topic-main").attr("data-ispublishmode"),l;
if(!j){if($(".home-page").length>0){k=$("#topic-container").attr("data-featured-page-full-path")
}else{k=$(".grid-topic-main").attr("data-topicFilterPagePath")
}}else{k=j;
k=k.substring(0,(k.indexOf("_")-1));
h=$("#topic-container").attr("data-featured-page-full-path");
if(h){h=h.split("/",5).join("/");
if(!(k.indexOf(h)>-1)){k=h+k
}}}if(g){l={callingpagepath:k}
}else{l={callingpagepath:k,type:"dynamiconly"}
}$.ajax({url:"/bin/journey/getcalloutsfromtopicfilters.json",dataType:"json",data:l,success:function(m){f(m)
}})
}function f(m){var g=m[0];
var o=$(".grid-topic-main").attr("data-ispublishmode");
$(".topic-callout").removeClass("small-category-callout");
$(".topic-callout").removeClass("medium-category-callout");
$(".topic-callout").removeClass("large-category-callout");
for(var r in g){if(g.hasOwnProperty(r)){for(var l=0;
l<(g[r]).length;
l++){var h=g[r][l];
var n=l+1;
var p='{"desktop":"'+h.desktopImageUrl+'",tablet":"'+h.tabletImageUrl+'","mobile":"'+h.mobileImageUrl+'"}';
var k=h.altTextOverride;
$(".calloutTile").each(function(j,t){if($(this).hasClass(n)){var u="callout-"+n;
var s=h.calloutSize+"-category-callout";
$(this).find(".TopicCategoryCallouts").addClass(u);
$(this).find(".topic-category-callouts .topic-callout").addClass(s);
$(this).find(".topic-callout a").attr("href",h.linkUrl);
$(this).find(".topic-headline").css("background-color",h.leadTopicColor);
$(this).find(".topic-headline strong").html(h.leadTopicTagName);
$(this).find(".topic-headline-lead-in strong").html(h.leadTopicTagName);
$(this).find(".topic-headline-lead-in").css("color",h.leadTopicColor);
$(this).find(".topic-lead-in").attr("href",h.linkUrl);
$(this).find(".topic-lead-in h3 span").html(h.longTitle1+h.longTitle2+h.longTitle3);
$(this).find(".description").html(h.summary);
$(this).find(".topic-callout img").attr("data-src",p);
$(this).find(".topic-callout img").attr("alt",k);
$(this).find(".topic-callout img").attr("title",k);
if(d.global.sizes.current_size&&d.global.sizes.current_size===d.global.sizes.BIG_DESKTOP||d.global.sizes.current_size===d.global.sizes.DESKTOP){$(this).find(".topic-callout img").attr("src",h.desktopImageUrl)
}if(d.global.sizes.current_size&&d.global.sizes.current_size===d.global.sizes.TABLET){$(this).find(".topic-callout img").attr("src",h.tabletImageUrl)
}if(d.global.sizes.current_size&&d.global.sizes.current_size===d.global.sizes.MOBILE){$(this).find(".topic-callout img").attr("src",h.mobileImageUrl)
}}})
}}}var q=new StockTicker();
q.getData()
}});
define("footerUtils",["tccc"],function(a){return{context:{},init:function(c){var b=this;
this.context=c;
$("#masthead_link").click(function(d){d.preventDefault();
b.masthead();
b.notifications_close()
});
$("#masthead_close_link").click(function(d){d.preventDefault();
b.masthead_close()
});
$("#notifications_link").click(function(d){d.preventDefault();
b.notifications();
b.masthead_close()
});
$("#notifications_ui a.close").on("click",function(d){d.preventDefault();
b.notifications_close()
});
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){b.update_ui()
});
b.update_ui();
$("section#page-description").on("click","a.show-page-description",function(){var d=$(this);
if(d.hasClass("close")){d.parent().siblings("div.short-page-description").slideDown();
d.removeClass("close")
}else{d.parent().siblings("div.short-page-description").slideUp();
d.addClass("close")
}})
},update_ui:function(){this.masthead_close();
this.notifications_close();
var b=a.global.sizes.current_size;
if(b===a.global.sizes.DESKTOP){this.revert_footer_ui_tweaks()
}else{if(b===a.global.sizes.TABLET){this.revert_footer_ui_tweaks()
}else{if(b===a.global.sizes.MOBILE){window.scrollTo(0,1);
this.footer_ui_tweaks()
}}}},footer_ui_tweaks:function(){$("footer h5").each(function(){var b=$(this);
if(b.find("~ul").length>0){if(b.find("span.open").length<1&&b.find("span.close").length<1){b.prepend('<span class="open"></span>')
}b.unbind("click").click(function(){var c=$(this);
if(!c.find("~ul").is(":visible")){c.find("span").addClass("close").removeClass("open")
}if(c.find("~ul").is(":visible")){c.find("span").addClass("open").removeClass("close")
}c.find("~ul").slideToggle()
})
}})
},revert_footer_ui_tweaks:function(){$("footer h5").each(function(){$(this).unbind("click").find("~ul").show()
})
},masthead:function(){if($("#masthead").css("display")==="none"){if(!$("html").hasClass("mobile")){$(".footer-wedge-1, .footer-wedge-2").hide();
$("#masthead_link").addClass("opened");
$("#masthead").show().addClass("opened")
}else{$("#masthead_link").addClass("opened").find("span").removeClass("open").addClass("close");
$("#masthead").show().addClass("opened");
$("li.last.notifications").addClass("mobile-masthead-open")
}if($("#masthead ul.authors li").length<1){$.ajax({type:"GET",url:this.context.masthead_url}).done(function(b){$(b).each(function(d,e){var j="<li>",h,c,g;
if(e.image){j+="<img src='"+e.image.desktop+"' alt=''>"
}if(e.permalink){j+="<h6><a href='"+e.permalink+"'>"+e.fullName+"</a></h6>"
}if(e.jobTitle){j+="<span>"+e.jobTitle+"</span><br>"
}var f="";
if(e.socialLinks){f="<div class='author-social-links'>";
c=e.socialLinks.length;
$(e.socialLinks).each(function(k,l){f+="<a class='social' href='"+l.permalink+"' target='_blank'>"+l.title.desktop+"</a>";
if(k<c-1){f+="&nbsp;<span>|</span>&nbsp;"
}});
f+="</div>"
}j+=f+"</li>";
$("#masthead ul.authors").append(j)
});
if(a.global.sizes.current_size===a.global.sizes.MOBILE){scrollOptions={hScrollbar:false,vScrollbar:true};
$("#masthead").find("> h4, > a").remove();
if(!window.iScroll){require(["iScroll"],function(c){new c("masthead",scrollOptions)
})
}else{new iScroll("masthead",scrollOptions)
}}})
}}else{this.masthead_close()
}},masthead_close:function(){if(!$("html").hasClass("mobile")){$("#masthead").hide().removeClass("opened");
$("#masthead_link").removeClass("opened");
$(".footer-wedge-1, .footer-wedge-2").show()
}else{$("#masthead_link").removeClass("opened").find("span").addClass("open").removeClass("close");
$("#masthead").hide().removeClass("opened");
$("li.last.notifications").removeClass("mobile-masthead-open")
}},notifications:function(){var d=this;
if($("#footer_notifications").css("display")==="none"){if(!$("html").hasClass("mobile")){$(".footer-wedge-1, .footer-wedge-2").hide();
$("#notifications_link").addClass("opened");
$("#footer_notifications").show().addClass("opened");
var f=$("#notifications_link").offset().left,e=$("#notifications_link").outerWidth(),b=$("#footer_notifications").width(),c=$("#notifications_link").closest("ul").width();
if((f+e)>c){$("#footer_notifications").css("right","1px");
$("#footer_notifications").css("left","auto")
}else{if((f+e-b)>0){$("#footer_notifications").css("left",(f+e-b)+"px");
$("#footer_notifications").css("right","auto")
}else{$("#footer_notifications").css("left","1px");
$("#footer_notifications").css("right","auto")
}}$.ajax({type:"GET",url:d.context.notification_ui_url}).done(function(g){$("#footer_notifications").html(g);
require(["selectBoxIt"],function(){$("select","#footer_notifications").selectBoxIt(a.global.selectBoxItOptions).data("selectBoxIt")
});
$("a.subscribe","#footer_notifications").click(function(h){h.preventDefault();
d.notifications_submit("#footer_notifications",".notifications_form")
});
LazyLoad.js("//www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){if(window.Recaptcha){window.Recaptcha.create(a.global.captcha_api_key,"notifications_captcha",{lang:a.global.lang,theme:"red",callback:window.Recaptcha.focus_response_field})
}})
})
}else{$("#notifications_link").addClass("opened").find("span").removeClass("open").addClass("close");
$("#footer_notifications").show().addClass("opened");
$("li.last.notifications").addClass("mobile-notifications-open");
$("#footer_notifications").css("left","0px");
$.ajax({type:"GET",url:d.context.notification_ui_url}).done(function(g){$("#footer_notifications").html(g);
require(["selectBoxIt"],function(){$("select","#footer_notifications").selectBoxIt(a.global.selectBoxItOptions)
});
$("a.subscribe","#footer_notifications").click(function(h){h.preventDefault();
this.notifications_submit("#footer_notifications",".notifications_form")
});
LazyLoad.js("//www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){if(window.Recaptcha){window.Recaptcha.create(a.global.captcha_api_key,"notifications_captcha",{lang:a.global.lang,theme:"red",callback:window.Recaptcha.focus_response_field})
}})
})
}}else{this.notifications_close()
}},notifications_close:function(){$("#overlay_notifications, #exposeMask").remove();
if(!$("html").hasClass("mobile")){$("#footer_notifications").hide().removeClass("opened");
$("#notifications_link").removeClass("opened");
$(".footer-wedge-1, .footer-wedge-2").show()
}else{$("#notifications_link").removeClass("opened").find("span").first().addClass("open").removeClass("close");
$("#footer_notifications").hide().removeClass("opened");
$("li.last.notifications").removeClass("mobile-notifications-open")
}},notifications_submit:function(K,k,p){var I=$(K),F=I.find(k),s=I.find(".top-description"),L=I.find(".success"),c=I.find(".minimumAgeError"),u=F.find(".error.subscriptions"),r=F.find(".error.email"),q=F.find(".error.adult"),H=F.find(".error.recaptcha"),E=F.find(".error.errorTermsAndCond"),D=F.find("input[name='email']").val(),J=false,l=F.find(".dob-year span.selectboxit-text").text(),d=F.find(".dob-month span.selectboxit-text").data("val"),z=F.find(".dob-month span.selectboxit-text").text(),A=F.find(".dob-day span.selectboxit-text").text(),f=F.find(".js-day-selectbox").data("text"),g=F.find(".js-month-selectbox").data("text"),j=F.find(".js-year-selectbox").data("text"),C=F.find("ul li input[type='checkbox']:checked"),y=d+"/"+A+"/"+l,m,n,B=false,x=0,b=true;
if(z===g){emptyMonth=false
}else{emptyMonth=true
}if(A===f){emptyDate=false
}else{emptyDate=true
}if(l===j){emptyYear=false
}else{emptyYear=true
}this.context.subscribe=typeof p!=="undefined"?p:this.context.subscribe;
var w=typeof p!=="undefined"?p:this.context.subscribe;
C.each(function(){x++
});
if(!emptyMonth){b=false;
q.show()
}else{q.hide()
}if(!emptyDate){b=false;
q.show()
}else{q.hide()
}if(!emptyYear){b=false;
q.show()
}else{q.hide()
}if(x<1){u.text(u.data("message-subscription"));
u.show();
b=false
}else{u.hide()
}if(!D){r.text(r.data("message-email-empty"));
r.show();
b=false
}else{var o=/^\w+[\+\.\w\-]*@([\w\-]+\.)*\w+[\w\-]*\.([a-z]{2,4}|\d+)$/i;
if(!o.test(D)){r.text(r.data("message-email-valid"));
r.show();
b=false
}else{r.hide();
B=true
}}if($("#privacyPolicyCheck").length&&$("#privacyPolicyCheck").is(":checked")){b=true;
$(".errorTermsCond").hide()
}else{b=false;
$(".errorTermsCond").show()
}if(!emptyMonth||!emptyDate||!emptyYear){q.text(q.data("error-missing-age"));
q.show()
}else{if((typeof sessionStorage.isEligibleToSignUp==="undefined")||!(sessionStorage.isEligibleToSignUp==="false")){function M(O,N){return O.indexOf(N,O.length-N.length)!==-1
}var v,G=window.location.hostname,h,e=window.location.pathname;
h=M(e,".html");
if(h){e=e.substring(0,e.length-5);
var t=(e.indexOf("/news"));
e=e.substring(t,(e.length))
}else{e=e.substring(0,e.length)
}$.ajax({type:"POST",url:"/bin/journey/getcontentpath",data:{domainName:window.location.hostname,vanityUrl:e},success:function(N){v=N.contentPath;
var O=v.replace(".html","");
O=O+"/jcr:content/pageContent/newsletter";
$.ajax({type:"POST",url:"/bin/journey/ageVerificationService",data:{age:y,parentPath:O},success:function(R){window.sessionStorage.setItem("isEligibleToSignUp",R.isEligibleToSignUp);
if(R.isEligibleToSignUp){J=true
}else{J=false;
L.hide();
c.show()
}var Q=function(V){};
var S=grecaptcha.getResponse();
$("#captchaResponse").val(S);
if(!J){b=false
}else{q.hide();
if(S.length==0){H.show();
H.text(H.data("message-recaptcha-empty"));
b=false
}else{H.hide()
}if(b&&window.sessionStorage.getItem("isEligibleToSignUp")){var U=k.substring(1,k.length),T=form2object(U);
delete T["dateOfBirth/day"];
delete T["dateOfBirth/year"];
delete T["dateOfBirth/month"];
var P=JSON.stringify(T);
$.ajax({type:"POST",contentType:"application/json",dataType:"json",url:w,data:P}).done(function(V){if(V.code===0||V.code===200){s.hide();
F.hide();
L.show();
c.hide()
}else{if(V.code===910){H.show();
H.text(H.data("message-recaptcha-retry"))
}}})
}}},error:function(){}})
}})
}}},getAge:function(f){var e=new Date();
var c=new Date(f);
var d=e.getFullYear()-c.getFullYear();
var b=e.getMonth()-c.getMonth();
if(b<0||(b===0&&e.getDate()<c.getDate())){d--
}return d
},isNumber:function(b){return !isNaN(parseFloat(b))&&isFinite(b)
},notifications_captcha:function(b){b=b.substring(1,b.length);
LazyLoad.js("//www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){if(window.Recaptcha){window.Recaptcha.create(a.global.captcha_api_key,b,{lang:a.global.lang,theme:"red"})
}})
},isValidMail:function(h,b){var d=$(h),g=d.find(b),f=g.find(".error.email"),j=g.find("input[name='email']").val(),e=false;
if(!j){f.text(f.data("message-email-empty"));
f.show()
}else{var c=/^\w+[\+\.\w\-]*@([\w\-]+\.)*\w+[\w\-]*\.([a-z]{2,4}|\d+)$/i;
if(!c.test(j)){f.text(f.data("message-email-valid"));
f.show()
}else{f.hide();
e=true
}return e
}}}
});
define("newsletterSignup",["tccc","footerUtils","aes"],function(b,g){var c=$("footer").data("subscribe"),a="tccc-pageview-counter",e=3,f=$("footer").data("get-popup"),d=b.global.get_OptanonCookiePrefrence();
if(b.global.captcha_api_key===null){b.global.captcha_api_key=$("html").data("captcha-api")
}return{isEnabled:function(){if(!f){return false
}return true
},isAllowedToRender:function(){var h=b.global.sizes.current_size;
if(+localStorage.getItem(a)<e){return false
}if(!b.global.is_desktop_size(h)&&!b.global.is_big_desktop_size(h)&&!b.global.is_tablet_size(h)){return false
}if(this.hasSignedUp()){return false
}if(this.hasRenderedOnce()){return false
}return true
},rememberSigningUp:function(){if((!($.isEmptyObject(d)))&&(d.functionalityCookieActive)||(d.allCookiesAllowed)){$.cookie("newsletter-signedup","true",{path:"/"})
}else{if($.isEmptyObject(d)){$.cookie("newsletter-signedup","true",{path:"/"})
}}},rememberRendering:function(){if((!($.isEmptyObject(d)))&&(d.functionalityCookieActive)||(d.allCookiesAllowed)){$.cookie("newsletter-signup-shown","true",{path:"/"})
}else{if($.isEmptyObject(d)){$.cookie("newsletter-signup-shown","true",{path:"/"})
}}},hasSignedUp:function(){if($.cookie("newsletter-signedup")==="true"){return true
}else{return false
}},hasRenderedOnce:function(){if($.cookie("newsletter-signup-shown")==="true"){return true
}else{return false
}},exit:function(){$("#newsletter-popup-modal").remove()
},recordPageView:function(){var h=this,j=+localStorage.getItem(a);
if(h.isEnabled()){if(!j){j=0
}if(h.isAValidPage()){j+=1
}if(j>e){j=e
}localStorage.setItem(a,j)
}},isAValidPage:function(){var k=$("body.cq-wcm-edit").length,j=$(".article-blog-template").length,h=$(".recipe-template").length,l=$(".video-assets-template").length;
if((j||h||l)&&!k){return true
}else{return false
}},resetPageViewRecord:function(){localStorage.setItem(a,0)
},render:function(){var h=this;
if(h.isEnabled()&&h.isAllowedToRender()){$.ajax({type:"GET",url:f}).done(function(j){h.rememberRendering();
h.resetPageViewRecord();
$("body").append(j);
$("#newsletter-popup-modal").removeClass("hide").addClass("show");
require(["selectBoxIt"],function(){$("select","#newsletter-popup-modal").selectBoxIt(b.global.selectBoxItOptions).data("selectBoxIt");
$(document).click(function(){$(".selectboxit").removeClass("selectboxit-open");
$(".selectboxit-options").hide()
});
$(document).on("click",".selectboxit-container",function(l){l.stopPropagation()
})
});
var k=$("#newsletter-popup-modal .close, #newsletter-popup-modal .closeButton");
k.on("click",function(){h.exit()
});
$("#newsletter-popup-modal .email_address").keyup(function(l){if(l.keyCode===13){l.preventDefault();
l.stopPropagation();
h.signup();
return false
}});
$("#newsletter-popup-modal .subscribe").on("click",function(l){l.preventDefault();
h.signup()
})
})
}},trimWhitespace:function(h){return h.replace(/^\s+|\s+$/gm,"")
},signup:function(){var x=this;
var E="#newsletter-popup-modal";
var D="#notifications_form";
var u=E+" "+D;
var A=$(u);
var p=A.find(".error.recaptcha");
var r=$(E);
var q=$("input[name='email']",u).val();
q=x.trimWhitespace(q);
var y=$("input[name='recaptcha_response_field']",u).val();
var j=true,t=A.find(".dob-year span.selectboxit-text").text(),F=A.find(".dob-month span.selectboxit-text").data("val"),C=A.find(".dob-day span.selectboxit-text").text(),l=A.find(".error.adult"),B=false;
if(!g.isNumber(t)||!g.isNumber(F)||!g.isNumber(C)){l.text(l.data("error-missing-age"))
}else{if(!(g.getAge(t+"/"+F+"/"+C)>18)){}else{B=true
}}if(!B){l.show();
j=false
}else{l.hide()
}var m=/^\w+[\+\.\w\-]*@([\w\-]+\.)*\w+[\w\-]*\.([a-z]{2,4}|\d+)$/i;
if(!m.test(q)){A.find(".error.email_address").show();
A.find(".error.email_address").text(Globalize.localize("newsletter.signup.error.provideAnEmail",b.global.lang));
j=false
}else{if(m.test(q)==""){A.find(".error.email_address").hide()
}else{A.find(".error.email_address").hide()
}}var k=window.location.hostname,h=window.location.host,w=$("#notifications_form"),o=w.find(".subscribe").attr("href");
var s=w.find(".email_address");
s.val(CryptoJS.AES.encrypt(s.val(),k));
window.location.href="http://"+h+o+"?email="+encodeURIComponent(s.val());
if(j){var n=D.substring(1,D.length);
var z=form2object(n);
if(z.age){if(z.age==="on"){z.age=true
}else{z.age=false
}}else{z.age=false
}var v=JSON.stringify(z);
$.ajax({type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:c,data:v}).done(function(H){var G=H.code;
if(G===0||G===200){x.rememberSigningUp();
r.find(".modal > .section-headline").hide();
r.find(".description").hide();
r.find(".notifications_form").hide();
$("#newsletter-popup-modal .success").removeClass("hide");
setTimeout(function(){x.exit()
},2000)
}else{if(G===910){p.show();
p.text(captchaError.data("message-recaptcha-retry"))
}}})
}}}
});
tccc.initComponent("footer",["footerUtils","newsletterSignup"],function(g,b,e,f){var a=$(this),d={search_url:g.data("search-url"),masthead_url:g.data("masthead-url"),notification_ui_url:g.data("notifications-ui"),subscribe:g.data("subscribe")},c=g.data("newsletter-visit");
if(b.global.captcha_api_key===null){b.global.captcha_api_key=$("html").data("captcha-api")
}e.init(d);
if(c){f.recordPageView();
f.render()
}});
var aryLibs;
var isPublishMode=false;
if($("#publishModeFlexibleFormContainer").length){if($("#publishModeFlexibleFormContainer").val()==="true"){isPublishMode=true
}}if(isPublishMode){aryLibs=["footerUtils","aes","parsley","mobileJquery","featherlight"]
}else{aryLibs=["footerUtils","aes"]
}function global_flexibleformsubmit(){}function getKialaParameterByName(b,a){if(!a){a=window.location.href
}b=b.replace(/[\[\]]/g,"\\$&");
var d=new RegExp("[?&]"+b+"(=([^&#]*)|&|#|$)"),c=d.exec(a);
if(!c){return null
}if(!c[2]){return""
}return decodeURIComponent(c[2].replace(/\+/g," "))
}if(getKialaParameterByName("kialaCallback")==="1"){var kiala={locationhint:getKialaParameterByName("locationhint"),street:getKialaParameterByName("street"),zip:getKialaParameterByName("zip"),city:getKialaParameterByName("city")};
if(kiala.zip.length){localStorage.setItem("kiala",JSON.stringify(kiala))
}}tccc.initComponent(".flexibleformcontainer",aryLibs,function(c,a,b){c.each(function(){var q=$(this),A=q.find(".js-month-selectbox"),o=q.find(".js-day-selectbox"),g=q.find(".js-year-selectbox"),t=q.data("subscribe"),u=window.location.hostname,K,L=q.find("#generic_contactusform"),h=q.find(".top-description"),e=q.find(".minimumAgeError"),w=L.attr("data-form-success-behavior"),J=true,p,Q,r,E,m,n,F,l,k,y="",d=[],j,z={};
if($(".kiala-container").length){var G=$(".kiala-container").attr("data-kiala-country-input");
var D=$(".kiala-container").attr("data-kiala-zip-input");
if($("[name='"+G+"']").length){$("[name='"+G+"']").change(function(){x()
})
}if($("[name='"+D+"']").length){$("[name='"+D+"']").change(function(){x()
})
}if(getKialaParameterByName("kialaCallback")!=="1"){$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){v();
x()
});
v();
x();
$("#kialaButton").click(function(){z={};
localStorage.setItem("kiala","{}")
});
localStorage.setItem("kiala","{}");
setInterval(function(){var R=JSON.parse(localStorage.getItem("kiala"));
if(R&&!_.isEqual(R,z)){z=R;
f(R)
}},1000)
}}if($(".ConditionalFormContainer").length){$(".ConditionalFormContainer").each(function(R){n=$(this).find("> div").data("attr-author-mode");
$(this).find("input").addClass("conditionalInputHide");
$(this).find("textarea").addClass("conditionalInputHide");
$(this).find("select").addClass("conditionalInputHide");
$(this).find(".kiala-container").addClass("conditionalInputHide");
if(!n){$(this).find("> div").css("display","none")
}if(n){$(".flexibleformcontainer .ConditionalFormContainer").css("border","1px solid #4985bb")
}})
}if($("select").length){$("select").each(function(R){var S=$(this).find("option:selected").data("cond-form-container-id");
if(S){$(".ConditionalFormContainer div#"+S).css("display","block");
$(".ConditionalFormContainer div#"+S).find("input").removeClass("conditionalInputHide");
$(".ConditionalFormContainer div#"+S).find("select").removeClass("conditionalInputHide");
$(".ConditionalFormContainer div#"+S).find("textarea").removeClass("conditionalInputHide");
$(".ConditionalFormContainer div#"+S).find(".kiala-container").removeClass("conditionalInputHide");
$(".ConditionalFormContainer div#"+S).find("textarea").removeAttr("data-parsley-excluded");
$(".ConditionalFormContainer div#"+S).find("select").removeAttr("data-parsley-excluded");
$(".ConditionalFormContainer div#"+S).find("input").removeAttr("data-parsley-excluded");
$(".ConditionalFormContainer div#"+S).find(".kiala-container").removeAttr("data-parsley-excluded")
}})
}$("select").on("change",function(T){var U=$(this).closest(".SelectionInput.section").find(".ui-select  select").attr("id");
if($.inArray(U,d)!==-1){var S=d.filter(function(V){return V!==U
});
console.log("toReset",S);
S.forEach(function(V){var W=$("select#"+V).closest(".ConditionalFormContainer").find("div:first");
if($(W).css("display")=="block"){var X=$(W).attr("id");
console.log("closest",W);
$(W).css("display","none")
}$("select#"+V).find("option:first").attr("selected","selected")
})
}if($(l).hasClass("borderClass")&&!n||$(k).hasClass("borderClass")&&!n){$(l).css("display","none");
$(k).css("display","none")
}var R=$(this).find("option:selected").data("cond-form-container-id");
$(this).find("option").each(function(W,X){var V=$(this).data("cond-form-container-id");
if(V&&!n){$(".ConditionalFormContainer div#"+V).css("display","none");
$(".ConditionalFormContainer div#"+V).find("input").addClass("conditionalInputHide");
$(".ConditionalFormContainer div#"+V).find("textarea").addClass("conditionalInputHide");
$(".ConditionalFormContainer div#"+V).find("select").addClass("conditionalInputHide");
$(".ConditionalFormContainer div#"+V).find(".kiala-container").addClass("conditionalInputHide");
$(".ConditionalFormContainer div#"+V).find("input").attr("data-parsley-excluded",true);
$(".ConditionalFormContainer div#"+V).find("select").attr("data-parsley-excluded",true);
$(".ConditionalFormContainer div#"+V).find("textarea").attr("data-parsley-excluded",true);
$(".ConditionalFormContainer div#"+V).find(".kiala-container").attr("data-parsley-excluded",true)
}});
if(R&&!n){$(".ConditionalFormContainer div#"+R).find(".BorderedRichText").addClass("borderClass");
$(".ConditionalFormContainer div#"+R).css("display","block");
$(".ConditionalFormContainer div#"+R).find("input").removeClass("conditionalInputHide");
$(".ConditionalFormContainer div#"+R).find("select").removeClass("conditionalInputHide");
$(".ConditionalFormContainer div#"+R).find("textarea").removeClass("conditionalInputHide");
$(".ConditionalFormContainer div#"+R).find(".kiala-container").removeClass("conditionalInputHide");
$(".ConditionalFormContainer div#"+R).find(".BorderedRichText").removeClass("conditionalInputHide");
$(".ConditionalFormContainer div#"+R).find("textarea").removeAttr("data-parsley-excluded");
$(".ConditionalFormContainer div#"+R).find("select").removeAttr("data-parsley-excluded");
$(".ConditionalFormContainer div#"+R).find("input").removeAttr("data-parsley-excluded");
$(".ConditionalFormContainer div#"+R).find(".kiala-container").removeAttr("data-parsley-excluded");
$(".ConditionalFormContainer div#"+R).find(".BorderedRichText").removeAttr("data-parsley-excluded")
}l=$(".ConditionalFormContainer div#"+R).children().find(".BorderedRichText");
if(R&&!n&&l.length!==0){$(l).css("display","block");
k=$(l).next().addClass("borderClass");
brother2=$(l).is(".borderClass");
$parent=$(l).parent().parent();
console.log("parent",parent);
if(k){$(k).css("display","block")
}d.push(U)
}});
K=function(R){var U=window.location.search.substring(1),T=U.split("&"),S=0,V="";
for(S;
S<T.length;
S++){V=T[S].split("=");
if(V[0]===R){return unescape(V[1])
}}return""
};
function v(){var R=a.global.sizes.current_size;
if(R===a.global.sizes.MOBILE){$("#kialaButton").attr("data-featherlight-iframe-width","320");
$("#kialaButton").attr("data-featherlight-iframe-height","600")
}else{$("#kialaButton").attr("data-featherlight-iframe-width","670");
$("#kialaButton").attr("data-featherlight-iframe-height","465")
}}function x(){var aa=a.global.sizes.current_size;
var Z=$(".kiala-container").attr("data-kiala-endpoint-url").replace("?","");
var U=$(".kiala-container").attr("data-kiala-account-id");
var V=window.location.protocol+"//"+window.location.hostname;
var X=encodeURIComponent(window.location+"?kialaCallback=1&");
var W=$(".kiala-container").attr("data-kiala-css-url");
var Y="";
if(aa===a.global.sizes.MOBILE){Y="&map=off&thumbnails=off"
}var S=Z+"?dspid="+U+"&bckUrl="+X+Y;
if(W&&W.length){S+="&css="+encodeURIComponent(W)
}if(G.length){var T=$("[name='"+G+"']").val();
if(T&&T.length){S+="&country="+encodeURIComponent(T)
}}if(D.length){var R=$("[name='"+D+"']").val();
if(R&&R.length){S+="&zip="+encodeURIComponent(R)
}}$("#kialaButton").attr("href",S)
}function f(R){$(".featherlight-close").trigger("click");
var T="";
var S="";
if(R.locationhint){T+=R.locationhint+"<br>";
S+=R.locationhint+" "
}if(R.street){T+=R.street+"<br>";
S+=R.street+" "
}if(R.city&&R.city.length){S+=R.city;
if(R.zip){T+=", "+R.zip;
S+=" "+R.zip
}}else{if(R.zip){T+=R.zip;
S+=R.zip
}}$(".kiala_description").html(T);
$("#kialaInput").val(T)
}function B(W,R,U){var V=W.val().length;
var S=R-V;
var T=U.find(".characters-remaining-number");
T.text(S);
if(S<0){if(!T.hasClass("msg_error")){T.addClass("msg_error")
}}else{if(T.hasClass("msg_error")){T.removeClass("msg_error")
}}}function M(){$(".FormRow .formRow select, .FormRow .formRow input, .FormRow .formRow textarea").closest("section").css("width","100%");
var R,S;
if($("html").hasClass("mobile")){$(".FormRow .formRow select[data-mobile-override]").each(function(U,T){R=$(T).attr("data-mobile-override");
S=$(T).closest(".section");
S.css("width",R+"%")
});
$(".FormRow .formRow input[data-mobile-override]").each(function(U,T){R=$(T).attr("data-mobile-override");
S=$(T).closest(".section");
S.css("width",R+"%")
});
$(".FormRow .formRow textarea[data-mobile-override]").each(function(U,T){R=$(T).attr("data-mobile-override");
S=$(T).closest(".section");
S.css("width",R+"%")
})
}else{$(".FormRow .formRow select[data-desktop-tablet-override]").each(function(U,T){R=$(T).attr("data-desktop-tablet-override");
S=$(T).closest(".section");
S.css("width",R+"%")
});
$(".FormRow .formRow input[data-desktop-tablet-override]").each(function(U,T){R=$(T).attr("data-desktop-tablet-override");
S=$(T).closest(".section");
S.css("width",R+"%")
});
$(".FormRow .formRow textarea[data-desktop-tablet-override]").each(function(U,T){R=$(T).attr("data-desktop-tablet-override");
S=$(T).closest(".section");
S.css("width",R+"%")
})
}$(".Radio_CheckboxInput.section").css("display","inline-block");
$(".Radio_CheckboxInput.section fieldset[data-type='horizontal'] .ui-radio").css("float","left");
$(".Radio_CheckboxInput.section fieldset[data-type='horizontal'] .ui-btn").css("border-right-width","0");
$(".Radio_CheckboxInput.section fieldset[data-type='horizontal'] .ui-btn.ui-last-child").css("border-right-width","1px");
$(".Radio_CheckboxInput.section fieldset[data-type='vertical'] .ui-radio").css("float","none");
$(".Radio_CheckboxInput.section fieldset[data-type='vertical'] .ui-btn").css("border-right-width","1px");
if(L.find(".terms-conditions-container").length){if(!L.find(".terms-conditions-container input:checked").length){$("#submit").addClass("disabled").prop("disabled",true)
}else{$("#submit").removeClass("disabled").prop("disabled",false)
}}}function N(S,R){return S.indexOf(R,S.length-R.length)!==-1
}function P(R){return !isNaN(parseFloat(R))&&isFinite(R)
}if(!a.global.captcha_api_key){a.global.captcha_api_key=$("html").data("captcha-api")
}q.find("#back").on("click",function(){window.location.href=document.referrer
});
$(document).click(function(){$(".selectboxit").removeClass("selectboxit-open");
$(".selectboxit-options").hide()
});
$(document).on("click",".selectboxit-container",function(R){R.stopPropagation()
});
var H=$("input[name='retUrl']");
if(H.length){if(!H.val().length){H.val(window.location)
}}if($(".SalesForceCapGeminiInput").length){$(".SalesForceCapGeminiInput select").change(function(){var R=$(this).find("option:selected").attr("data-record-type");
$("input[name='recordType']").val(R)
});
var I=$(".SalesForceCapGeminiInput select").find("option:selected").attr("data-record-type");
$("input[name='recordType']").val(I)
}$("label.term-checkbox").click(function(R){R.stopPropagation()
});
$(".form-characters-remaining-message > span").clone().prependTo(".characters-remaining-message");
L.find("textarea").each(function(T,S){var W=$(S);
var R=W.attr("data-maximum-characters");
var U=W.parent(".section").find(".characters-remaining-message");
var V=W.attr("data-character-count-enabled");
if(V==="true"){W.on("keydown keypress keyup",function(){B(W,R,U)
});
B(W,R,U)
}else{U.hide()
}});
M();
window.setInterval(function(){M()
},2500);
if(L.find(".age-checker").length){Q=L.find(".age-checker .js-input-date-of-birth");
r=Q.attr("data-valueformat-order");
E=Q.attr("data-value-format-separator");
m=Q.attr("data-field-display-format");
F=Q.attr("data-capture-dob-data");
if(m==="dayMonthYear"){L.find(".dob-day").prependTo(".js-input-date-of-birth")
}else{if(m==="yearMonthDay"){L.find(".dob-year").prependTo(".js-input-date-of-birth")
}else{}}}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if(a.global.sizes.current_size===a.global.sizes.MOBILE){$("#captcha").attr("data-size","compact")
}else{$("#captcha").removeAttr("data-size")
}});
if(a.global.sizes.current_size===a.global.sizes.MOBILE){$("#captcha").attr("data-size","compact")
}else{$("#captcha").removeAttr("data-size")
}var C=$("#submit");
C.on("click",function(){if($(".captcha-container").length){var T=grecaptcha.getResponse();
var S=$(".recaptcha.error");
if(T.length===0){var R=S.attr("data-message-recaptcha-empty");
S.html(R).show()
}else{S.hide()
}}});
window.global_flexibleformsubmit=function(){if(L.find(".age-checker").length){var X,U,V,aa,T,Z;
X=Q.find("select.js-day-selectbox").val();
U=Q.find("select.js-month-selectbox").val();
V=Q.find("select.js-year-selectbox").val();
J=false;
if(P(U)&&P(X)&&P(V)){Z=U+"/"+X+"/"+V;
var W,Y=window.location.hostname,R=window.location.pathname,S=N(R,".html");
if(R.charAt(R.length-1)==="/"){R=R.substring(0,R.length-1)
}$.ajax({type:"POST",url:"/bin/journey/getcontentpath",data:{domainName:window.location.hostname,vanityUrl:R},success:function(ab){var af=ab.contentPath;
var ad="";
var ae=af.split("/");
for(var ac=0;
ac<=3;
ac++){ad=ad+ae[ac]+"/"
}ad=ad+"jcr:content";
$.ajax({type:"POST",url:"/bin/journey/ageVerificationService",data:{age:Z,parentPath:ad},success:function(ah){var ag="emailToCase";
L.find(".age-checker .error").hide();
if(ah.isEligibleToSignUp){J=true
}else{J=false
}if(F==="true"){$("input[id='birthday']").remove();
if(r==="DDMMYYYY"){aa=X+E+U+E+V
}else{if(r==="YYYYMMDD"){aa=V+E+U+E+X
}else{aa=U+E+X+E+V
}}var aj=$(".js-input-date-of-birth").attr("data-input-name");
var ai=$(".age-checker label").text();
$("<input>").attr({type:"hidden",id:"birthday",name:aj,value:aa}).attr("data-label",ai).appendTo("form")
}s()
}})
}})
}else{L.find(".age-checker .error").html(L.find(".error.adult").attr("data-error-missing-age"));
L.find(".age-checker .error").show()
}}else{s()
}};
function O(S){var V="";
var T=S.find("input, select, textarea");
var R={};
T.each(function(Z,Y){var X=$(Y).attr("name");
var ab=$(Y).val();
var aa=$(Y).attr("data-label");
var W=["dateOfBirth/day","dateOfBirth/month","dateOfBirth/year"];
var ac=$(Y).attr("data-checkbox-val-separator");
if(typeof ac==="undefined"){ac=","
}if(typeof aa==="undefined"||!aa.length){aa=$(Y).attr("name")
}if($(Y).is(":radio")||$(Y).is(":checkbox")){if($(Y).attr("checked")!=="checked"){ab=""
}}if($(Y).hasClass("conditionalInputHide")){return true
}if(typeof $(Y).attr("data-capture-tandcdata")!=="undefined"){if($(Y).attr("data-capture-tandcdata")==="false"){return true
}}if(!_.contains(W,X)){if(X==="_charset_"||X==="g-recaptcha-response"){R[X]=ab
}else{if(R[X+"|"+aa]){if($(Y).is(":checkbox")){if($(Y).attr("checked")==="checked"){R[X+"|"+aa]=R[X+"|"+aa]+ac+ab
}}else{if($(Y).is(":radio")){if($(Y).attr("checked")==="checked"){R[X+"|"+aa]=ab
}}else{R[X+"|"+aa]=R[X+"|"+aa]+"|"+aa+": "+ab
}}}else{R[X+"|"+aa]=ab
}}}});
for(var U in R){if(R.hasOwnProperty(U)){V=V+encodeURIComponent(U)+"="+encodeURIComponent(R[U])+"&"
}}if(V.charAt(V.length-1)==="&"){V=V.substring(0,V.length-1)
}return V
}function s(){var S=L.find(".captcha-container .error");
var U=L.find("input[name='recaptcha_response_field']").val();
var R=true;
var T=true;
S.hide();
if(L.find(".terms-conditions-container").length){if(!L.find(".terms-conditions-container input:checked").length){R=false
}}if($(".captcha-container").length){if((grecaptcha.getResponse()).length===0){T=false
}}if($("#form_action").length){formAction=$("#form_action").val()
}var W="/bin/journey/genericContactUsFormServlet";
if(J){if(R){if(T){var V=O(L);
$.ajax({type:"POST",url:W,datatype:"html",data:V,statusCode:{910:function(){var X=L.find(".error.recaptcha");
S.show();
S.text(X.attr("data-message-recaptcha-retry"))
},500:function(){var X=L.find(".error.recaptcha");
S.show();
S.text(X.attr("data-message-recaptcha-retry"))
}}}).done(function(Y,aa,X){var Z=X.status;
if(Z===200){if(w==="clearFormShowMessage"){L[0].reset();
M()
}else{L.hide()
}q.find(".success").removeClass("hide").focus()
}else{}})
}else{S.show();
S.text(S.attr("data-message-recaptcha-empty"))
}}else{}}else{L.find(".age-checker .error").html(L.find(".error.adult").attr("data-error-minimum-age"));
L.find(".age-checker .error").show()
}}L.find(".clear-button").click(function(){L[0].reset();
M()
});
L.find(".terms-conditions-container input").change(function(){M()
});
L.attr("action","javascript: global_flexibleformsubmit();")
})
});
tccc.initComponent(".featured-text-links",[],function(b,a){b.each(function(){var f=$(this),e=f.find(".link-element span"),d=$("html");
function c(){if(d.hasClass("mobile")){a.util.truncate_text(e,2)
}}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){c()
});
c()
})
});
define("featuredSlideshow",[],function(){return{slider:null,init:function(b,c){var a={arrowsNav:true,arrowsNavAutoHide:true,autoCenter:true,autoHeight:false,autoScaleSlider:true,controlNavigation:"bullets",controlsInside:false,fadeinLoadedSlide:false,globalCaption:true,imageAlignCenter:false,imageScaleMode:"none",imageScalePadding:0,keyboardNavEnabled:false,loop:true,loopRewind:true,navigateByClick:true,numImagesToPreload:2,sliderDrag:false,slidesSpacing:0,autoPlay:{delay:+c,enabled:true,pauseOnHover:true},video:{autoHideControlNav:true}};
this.slider=b.royalSlider(a).data("royalSlider");
if(this.slider.numSlides<2){b.addClass("no-bullets")
}this.slider.ev.on("rsAfterContentSet",function(d,f){if(f.videoURL){b.find(" .rsSlide").each(function(){if($(this).find(".icon-play").length===0){$(this).find(".rsPlayBtnIcon").html('<div class="center-vertically"><i class="icon-play theme-link knockout-bgcolor"></i></div>')
}})
}});
if((/iphone|ipad|ipod/gi).test(navigator.appVersion)){$(".royalSlider").addClass("ios")
}}}
});
tccc.initComponent(".m-f-slideshow .royalSlider",["featuredSlideshow"],function(c,a,b){c.each(function(){var d=$(this).find("> section.rsCaption").length===1;
b.init($(this),7000,true);
if(d){$(this).find(".rsBullets").remove()
}})
});
define("featuredSlideshow",[],function(){return{slider:null,init:function(b,c){var a={arrowsNav:true,arrowsNavAutoHide:true,autoCenter:true,autoHeight:false,autoScaleSlider:true,controlNavigation:"bullets",controlsInside:false,fadeinLoadedSlide:false,globalCaption:true,imageAlignCenter:false,imageScaleMode:"none",imageScalePadding:0,keyboardNavEnabled:false,loop:true,loopRewind:true,navigateByClick:true,numImagesToPreload:2,sliderDrag:false,slidesSpacing:0,autoPlay:{delay:+c,enabled:true,pauseOnHover:true},video:{autoHideControlNav:true}};
$(window).load(function(){this.slider=b.royalSlider(a).data("royalSlider");
if(this.slider.numSlides<2){b.addClass("no-bullets")
}this.slider.ev.on("rsAfterContentSet",function(d,f){if(f.videoURL){b.find(" .rsSlide").each(function(){if($(this).find(".icon-play").length===0){$(this).find(".rsPlayBtnIcon").html('<div class="center-vertically"><i class="icon-play theme-link knockout-bgcolor"></i></div>')
}})
}});
if((/iphone|ipad|ipod/gi).test(navigator.appVersion)){$(".royalSlider").addClass("ios")
}})
}}
});
tccc.initComponent(".m-f-slideshow .royalSlider",["featuredSlideshow"],function(c,a,b){c.each(function(){var d=$(this).find("> section.rsCaption").length===1;
b.init($(this),7000,true);
if(d){$(this).find(".rsBullets").remove()
}})
});
if(window.tccc!==undefined){tccc.initComponent(".featured-flicks",[],function(b,a){if(b.find(".brightcove").length){brightcove.createExperiences()
}a.util.truncate_text(".featured-flicks .promo-wrapper .title",2);
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){a.util.truncate_text(".featured-flicks .promo-wrapper .title",2)
});
$("#featured-flicks-mobile #full-width-slider").royalSlider({arrowsNav:false,loop:false,keyboardNavEnabled:true,controlsInside:true,imageScaleMode:"fill",arrowsNavAutoHide:false,autoScaleSlider:true,controlNavigation:"bullets",thumbsFitInViewport:false,navigateByClick:true,startSlideId:0,transitionType:"move",globalCaption:true,deeplinking:{enabled:true,change:false}})
})
}if($(".cq-wcm-edit").size()<=0){if(window.tccc!==undefined){tccc.initComponent(".m-faq-container",[],function(b,a){b.each(function(){var f=$(this),d=f.find(".faq-directories"),c=f.find(".faq-questions"),e=f.find(".mobile-collapse");
var g=setInterval(function(){if(document.readyState!=="complete"){return
}clearInterval(g);
c.css("height",Math.floor(d.height()))
},50);
d.on("click","li",function(){if(!$(this).hasClass("selected")){$(this).siblings().removeClass("selected").end().toggleClass("selected",true).focus();
c.find("#"+$(this).data("list-id")).removeClass("hidden").siblings().addClass("hidden")
}return
});
e.on("click","a",function(h){h.preventDefault();
$(this).toggleClass("collapsed");
if($(this).hasClass("collapsed")){d.find("li.selected").siblings().addClass("hidden");
$(this).find("i").removeClass("icon-angle-up").addClass("icon-angle-down")
}else{d.find("li").removeClass("hidden");
$(this).find("i").removeClass("icon-angle-down").addClass("icon-angle-up")
}});
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if(a.global.sizes.current_size!==a.global.sizes.MOBILE){e.find("a").toggleClass("collapsed",false);
d.find("li").removeClass("hidden");
$(this).find("i").removeClass("icon-angle-down").addClass("icon-angle-up")
}})
})
})
}}tccc.initComponent(".facebook-like-button",[],function(){var c=$(location).attr("href");
if(c.charAt(c.length-1)==="/"){c=c.substring(0,c.length-1)
}if(typeof CQ==="undefined"){var b=tccc.global.get_OptanonCookiePrefrence();
if((!($.isEmptyObject(b)))&&(b.functionalityCookieActive)||(b.allCookiesAllowed)){a()
}else{if($.isEmptyObject(b)){a()
}}function a(){setTimeout(function(){$(".facebook-like-button").append('<iframe src="//www.facebook.com/plugins/like.php?href='+c+'&amp;layout=standard&amp;action=like&amp;show_faces=false&amp;send=false&amp;height=35" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:30px; width: 100%;" allowTransparency="true"></iframe>')
},500)
}}});
tccc.initComponent(".erropean-cookie-bar-wp",[],function(f){var b=$.cookie("erropean-cookie-shown");
var d=f.find(".main").data("attribute-cookie-redirect-url");
var a=(d==window.location.pathname);
if((b===undefined||b!=="true")&&!$("body").hasClass("cq-wcm-edit")&&!a||(/eucookie/.test(window.location.href))){f.css("display","block");
var e=f.find(".btn-continue");
e.on("click",function(){f.css("display","none");
try{$.cookie("erropean-cookie-shown","true",{expires:20*365,path:"/"})
}catch(g){}});
var c=$(f.find(".btn-close").add(f.find(".btn-donotcontinue")));
c.on("click",function(){var h=$.cookie();
for(var g in h){$.removeCookie(g)
}window.location.replace(d)
})
}});
if(window.tccc!==undefined){tccc.initComponent(".m-stay-sip .DynamicParsys_container",[],function(b,a){setTimeout(function(){b.each(function(){var h=$(this).offset(),f=$(this).find("li.thumb_wrapper"),e=30+((f.size())*260),d=$(this).find(".callouts-container"),j,g=[];
function c(m,l){var k=$(m).offset();
if(k.left<(l.left-50)||k.left>l.right){$(m).css("visibility","hidden")
}else{$(m).css("visibility","visible")
}}if(h){h.right=h.left+900
}d.css("width",e+"px");
f.on("DOMNodeInserted",'div[class*="placeholder"]',function(){var k="."+$(this).attr("class").replace("placeholder","element");
g.push(k);
setTimeout(function(){c(k,h)
},1000)
});
$(this).scroll(function(){clearTimeout(j);
j=setTimeout(function(){$(g).each(function(k,l){c(l,h)
})
},1000)
})
})
},500)
})
}tccc.initComponent(".m-stay-sip .dsl-wrapper-publish",[],function(b,a){b.each(function(){var m=$(this),l=m.find(".hidden_callouts"),g=m.find(".hidden_callouts .callout"),c=m.find(".dynamic-section-links-container"),j=m.find(".side-navigation-colum"),k=$("html"),n=0,h;
function f(p){var s=[],r=[],q,o;
for(q=0;
q<g.length;
q++){s.push(g[q]);
if(s.length===p||q===g.length-1){o=$('<div class="slideshow_item"></div>');
o.append(s);
r.push(o);
s=[]
}}c.append(r)
}function e(){var o={globalCaption:true,addActiveClass:false,arrowsNav:false,startSlideId:0,transitionSpeed:350,slidesSpacing:4,loop:true,autoHeight:false,fadeinLoadedSlide:false,controlNavigationSpacing:0,controlNavigation:"none",imageAlignCenter:true,loopRewind:false,numImagesToPreload:4,usePreloader:true,keyboardNavEnabled:true,sliderDrag:false,sliderTouch:true,navigateByClick:true,allowCSS3:false};
h=c.royalSlider(o).data("royalSlider");
m.find(".rsOverflow").css("opacity","0.99");
if((k.hasClass("desktop")||k.hasClass("big_desktop"))&&g.length<=4){j.hide()
}else{if(k.hasClass("tablet")&&g.length<=3){j.hide()
}else{if(k.hasClass("mobile")&&g.length===1){j.hide()
}else{j.show()
}}}}function d(){var o;
if(a.global.sizes.current_size===a.global.sizes.TABLET){o=l.data("tablet-items-page")
}else{if(a.global.sizes.current_size===a.global.sizes.MOBILE){o=l.data("mobile-items-page")
}else{o=l.data("desktop-items-page")
}}if(n!==o){n=o;
if(h){h.destroy()
}_.defer(function(){c.find("> div").remove();
f(o);
setTimeout(function(){e()
},1000)
})
}}m.find(".side-navigation-colum.left").on("click",function(){if(h){h.prev()
}});
m.find(".side-navigation-colum.right").on("click",function(){if(h){h.next()
}});
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,d);
d()
})
});
tccc.initComponent(".dyn-latest-short",[],function(b,a){b.each(function(){var f=$(this),e=f.find(".lead-title > span"),c=f.find(".dls-list ul li > a > span");
function d(){a.util.truncate_text(e,2);
a.util.truncate_text(c,2)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){d()
});
d()
})
});
tccc.initComponent(".topic-category-callouts",[],function(b,a){b.each(function(){var e=$(this),d=e.find("h3");
function c(){a.util.truncate_text(d,2)
}c();
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){c()
})
})
});
$(document).ready(function(){$("#topicfilter-seemore").on("click",function(a){$(this).find(".icon-caret-down").toggleClass("icon-caret-up");
$(this).parent().find(".seemore-wrapper").slideToggle();
$(this).find("span").toggleClass("text-show");
a.preventDefault()
})
});
tccc.initComponent(".corporate-tile-promo",[],function(b,a){b.each(function(){var f=$(this),e=f.find("h2"),d=f.find("p");
function c(){a.util.truncate_text(e,3);
a.util.truncate_text(d,3)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){c()
});
c()
})
});
tccc.initComponent(".content-topic-callout",[],function(b,a){b.each(function(){var f=$(this),e=f.find("h2"),d=f.find(".meta > h3 a");
function c(){a.util.truncate_text(e,4);
a.util.truncate_text(d,2)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){c()
});
c()
})
});
tccc.initComponent(".content-spotlight",[],function(b,a){b.each(function(){var d=b.find(".content");
function c(){a.util.truncate_text(d,3)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){c()
});
c()
})
});
tccc.initComponent(".search-result",[],function(a){a.each(function(){var l=$(this),k=l.find(".total-pages").text(),j=l.find(".entries-result"),b=j.data("url"),o=j.data("query"),e=l.find(".results-quantity").data("limit"),g=l.find(".side-navigation-colum.left"),n=l.find(".side-navigation-colum.right"),p=parseInt($.trim(l.find(".total-entries-returned").text()),10),h=p-e,d=p-h,c=d-(e-1),m=1,f=$("html");
if(f.hasClass("mobile")){tccc.util.truncate_text(".search-result .heading-xlarge span",1)
}$(tccc.global).bind(tccc.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(q,r){if(r.current_size===tccc.global.sizes.MOBILE){tccc.util.truncate_text(".search-result .heading-xlarge span",1)
}})
})
});
tccc.initComponent(".search-results-box",["aws-sdk-2.187.0.min","moment"],function(c,a,b){c.each(function(){var f,m=new Date(),v,aG=new Date(m.getFullYear(),0,1).toISOString(),a3=new Date(m.getFullYear(),m.getMonth(),1).toISOString(),bk=moment().startOf("week").toDate().toISOString(),bb={query:"",queryParser:"structured",facet:'{"cq_last_published_date":{},"content_type":{},"topic":{},"cq_tags":{}}'},bl={query:"",sort:"sortdatedesc desc",queryParser:"structured",facet:'{"cq_last_published_date":{"buckets":["[\''+aG+"',}\",\"['"+a3+"',}\",\"['"+bk+'\',}"]},"content_type":{"sort":"count","size":100},"topic":{"sort":"count","size":100},"cq_tags":{"sort":"count","size":100}}'},bj,av,G,z,bc,al,bt,bf,aX,ai,E,bg,an,aN,aS,j,ab,a2,a9,aV,Q,am,aQ,bs,au,U,T,P,h,a1,a5,H,q,aI,aL,aY,S,ba,N,ad,aK,u,aM,k,ay,aq,ac,aw,w=0,bi=0,az=0,aF=0,bm,aO,V,ar,bd=0,bo,D,aD,t,x,bn,r,bp,aH=[],a4,aB=0,aW=0,bh=0,M,l,X,aJ,ap,aU,J,R,C,be,p,ao=$(".entries-result.selected"),aj=$(".searchTermList"),e=$(".contentTypeBucket"),ag=$(".topicBucket"),aZ=$(".tagBucket"),y=$(".dateBucket"),g=$(".user-filters"),B=$("li.allFacets"),br=$(".total-entries-returned"),o=$(".entries-per-page"),aP=$(".showing-results-text"),ak=$(".total-pages"),F=$(".current-page"),af=$(".user-filters"),a7=$(".you-are-viewing"),O=$(".pagination-controls"),d=$(".hasResults"),s=$(".noResults"),aa=$(".results-quantity"),a8=$(".alsoTry"),aA=false,ax,at=false,a0,bq=$(".alsoTryWrapper");
var aR;
var K=function(bv){if(bv){var bw=moment.utc(bv).format("LL");
var bu=new Date(bw);
return bu
}else{return""
}};
var aC=function(bu){if(bu){var bv=function(bx){var bw=["January","February","March","April","May","June","July","August","September","October","November","December"];
return bw[bx-1]
};
monthName=bv(bu.getMonth()+1).substring(0,3);
formattedDate=monthName.toUpperCase()+" "+bu.getDate()+", "+bu.getFullYear();
return formattedDate
}else{return""
}};
function Y(){currentPage=1;
bj=$(".search-results-box .search .search-query-field").val();
bj=decodeURIComponent(bj);
$(".search-query-field").val(bj);
v=aJ+"_"+M;
bb.query=bj;
bl.query=bj;
bb.size=bo;
bl.size=bo;
if(at){bb.filterQuery=a0
}else{bb.filterQuery="(and  is_black_listed: 'false' (or (and site:'"+v+"' (or content_type: 'article'  content_type: 'recipe' content_type: 'profile' content_type: 'brand' content_type: 'tpArticle' content_type: 'blog' content_type: 'debate' content_type: 'package' content_type: 'product') ) (or (and site:'"+v+"' is_downloadable: 'true' content_type: 'image')) (or  (and content_type: 'video' (or site:'"+v+"' override_video_info: '"+v+"')))) (not (and site: '"+v+"' is_downloadable:'false')) )"
}if(at){bl.filterQuery=a0
}else{bl.filterQuery="(and  is_black_listed: 'false' (or (and site:'"+v+"' (or content_type: 'article'  content_type: 'recipe' content_type: 'profile' content_type: 'brand' content_type: 'tpArticle' content_type: 'blog' content_type: 'debate' content_type: 'package' content_type: 'product') )  (or (and site:'"+v+"' is_downloadable: 'true' content_type: 'image')) (or  (and content_type: 'video' (or site:'"+v+"' override_video_info: '"+v+"')))) (not (and site: '"+v+"' is_downloadable:'false')))"
}bb["return"]="content_type,is_spotlight_entry,misspellings,synonyms,search_term,has_lead_image,show_in_brand_logo_grid,long_title,cq_last_published_date,tags_and_topics_details,vanity_url,vanity_paths,path,short_title,dc_title,section,formatted_publish_date,alt,image_title,suggested_term,author_profile,short_description,override_video_info,brand_log_url,resize_image_url,dc_description,autogenerated_tags_commercial_item,autogenerated_tags_date,autogenerated_tags_event,autogenerated_tags_location,autogenerated_tags_organization,autogenerated_tags_person,autogenerated_tags_quantity,autogenerated_tags_title,autogenerated_tags_other";
bl["return"]="content_type,is_spotlight_entry,misspellings,synonyms,search_term,has_lead_image,show_in_brand_logo_grid,long_title,cq_last_published_date,tags_and_topics_details,vanity_url,vanity_paths,path,short_title,dc_title,section,formatted_publish_date,alt,image_title,suggested_term,author_profile,short_description,override_video_info,brand_log_url,resize_image_url,dc_description,autogenerated_tags_commercial_item,autogenerated_tags_date,autogenerated_tags_event,autogenerated_tags_location,autogenerated_tags_organization,autogenerated_tags_person,autogenerated_tags_quantity,autogenerated_tags_title,autogenerated_tags_other";
if(aU){bb.queryOptions="{fields:["+aU+"]}"
}else{bb.queryOptions='{fields:["author^5000","synonyms^1000","search_term^1000","misspellings^1000"]}'
}if(J){bl.queryOptions="{fields:["+J+"]}"
}$(".showing-results-text #textSearched").text(' " '+bj+' "');
bd=0;
if(bb.query.length!==0){var bu="true";
p=false;
A(bb,bu,p)
}B.hide();
if(bd===0){$(".side-navigation-colum.left").hide()
}$(".side-navigation-colum.right").unbind("click").bind("click",function(bv){bv.stopPropagation();
bv.preventDefault();
L()
});
$(".side-navigation-colum.left").unbind("click").bind("click",function(bv){bv.stopPropagation();
bv.preventDefault();
n()
})
}function ae(bw){if(bw.query.indexOf("~1")===-1){var bx=bw.query.replace("+"," ").replace("|"," ").replace("=","").replace("~","");
var by="";
var bv=bx.split(" ");
for(var bu=0;
bu<bv.length;
bu++){if(by.length>0){by=by+"+"
}by=by+"'"+bv[bu]+"~1'"
}bw.query=by
}return bw
}function A(bv,bw,bu){bv=ae(bv);
aR.search(bv,function(bA,bP){if(bA){console.log(bA,bA.stack);
return false
}else{console.log("data",bP);
$("body").animate({scrollTop:$("#search-result").offset().top},"slow");
var bJ=[],bC=[],by=[],bN=false;
if(bw=="true"){aj.empty()
}if(bw=="false"&&bu&&!aA){$(".searchTermList").hide()
}else{$(".searchTermList").show()
}if(bw=="true"&&!(bu)){$(".searchTermList").show()
}e.empty();
ag.empty();
aZ.empty();
y.empty();
g.empty();
ao.empty();
s.hide();
if(bw=="true"){bq.hide()
}z=bP;
if(z&&bw=="false"){if(z.hits){bf=z.hits.found
}}aa.show();
br.text(" "+bf);
O.show();
d.show();
if(bf<bo&&bw=="true"){o.text((bd+1)+" - "+((bd)+bf))
}else{o.text((bd+1)+" - "+((bd)+(bo)))
}if(bf<bo&&bw=="false"){o.text((bd+1)+" - "+((bd)+bf))
}else{if(currentPage===D){o.text((bd+1)+" - "+(bf))
}else{o.text((bd+1)+" - "+((bd)+(bo)))
}}$(".search-results-box span.searchText").text('"'+bj+'"');
if((bw=="false")&&bf==0){s.show();
d.hide();
o.text((bd)+" - "+((bd)));
$(".showing-results-text.noResults .searchText").text(' "'+bj+'"');
O.hide()
}if((bw=="false")&&bf<bo){$(".side-navigation-colum.right").hide()
}else{if((bd+bo)<bf){$(".side-navigation-colum.right").show()
}}D=Math.ceil(bf/bo);
ak.text(" "+D);
F.text(currentPage);
if(aH.length>0){aT()
}var bB=0;
hitArray=z.hits.hit;
if(bw=="true"){$.each(hitArray,function(bR,bU){bB++;
var bT=bU.fields;
var bQ=true;
var bS=bT.content_type;
if(bw=="true"&&(bS=="profile")){bF(bT,bQ)
}});
$.each(hitArray,function(bZ,bX){bB++;
var bU=bX.fields;
var bY=bU.is_spotlight_entry;
var bV=bU.misspellings;
var bW=bU.synonyms;
var bT=bU.search_term;
var b0=true;
if(bw=="true"&&bY){if(bj.toUpperCase()==bT.toUpperCase()){b0=true
}if(b0==false&&bV){bV.map(function(b2){return b2.toUpperCase()
});
b0=I(bV,bj.toUpperCase())
}if(b0==false&&bW){bW=bW.replace(/'/g,'"');
bW=JSON.parse(bW);
for(var bS in bW){if(bj.toUpperCase()==bS.toUpperCase()){b0=true
}else{var bR=bW[bS].map(function(b2){return b2.toUpperCase()
});
b0=I(bR,bj.toUpperCase())
}}}}if(bw=="true"&&bY){bF(bU,b0)
}if(hitArray.length==(bZ+1)&&bw=="true"){if(bl.query.length!==0){bl.start=0;
var bQ="false";
if(history.pushState){var b1=window.location.protocol+"//"+window.location.host+window.location.pathname+"?q="+bj;
window.history.pushState({path:b1},"",b1)
}bu=false;
A(bl,bQ,bu)
}}});
if(hitArray.length==0){if(bl.query.length!==0){bl.start=0;
var bD="false";
if(history.pushState){var bI=window.location.protocol+"//"+window.location.host+window.location.pathname+"?q="+bj;
window.history.pushState({path:bI},"",bI)
}bu=false;
A(bl,bD,bu)
}}}if(bw=="false"){$.each(hitArray,function(bS,bV){bB++;
var bU=bV.fields;
var bR=bU.is_spotlight_entry;
var bT=bU.content_type;
var bW,bX;
var bQ=false;
if(bT&&bT=="profile"){bW=true
}else{bW=false
}if(bT&&bT=="package"){isPackage=true
}else{isPackage=false
}if(bR&&bR=="true"){bX=true
}else{bX=false
}if(bw=="false"&&!bW&&!bX){bF(bU,bQ)
}if(bw=="false"&&isPackage&&bX){bF(bU,bQ)
}})
}function bF(b0,b4){var b0=b0,bY="true",bU,bZ,bQ,b3="",bS="";
var bX,bW;
aI=[];
bg=b0.resize_image_url;
a5=b0.has_lead_image;
H=b0.show_in_brand_logo_grid;
bc=b0.long_title;
al=b0.cq_last_published_date;
if(b0.tags_and_topics_details){aI=JSON.parse(b0.tags_and_topics_details)
}E=b0.vanity_url;
aL=b0.vanity_paths;
aY=b0.path;
P=b0.page_title;
h=b0.long_title;
S=b0.short_title;
ba=b0.dc_title;
a1=b0.section;
ai=b0.content_type;
a4=b0.formatted_publish_date;
bX=b0.alt;
bW=b0.image_title;
x=b0.suggested_term;
bn=b0.search_term;
R=b0.is_spotlight_entry;
r=b0.spotlight_label;
q=b0.author_profile;
bt=b0.short_description;
l=b0.misspellings;
X=b0.synonyms;
aD=b0.override_video_info;
if(!(bW)){if(h){bW=h
}else{bW=""
}}if(q){q=q.replace(/'/g,'"');
q=JSON.parse(q);
ac=q.is_active_author;
aw=q.author_search_link
}if(ai=="profile"&&ac){if(bB==1){bQ="true"
}if(q.author_description){bt=q.author_description
}else{bt=""
}if(aw){E=aw
}}if(ai=="profile"&&!ac&&aw){E=aw
}if(ai=="profile"&&!ac&&!aw){b4=false
}if(!(bt)){bt=""
}switch(ai){case"profile":if(!q.author_description){bt=""
}h=C+":<strong class='theme-secondary' > "+h+"</strong>";
if(b0.resize_image_url){bg=b0.resize_image_url
}else{if(q.author_image_small){bg=q.author_image_small
}else{bU="true"
}}break;
case"video":var bV=aJ.toLowerCase()+"/"+M.toLowerCase();
a1=ai;
bX=bc;
bW=bc;
if(aL){for(bK=0;
bK<aL.length;
bK++){if(aL[bK].indexOf(bV)>-1){if(be==false){aL[bK].indexOf(M.toLowerCase());
E=aL[bK].substring((aL[bK].indexOf(bV)+5));
break
}else{E=aL[bK];
break
}}}}if(b0.resize_image_url){bg=b0.resize_image_url
}else{if(q.author_image_small){bg=q.author_image_small
}}aD=JSON.parse(aD);
if(aD&&aD.title){h=aD.title
}if(aD&&aD.description){bt=aD.description
}if(aD&&aD.coverImage&&(aD.coverImage.trim()).length!==0){bg=aD.coverImage
}break;
case"image":if(E){E=E
}else{if(aY){E=aY
}}if(b0.resize_image_url){bg=b0.resize_image_url
}else{if(q.author_image_small){bg=q.author_image_small
}else{bU="true"
}}break;
case"brand":if(b0.brand_log_url){bg=b0.brand_log_url
}else{bU="true"
}break;
default:if(b0.resize_image_url){bg=b0.resize_image_url
}else{bU="true"
}}if(a5||H){bY="false"
}if(h){h=Z(h)
}if(ai=="image"){h=ba;
bW=ba;
if(typeof b0.dc_description!=="undefined"){bt=b0.dc_description
}else{bt=""
}}var bR=K(al);
var bT=aC(bR);
if(a1&&bT){bZ=a1+" | "+bT
}if(!a1&&bT){bZ=bT
}if(a1&&!bT){bZ=a1
}if(ai==="profile"||ai==="package"){bZ=""
}if(b4&&x){bq.show();
a8.text(av.alsoTryLabel);
$(".alsoTryWrapper span strong").text(x);
var b2=x;
$(".alsoTryWrapper span.theme-secondary-link a").click(function(b6){b6.preventDefault();
$(".search .search-query-field").val(b2);
Y()
})
}if(bw=="true"&&b4==true){b3=h;
b1='<li class="entry '+bB+(bY?"":"no-image")+(bQ?" author-entry":"")+'">';
if(bg){b1+='<a class="entry-image '+(bU?"noBrandLogo":"")+'" href="'+E+'"> <img src="'+bg+'" alt="'+bX+'" title="'+bW+'"></a>'
}b1+='<div class="entry-content"><a class="entry-headline" href="'+E+'">'+h+'<span class="theme-secondary headline"></span></a><span class="entry-date">'+bZ+'</span><p class="theme-font-secondary description">'+bt+"</p></div></li>";
if(aI&&aI.length>0){bS=bS+'<div class="entry-tags tags"> <ul class="topicListWrapper">';
var b5=aI;
b5.forEach(function(b6){var b8=(b6.tagName).split("+").join(" ");
b8=b9(b8);
function b9(cb){return decodeURIComponent(cb)
}function b7(cc){if(be&&b6&&cc){var cb="/content/journey/"+aJ.toLowerCase()+"/"+M.toLowerCase()+b6.tagPath;
if(cc.pagPath===cb){return cc.pagPath
}}else{return cc.pagPath===(b6.tagPath)
}}var ca=ax.find(b7);
if(ca){bS=bS+'<li><a href="'+ca.pagPath+'" style="color:'+ca.color+";border:1px solid "+ca.color+';background:#FFFFFF">'+ca.tagTitle+"</a></li>"
}});
bS=bS+"</ul></div>";
$(".searchTermList li").each(function(b6){if(($(this).hasClass(bB))){$(this).find(".entry-content").append(bS)
}})
}if(!(ai=="profile")){$(".searchTermList .entry-headline").prepend("<span class='spotlightText'>Spotlight: </span>")
}}else{if(bw=="false"&&b4==false){if(!(b3===h)){var b1='<li class="entry '+bB+(bY?"":"no-image")+(bQ?" author-entry":"")+'">';
if(bg){b1+='<a class="entry-image '+(bU?"noBrandLogo":"")+'" href="'+E+'"> <img src="'+bg+'" alt="'+bX+'" title="'+bW+'"></a>'
}b1+='<div class="entry-content"><a class="entry-headline" href="'+E+'">'+h+'<span class="theme-secondary headline"></span></a><span class="entry-date">'+bZ+'</span><p class="theme-font-secondary description">'+bt+"</p></div></li>";
ao.append(b1);
if(aI&&aI.length>0){bS=bS+'<div class="entry-tags tags"> <ul class="topicListWrapper">';
var b5=aI;
b5.forEach(function(b6){var b8=(b6.tagName).split("+").join(" ");
b8=b9(b8);
function b9(cb){return decodeURIComponent(cb)
}function b7(cc){if(be&&b6&&cc){var cb="/content/journey/"+aJ.toLowerCase()+"/"+M.toLowerCase()+b6.tagPath;
if(cc.pagPath===cb){return cc.pagPath
}}else{return cc.pagPath===(b6.tagPath)
}}var ca=ax.find(b7);
if(ca){bS=bS+'<li><a href="'+ca.pagPath+'" style="color:'+ca.color+";border:1px solid "+ca.color+';background:#FFFFFF">'+ca.tagTitle+"</a></li>"
}});
bS=bS+"</ul></div>";
$(".entries-result.selected li").each(function(b6){if(($(this).hasClass(bB))){$(this).find(".entry-content").append(bS)
}})
}}}}}facetsObj=z.facets;
function bO(bQ){facetsToRemove=[];
aH.forEach(function(bR){facetsToRemove.push(bR.facetValue)
});
bQ=bQ.filter(function(bR){return facetsToRemove.indexOf(bR.value)===-1
});
return bQ
}bm=facetsObj.content_type.buckets;
var bM=bO(bm);
for(var bK=0;
bK<bM.length;
bK++){var bG=bM[bK].value;
var bH=bM[bK].count;
if(bG==="article"){bG=j
}if(bG==="video"){bG=aS
}if(bG==="profile"){bG=bs
}if(bG==="package"){bG=U
}if(bG==="tpArticle"){bG=aV
}if(bG==="image"){bG=ab
}if(bG==="blog"){bG=a2
}if(bG==="recipe"){bG=a9
}if(bG==="iframe"){bG=am
}if(bG==="brand"){bG=aQ
}if(bG==="debate"){bG=Q
}if(bG==="product"){bG=au
}var bL="<a href = '#' class='facetLink' id ='contentTypeList' data-facetname='content_type' data-facetval= "+bM[bK].value+"> "+bG+" ("+bH+") </a>";
e.append($('<li class="theme-secondary-link"></li>').html(bL))
}aO=facetsObj.topic.buckets;
var bE=bO(aO);
for(var bK=0;
bK<bE.length;
bK++){var bG=bE[bK].value;
var bH=bE[bK].count;
var bL="<a href = '#' class='facetLink' data-facetname='topic' data-facetval= '"+bE[bK].value+"'> "+bG+" ("+bH+")  </a>";
ag.append($('<li class="theme-secondary-link"></li>').html(bL))
}V=facetsObj.cq_tags.buckets;
var bx=bO(V);
for(var bK=0;
bK<bx.length;
bK++){var bG=bx[bK].value;
var bH=bx[bK].count;
var bL="<a href = '#' class='facetLink' data-facetname='cq_tags' data-facetval= '"+bx[bK].value+"'> "+bG+" ("+bH+")  </a>";
if(!((bG.indexOf("journey:")>=0)||(bG.indexOf("Journey:")>=0))){aZ.append($('<li class="theme-secondary-link"></li>').html(bL))
}}var bz=facetsObj.cq_last_published_date.buckets;
if(bz[0]&&bz[0].count>0){y.append($('<li class="theme-secondary-link"><a href="#" class="facetLink dateRange" data-facetname="cq_last_published_date" data-dateType="THIS YEAR" data-facetval="'+aG+'">'+av.thisYear+" ("+bz[0].count+")</a></li>"))
}if(bz[1]&&bz[1].count>0){y.append($('<li class="theme-secondary-link"><a href="#" class="facetLink monthRange" data-facetname="cq_last_published_date" data-dateType="THIS MONTH" data-facetval="'+a3+'">'+av.thisMonth+" ("+bz[1].count+")</a></li>"))
}if(bz[2]&&bz[2].count>0){y.append($('<li class="theme-secondary-link"><a href="#" class="facetLink weekRange" data-facetname="cq_last_published_date" data-dateType="THIS WEEK" data-facetval="'+bk+'">'+av.thisWeek+" ("+bz[2].count+")</a></li>"))
}if(aH.length>0){aH.forEach(function(bQ){var bR=bQ.facetType;
if(bR=="cq_last_published_date"){if(bQ.dateType=="THIS YEAR"){$(".dateRange").hide()
}if(bQ.dateType=="THIS MONTH"){$(".monthRange").hide()
}if(bQ.dateType=="THIS WEEK"){$(".weekRange").hide()
}}})
}}})
}function Z(bu){var bv='<span class="theme-secondary">';
var bw="</span>";
bu=bu.replace("{",bv);
bu=bu.replace("}",bw);
return bu
}function I(bv,bu){return(bv.indexOf(bu)>-1)
}function a6(){$("input.search-query-field").keydown(function(bv){if(bv.keyCode==13){bv.preventDefault();
var bu=$(this).val();
$("input.search-query-field").val(bu)
}});
$("#search .search-query-field").on("keydown",function(bv){var bu=bv.which;
if(bu==13){userSearchHeadertest=$(".search-box #search .search-query-field").val();
$(".search-query-field").val(userSearchHeadertest);
at=false;
aH.splice(0,aH.length);
Y()
}});
$(".search .search-query-field").on("keydown",function(bv){var bu=bv.which;
if(bu==13){userSearchHeadertest=$(".search .search-query-field").val();
$(".search-query-field").val(userSearchHeadertest);
at=false;
aH.splice(0,aH.length);
Y()
}});
$("#search .icon-search").click(function(){at=false;
aH.splice(0,aH.length);
G=$(".search-box #search .search-query-field").val();
$(".search .search-query-field").val(G);
$("#searchButton").click()
});
$("#searchButton").click(function(){at=false;
aH.splice(0,aH.length);
Y()
});
e.on("click",".facetLink",function(){N=$(this).data("facetname");
ad=$(this).data("facetval");
at=true;
ah(N,ad)
});
ag.on("click",".facetLink",function(){N=$(this).data("facetname");
ad=$(this).data("facetval");
ah(N,ad)
});
aZ.on("click",".facetLink",function(){N=$(this).data("facetname");
ad=$(this).data("facetval");
ah(N,ad)
});
y.on("click",".facetLink",function(){N=$(this).data("facetname");
ad=$(this).data("facetval");
aK=$(this).data("datetype");
ah(N,ad,aK)
});
g.on("click",".selectedFacets",function(){var bu=$(this).data("facetarrayindex");
aE(bu)
});
$(".allFacets").on("click",function(){ay=true;
aq=$(this).data("facettype");
var bu=aH.length;
while(bu--){if(aH[bu].facetType==aq){aH.splice(bu,1)
}}aA=true;
W()
})
}$(document).ready(function(){av=$(".search-result .heading-xlarge span").data("cloudsearchbean");
av=av.replace(/'/g,'"');
av=JSON.parse(av);
bo=Number(av.resultslimit);
f=av.endPoint;
M=av.language.toUpperCase();
aJ=av.country.toUpperCase();
ap=av.awsVersion;
an=av.previousPage;
aN=av.nextPage;
aS=av.video;
j=av.article;
ab=av.image;
a2=av.blog;
a9=av.recipe;
aV=av.tpArticle;
Q=av.debate;
am=av.iframe;
aQ=av.brand;
bs=av.profile;
thisWeekLabel=av.thisWeek;
thisMonthLabel=av.thisMonth;
thisYearLabel=av.thisYear;
U="";
countryLanguagePair=av.country+"_"+av.language;
if(av["package"]&&typeof av["package"]!=="undefined"){U=av["package"]
}var bv={locale:countryLanguagePair};
$.ajax({type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",dataType:"json",url:"/bin/journey/getTagTopicCacheData.json",data:bv}).done(function(bw){ax=bw
});
au=av.product;
T=av.youAreViewingLabel;
aU=av.spotlightBoostingRules;
J=av.searchResultBoostingRules;
C=av.contributorText;
be=av.isAuthorMode;
aA=false;
AWS.config.region=av.awsRegion;
if(f){AWS.config.apiVersions={cloudsearchdomain:"beta"}
}aR=new AWS.CloudSearchDomain({endpoint:f,apiVersion:"beta",convertResponseTypes:false});
if($(".search-box #search .search-query-field").val()){var bu=$(".search-box #search .search-query-field").val();
$(".search .search-query-field").val(bu);
Y()
}a6()
});
function aT(){var bu=-1;
af.show();
af.append("<span class='you-are-viewing'>"+T+"</span>");
af.append("<ul></ul>");
$(".user-filters .you-are-viewing").show();
aH.forEach(function(bv){bu++;
af.show();
var by=bv.facetType;
var bz=bv.facetValue;
if(!(by=="cq_last_published_date")){if(by=="content_type"){if(bz.toLowerCase()==="article"){bz=j
}if(bz.toLowerCase()==="video"){bz=aS
}if(bz.toLowerCase()==="profile"){bz=bs
}if(bz.toLowerCase()==="package"){bz=U
}if(bz.toLowerCase()==="tpArticle"){bz=aV
}if(bz.toLowerCase()==="image"){bz=ab
}if(bz.toLowerCase()==="blog"){bz=a2
}if(bz.toLowerCase()==="recipe"){bz=a9
}if(bz.toLowerCase()==="iframe"){bz=am
}if(bz.toLowerCase()==="brand"){bz=aQ
}if(bz.toLowerCase()==="debate"){bz=Q
}if(bz.toLowerCase()==="product"){bz=au
}}$(".user-filters ul").append($('<li class="applied-filter"><a href="#" class="selectedFacets" data-facetArrayIndex='+bu+">"+bz+"</a></li>"))
}else{var bx=bv.dateType;
var bw;
if(bx==="THIS YEAR"){bw=thisYearLabel
}if(bx==="THIS MONTH"){bw=thisMonthLabel
}if(bx==="THIS WEEK"){bw=thisWeekLabel
}$(".user-filters ul").append($('<li class="applied-filter"><a href="#" class="selectedFacets" data-facetArrayIndex='+bu+">"+bw+"</a></li>"))
}if(by=="content_type"){w++;
if(!$(".contentTypeBucket li.allFacets").length){e.prepend($('<li class="theme-secondary-link allFacets " data-facettype="content_type"><a href="#"> '+av.allTypes+"</a></li>"))
}}if(by=="topic"){if(!$(".topicBucket li.allFacets").length){ag.prepend($('<li class="theme-secondary-link allFacets" data-facettype= "topic"><a href="#"> '+av.allTopics+"</a></li>"))
}}if(by=="cq_tags"){if(!$(".tagBucket li.allFacets").length){aZ.prepend($('<li class="theme-secondary-link allFacets" data-facettype="cq_tag"><a href="#"> '+av.allTags+"</a></li>"))
}}if(by=="cq_last_published_date"){if(!$(".dateBucket li.allFacets").length){y.prepend($('<li class="theme-secondary-link allFacets" data-facettype="cq_last_published_date"><a href="#"> '+av.anyDate+"</a></li>"))
}}})
}function aE(bu){if(bu>-1){aH.splice(bu,1)
}if(aH.length==0){aA=true
}else{aA=false
}aH.splice(0,aH.length);
W()
}function ah(bu,by,bv){var bw={};
var bx="";
bw.facetType=bu;
bw.facetValue=by;
if(bu=="cq_last_published_date"){bw.dateType=bv
}if(by&&by=="profile"){aA=true
}else{aA=false
}aH.push(bw);
u=bv;
W()
}function W(){var bv=false;
if(aH.length>0){var bx="";
var bu="";
aH.forEach(function(by){var bz=by.facetType;
var bA=by.facetValue;
if(bz=="content_type"){bv=true
}if(!(bz=="cq_last_published_date")){bx=bx+" "+bz+":'"+bA+"'"
}else{if(!(u=="THIS WEEK")){bx=bx+"( range field="+bz+" ['"+bA+"',})"
}else{bx=bx+"( range field="+bz+" ['"+bA+"',})"
}}if(bz=="content_type"&&bA=="image"){bx=bx.substring(0,bx.indexOf(")))"));
bx=bx+" (and is_downloadable: 'true'"+bz+":'"+bA+"')"
}if(bz=="content_type"&&bA=="video"){bx=bx.substring(0,bx.indexOf(")))"));
bx=bx+" (and "+bz+":'"+bA+"')"
}});
if(bx.length>0){bx=bx+")";
var bw="(and is_black_listed:'false' (and (or site:'"+v+"' (phrase field=override_video_info'"+v+"'))) (not(and site: '"+v+"' is_downloadable: 'false')) "+bx;
if(bv){a0=bw
}bl.filterQuery=bw
}}else{bl.filterQuery="(and  is_black_listed: 'false' (or (and site:'"+v+"' (or content_type: 'article'  content_type: 'recipe' content_type: 'profile' content_type: 'brand' content_type: 'tpArticle' content_type: 'blog' content_type: 'debate') )  (or (and site:'"+v+"' is_downloadable: 'true' content_type: 'image')) (or  (and content_type: 'video' (or site:'"+v+"' override_video_info: '"+v+"')))))"
}if(bl.query.length!==0){p=true;
A(bl,"false",p)
}}function L(){if(bd+bo<bf){bd=bd+bo;
$(".side-navigation-colum.left").show();
$(".side-navigation-colum.right").addClass("enabled");
$(".side-navigation-colum.right").removeClass("disabled");
currentPage++;
t=bd+"-"+(bd+bo);
if(bf<bo){o.text((bd+1)+" - "+(bf))
}else{o.text((bd+1)+" - "+(bd+bo))
}}if((bd+bo)>bf){$(".side-navigation-colum.right").hide()
}bl.start=bd;
if(bl.query.length!==0){p=true;
A(bl,"false",p)
}}function n(){bd=bd-bo;
currentPage--;
o.text((bd+1)+" - "+(bd+bo));
if(bd-bo<0){$(".side-navigation-colum.left").hide()
}bl.start=bd;
if(bl.query.length!==0){if(bd==0){p=false;
A(bb,"true",p)
}else{p=true;
A(bl,"false",p)
}}}})
});
define("cloudRecipeTemplate",["handlebars"],function(){return{cloudRecipeItem:function(b){var a=Handlebars.compile('<li>{{#if lead_image_url}}<a class="" href="{{path}}"><img alt="{{{image_title}}}" src="{{{lead_image_url}}}"  data-src=\'{"desktop":"{{{lead_image_url}}}", "tablet":"{{{lead_image_url}}}", "mobile":"{{{lead_image_url}}}"}\' /></a>{{/if}}<p class="theme-font-title"><a class="" href="{{path}}"><span class=\'short-title\' data-title=\'{"desktop":"{{{short_title}}}", "tablet":"{{{short_title}}}", "mobile":"{{{short_title}}}"}\'>{{{short_title}}}</span></a></p><p class="theme-font-secondary summary hidden-phone">{{{short_description}}}</p></li>');
return a(b)
}}
});
tccc.initComponent(".m-f-recipe-cloud-directory",["aws-sdk-2.187.0.min","cloudRecipeTemplate","selectBoxIt"],function(c,a,d,b){c.each(function(){var l=$(this),n=l.find(".mobile-collapse"),C=l.find(".recipe-menu"),x=l.find(".recipe-search"),f=x.find("#recipes-search-input"),A=x.find("#recipes-search-button"),t=C.find("li.menu-item"),v=l.find(".recipes-info"),w=v.find("#load-more-button"),k=v.find("ul.recipes-details"),F=v.find("span.counter"),p=v.find("span.current-topic"),h=v.find("span.search-query"),j=v.find("select.selectboxit"),m=v.find(".current-topic"),s=0,G="",u,z;
var y=$(this).data("cloudsearchbean");
var E={query:"recipe-all",start:s,size:y.initialCount,queryParser:"structured"};
E["return"]="short_title,short_description,path,lead_image_url,image_title";
AWS.config.region=y.awsRegion;
csd=new AWS.CloudSearchDomain({endpoint:y.endPoint,apiVersion:y.awsVersion,convertResponseTypes:false});
var o=y.country+"_"+y.language;
E.filterQuery="(and (or site:'"+o+"' allowed_sites:'"+o+"') content_type:'recipe' default_language:'en')";
$(document).click(function(){$(".selectboxit").removeClass("selectboxit-open");
$(".selectboxit-options").hide()
});
$(document).on("click",".selectboxit-container",function(H){H.stopPropagation()
});
A.on("click",function(H){H.preventDefault();
k.toggleClass("fade-out fade-in");
w.toggleClass("fade-out fade-in");
q(false);
if(f.val()){h.text('"'+f.val()+'"');
h.parent().removeClass("hidden")
}var I="recipe-all";
I=$("li.menu-item.selected").find("a").data("item-index");
I=I.replace("journey:categories_x002f_","");
E.query=B(f,I);
D(E,false)
});
t.on("click","a",function(H){H.preventDefault();
if(!$(this).closest("li").hasClass("selected")){$(this).closest("li").siblings().removeClass("selected").end().toggleClass("selected",true).focus();
k.toggleClass("fade-out fade-in");
w.toggleClass("fade-out fade-in");
var I=$(this).data("item-index");
I=I.replace("journey:categories_x002f_","");
if(I!=="recipe-all"){G=$(this).text()
}else{G=""
}E.query=B(f,I);
q(false);
D(E,false)
}});
w.on("click",function(H){H.preventDefault();
D(E,true);
$("html, body").animate({scrollTop:$(this).offset().top-30},600)
});
n.on("click","a",function(H){H.preventDefault();
$(this).toggleClass("collapsed");
if($(this).hasClass("collapsed")){t.closest(".selected").siblings().addClass("hidden");
$(this).find("i").removeClass("icon-angle-up").addClass("icon-angle-down")
}else{t.removeClass("hidden");
$(this).find("i").removeClass("icon-angle-down").addClass("icon-angle-up")
}});
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){g()
});
var B=function(M,L){var H=M.val();
var N;
var K=H;
if(L=="recipe-all"&&K==""){N="recipe-all"
}else{K=K.replace('"',"");
N="(and ";
var J=K.split(",");
for(var I=0;
I<J.length;
I++){N=N+'"'+J[I]+'" '
}N=N+' "'+L+'")'
}return N
};
var D=function(I,H){if(H){I.start=I.start+parseInt(y.loadMoreCount,10)
}r(I,H)
};
function r(I,H){csd.search(I,function(J,K){if(J){}else{e(K.hits,H)
}})
}function e(H,J){var M=H.start;
var K=H.found;
var L=M+parseInt(y.loadMoreCount,10)<K;
var I="";
if(L){w.parent().removeClass("hidden")
}else{w.parent().addClass("hidden")
}$.each(H.hit,function(N){_resultObject=H.hit[N].fields;
var O=_resultObject.short_title;
if(O){O=O.replace("'","&apos;");
O=O.replace("{","<span style=color:#BA6105>").replace("}","</span>")
}_resultObject.short_title=O;
I+=b.cloudRecipeItem(_resultObject)
});
F.text(H.found);
m.text(G);
if(J){k.append($(I))
}else{k.html("");
k.empty();
k.append($(I));
setTimeout(function(){k.toggleClass("fade-out fade-in");
w.toggleClass("fade-out fade-in")
},600)
}u=k.find("p.theme-font-title span");
z=k.find("p.summary");
g()
}var q=function(H){if(!H){}E.start=0;
h.parent().addClass("hidden")
};
var g=function(){a.util.truncate_text(u,1);
a.util.truncate_text(z,3)
};
D(E,false)
})
});
tccc.initComponent(".search-box",["bootstrapTypeahead"],function(c,a,b){c.each(function(){var f=$(this),g={delay:200,results:6,charLengthTrigger:2,url:f.data("url"),indexname:f.data("index-name"),admintemplate:f.data("admintemplate-search")},e=f.find(".search-query-field"),h=f.find("#search");
var d=$("#global-banner .container").height();
e.typeahead({items:g.results,val:"suggestion",ajax:{url:g.url,method:"get",timeout:g.delay,triggerLength:g.charLengthTrigger,preDispatch:function(j){return{q:$.trim(j),indexName:g.indexname,isAdminTemplate:g.admintemplate,_charset_:"utf-8"}
}}})
})
});
tccc.initComponent(".cloud-library-grid",["aws-sdk-2.187.0.min","moment","glDatePicker"],function(c,a,b){c.each(function(){var B,e,x,v,w,o=0,f,r,j,q,d,p,t,A,u,m,y=true,h=false,z,s,n={},g=$(".cloud-library-grid ").find("#AVload-more-button");
var l={query:"nt:video",queryParser:"structured",sort:"publish_date desc"};
l["return"]="override_video_info,vanity_paths,long_title,resize_image_url";
$(document).ready(function(){var D=$(".cloud-library-grid").attr("data-cloudSearchBean");
if(D){D=JSON.parse(D);
B=D.endPoint;
e=D.awsVersion;
f=D.language;
r=D.country;
p=D.downloadVideoLabel;
j=r+"_"+f;
w=D.initialCount;
v=D.loadMoreCount;
t=D.isAuthorMode;
q=D.downloadvideolabel;
d=D.nolibrarytextlabel;
u=D.avLibraryUrl;
viewBy=$(".view-by-topics-tags");
$(g).text(D.loadMoreLabel);
$(g).prepend('<i class="icon-double-angle-right"></i>');
$submit=viewBy.find(".submit.button");
setTimeout(function(){s=localStorage.getItem("dateSelcted");
if(s){z="(and is_black_listed:'false' (and (or site:'"+j+"' (phrase field=override_video_info'"+j+"')) ( range field=cq_last_published_date  {,'"+s+"']) content_type:'video' is_downloadable:'true'))"
}else{z="(and is_black_listed:'false' (and (or site:'"+j+"' (phrase field=override_video_info'"+j+"')) content_type:'video' is_downloadable:'true'))"
}x=$.extend({},l,{filterQuery:z,start:o,size:w});
n={region:D.awsRegion};
k(x,n)
},1000);
_toDate=new Date();
x=$.extend({},l,{filterQuery:null,start:o,size:w})
}$(".cloud-library-grid").find("#AVload-more-button").click(function(){h=false;
C()
});
setTimeout(function(){document.getElementById("year").addEventListener("change",E,false);
document.getElementById("month").addEventListener("change",E,false);
function E(){s=localStorage.getItem("dateSelcted");
if(s){z="(and is_black_listed:'false' (and (or site:'"+j+"' (phrase field=override_video_info'"+j+"')) ( range field=cq_last_published_date  {,'"+s+"']) content_type:'video' is_downloadable:'true'))"
}else{z="(and is_black_listed:'false' (and (or site:'"+j+"' (phrase field=override_video_info'"+j+"')) content_type:'video' is_downloadable:'true'))"
}x={query:j,queryParser:"structured",filterQuery:z,start:o,size:w,sort:"cq_last_published_date desc"};
x["return"]="vanity_paths,vanity_url,path,override_video_info,resize_image_url,formatted_publish_date,author,alt,content_type,dc_title,dc_description,long_title";
h=true;
k(x)
}},500);
function C(){o=parseInt(o,10)+parseInt(w,10);
x=$.extend({},l,{filterQuery:z,start:o,size:v});
h=false;
k(x)
}});
function k(D,C){a.util.AWSSearch(D,AWS,function(F){var E=F.hits.hit;
if(h){$(".cloud-library-grid .post-container").empty()
}if(E.length==0){$(".cloud-library-grid .post-container").addClass("noResults").text(d)
}if(F.hits.found<v){$("#AVload-more-button").hide()
}else{$("#AVload-more-button").show()
}if(E.length>0){$(".cloud-library-grid .post-container").removeClass("noResults");
$(".cloud-library-grid .post-container").append("<ul id='av-video-search-results-list' class='search-results av-video-search-results-list'>");
$.each(E,function(L){var I=E[L].fields,N="search-result-item-template"+L,J=I.vanity_paths,M=r.toLowerCase()+"/"+f.toLowerCase(),H,G=I.override_video_info;
if(G){G=G.replace(/'/g,"&#039;");
G=JSON.parse(G)
}if(J){for(i=0;
i<J.length;
i++){if(J[i].indexOf(M)>-1){if(t==false){J[i].indexOf(f.toLowerCase());
A=J[i].substring((J[i].indexOf(M)+5));
H=A.substr(A.lastIndexOf("/")+1);
m=u+"/"+H;
break
}else{A=J[i];
H=A.substr(A.lastIndexOf("/")+1);
m=u+"/"+H;
break
}}}}var K="";
if(G&&G.title){K=G.title
}else{if(I.long_title){K=I.long_title
}}if(G&&G.coverImage&&(G.coverImage.trim()).length!==0){_iconImgSrc=G.coverImage
}else{if(I.resize_image_url){_iconImgSrc=I.resize_image_url
}else{_iconImgSrc=""
}}$("#av-video-search-results-list").append("<li class='avSearch-result' id='avSearch-result'><div><a class='avPoster-link' href='"+m+"'><img class='avBordered_img' alt='"+K+"' title='"+K+" ' src="+_iconImgSrc+"> <div class='poster-overlay small'><div class='center-vertically'><i class='icon-play theme-link knockout-bgcolor'></i></div></div></a> <div class='avTitle'> <h2> <span data-title='{}' class='titles_updated'>"+K+"</span> </h2> <a href='"+m+"' class='theme-color-secondary avDownloadLink'> <i class='icon-double-angle-right'></i>"+p+" </a> </div> </div> </li>")
})
}},C)
}})
});
tccc.initComponent(".CloudLatestContentExtended",["moment"],function(b,a){b.each(function(){var l=$(".skyscraper-list").attr("data-lambda-endpointurl"),j=$(".skyscraper-list").attr("data-locale"),o=$(".skyscraper-list").attr("data-author-mode"),f=$(".skyscraper-list").attr("data-blackList"),e=$(".skyscraper-list").attr("data-section-path"),d=$(".skyscraper-list").attr("data-date-label"),c=$(".skyscraper-list").attr("data-date-format").toUpperCase(),m=$(".content-wrapper ol li").length,g="",n;
if((a.global.sizes.current_size===a.global.sizes.MOBILE)||(a.global.sizes.current_size===a.global.sizes.TABLET)){n=5-m
}else{n=10-m
}if(n<0){n=0
}n=parseInt(n);
console.log(m);
if(m>0){$(".title .titles_updated .override-latestcontent").each(function(r){console.log(r+": "+$(this).text());
var q=$(this).html();
if(q){var p="<span class='theme-secondary'>";
var s="</span>";
q=q.replace("{",p);
q=q.replace("}",s)
}$(this).html(q)
})
}if(f){g=JSON.parse(f).blacklist;
g=g.join(",")
}if(m<10&&e){$.ajax({url:l,type:"GET",data:{sectionPath:e,blackList:g,locale:j,isAuthor:o},dataType:"json",success:function(x,q,D){var w=x.list,C=$(".content-wrapper ol");
console.log(w);
for(var y=0;
y<n;
++y){var v=m+y+1,s="",r,u,p,t=[],B="";
if(w[y].cqLastPublishedDate){r=w[y].cqLastPublishedDate;
if(r){u=moment(r).format(c)
}}if(w[y].longTitle){s=w[y].longTitle;
B=w[y].longTitle;
var A=/<br\s*\/?>/igm;
var E=/<(?!br\s*\/?)[^>]+>/g;
if(A.test(w[y].longTitle)||E.test(w[y].longTitle)){B=B.replace(/<(br|).*?>|<(a|abbr|b|blockquote|em|small|span|).*?<\/\2/g,"");
w[y].longTitle=w[y].longTitle.replace(/<(br|).*?>|<(a|abbr|b|blockquote|em|small|span|).*?<\/\2/g,"");
console.log(w[y].longTitle)
}if(s){var F='<span class="theme-secondary">';
var z="</span>";
s=s.replace("{",F);
s=s.replace("}",z)
}}if(o=="true"){linkUrl=w[y].path
}else{linkUrl=w[y].vanityUrl
}C.append("<li><a class='list-item' href='"+linkUrl+"'><div class='item-number'>"+v+"</div><div class='title'><span itemprop='itemListElement' data-title='{'desktop':"+B+",'tablet':"+B+",'mobile':"+B+"}' class='titles_updated'><strong class='test'>"+s+"</strong></span> <div class='published-date'>"+d+" "+u+"</div></div></a></li>")
}p=$(".skyscraper-list").find(".title .titles_updated strong");
$(p).each(function(G){t=$(this).height();
if(t>41){a.util.truncate_text(p,2)
}})
},error:function(p,r,q){}})
}var k=$(".skyscraper-list").find(".title .titles_updated strong");
function h(){a.util.truncate_text(k,2)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){$(".overrideItem .title span").each(function(r){var q=$(this).text();
if(q){var p='<span class="theme-secondary">';
var s="</span>";
q=q.replace("{",p);
q=q.replace("}",s)
}$(this).html(q)
});
h()
});
h()
})
});
tccc.initComponent(".cross-promo",["jqUI"],function(b,a){b.each(function(){var e=($(".lead-carousel").find(".item").length>=1),h=$(".media-container"),d=h.find(".item a"),g=$(this).find(".royalSlider"),c=h.find(".overlay-left-ie8"),f=h.find(".overlay-right-ie8");
if(e){h=g.royalSlider({keyboardNavEnabled:true,arrowsNav:true,controlNavigation:"none",loop:true,navigateByClick:false,arrowsNavAutoHide:false,autoScaleSlider:true,autoScaleSliderWidth:596,autoScaleSliderHeight:334,imageScalePadding:0}).data("royalSlider");
$(".rsArrowIcn").hover(function(){d.addClass("opacity-hover");
c.addClass("opacity-hover");
f.addClass("opacity-hover")
},function(){d.removeClass("opacity-hover");
c.removeClass("opacity-hover");
f.removeClass("opacity-hover")
})
}})
});
tccc.initComponent(".redesignedBrandWrapper, .redesignedNutritionWrapper",["mobileJquery"],function(b,a){b.each(function(){var c=$(".brands-container").attr("data-select-brand-label-mobile");
$(document).ready(function(){var f=$(".brand-banner li");
f.each(function(h,g){if($(g).hasClass("selected")){$(this).parent().prepend(this)
}});
var d=$(".brand-grid .brand-list li");
d.each(function(h,g){if($(g).hasClass("selected")){$(".brand-banner li").removeClass("selected");
$(this).addClass("selected");
$(".brand-banner").prepend(this);
$(".brand-grid .brand-list li:nth-child(1)").before($(".brand-banner li:last"))
}});
if(a.global.sizes.current_size===a.global.sizes.MOBILE){$(".brands-container").children("a").click(function(g){$(".brand-grid .brand-list").prepend($(".brand-banner li:nth-child(1)"))
});
var e=$(".brands-container").children("a").find("span").attr("data-view-all-expand-link-mobile");
$(".brands-container").children("a").find("span").text("View All Brands");
$("a").buttonMarkup({icon:"carat-d"})
}$(".redesignedBrandWrapper .brand-description a").each(function(){$(this).addClass("theme-secondary-link visit-brand")
})
});
$(".brands-container").children("a").click(function(){if(!$(this).parent().hasClass("brandGridView")){if(!(a.global.sizes.current_size===a.global.sizes.MOBILE)){$(this).hide()
}else{$(this).css("width","100%");
$(this).children("span").html("Close").css("float","right");
$(this).prepend('<span class="mobileSelectText">'+c+"</span>");
$(".brands-container").children("a > i").removeClass("icon-chevron-sign-down");
$(".brands-container").children("a > i").removeClass(" icon-chevron-sign-up");
$(this).find("i").addClass("icon-remove-sign");
$(".brand-grid a").css("width","auto")
}$(".brands-container").addClass("brandGridView")
}else{$(".brands-container").removeClass("brandGridView");
setTimeout(function(){$(".brands-container a").show();
if((a.global.sizes.current_size===a.global.sizes.MOBILE)){$(".brands-container").children("a").css("width","55%");
$(".brand-banner").prepend($(".brand-grid .brand-list li:nth-child(1)"));
$(".brands-container").children("a").find("span.mobileSelectText").remove();
$(".brands-container").children("a").find("span").text("View All Brands");
$(".brands-container").children("a").find("span").css("float","left");
$(".brands-container").children("a").find("i").remove();
$(".brands-container").children("a").prepend('<i class="icon icon-chevron-sign-down icon-2x"></i>')
}},500)
}});
$(".brand-grid a").click(function(){$(".brands-container").removeClass("brandGridView");
$(".brands-container a").show();
if((a.global.sizes.current_size===a.global.sizes.MOBILE)){$(".brands-container").children("a").css("width","55%");
$(".brand-banner").prepend($(".brand-grid .brand-list li:nth-child(1)"));
$(".brands-container").children("a").find("span.mobileSelectText").remove();
$(".brands-container").children("a").find("i").remove();
$(".brands-container").children("a").find("span").text("View All Brands");
$(".brands-container").children("a").find("span").css("float","left");
$(".brands-container").children("a").append('<i class="icon icon-chevron-sign-down icon-2x"></i>')
}});
(function(f){if(a.global.sizes.current_size&&a.global.sizes.current_size!==a.global.sizes.MOBILE){var e=f.scrollTo=function(h,g,j){f(window).scrollTo(h,g,j)
};
e.defaults={axis:"xy",duration:parseFloat(f.fn.jquery)>=1.3?0:1,limit:true};
e.window=function(g){return f(window)._scrollable()
};
f.fn._scrollable=function(){return this.map(function(){var h=this,j=!h.nodeName||f.inArray(h.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;
if(!j){return h
}var g=(h.contentWindow||h).document||h.ownerDocument||h;
return/webkit/i.test(navigator.userAgent)||g.compatMode=="BackCompat"?g.body:g.documentElement
})
};
f.fn.scrollTo=function(k,j,h){if(typeof j=="object"){h=j;
j=0
}if(typeof h=="function"){h={onAfter:h}
}if(k=="max"){k=9000000000
}h=f.extend({},e.defaults,h);
j=j||h.duration;
h.queue=h.queue&&h.axis.length>1;
if(h.queue){j/=2
}h.offset=d(h.offset);
h.over=d(h.over);
return this._scrollable().each(function(){if(k==null){return
}var q=this,n=f(q),o=k,m,g={},p=n.is("html,body");
switch(typeof o){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(o)){o=d(o);
break
}o=f(o,this);
if(!o.length){return
}case"object":if(o.is||o.style){m=(o=f(o)).offset()
}}f.each(h.axis.split(""),function(w,u){var s=u=="x"?"Left":"Top",y=s.toLowerCase(),v="scroll"+s,t=q[v],r=e.max(q,u);
if(m){g[v]=m[y]+(p?0:t-n.offset()[y]);
if(h.margin){g[v]-=parseInt(o.css("margin"+s))||0;
g[v]-=parseInt(o.css("border"+s+"Width"))||0
}g[v]+=h.offset[y]||0;
if(h.over[y]){g[v]+=o[u=="x"?"width":"height"]()*h.over[y]
}}else{var x=o[y];
g[v]=x.slice&&x.slice(-1)=="%"?parseFloat(x)/100*r:x
}if(h.limit&&/^\d+$/.test(g[v])){g[v]=g[v]<=0?0:Math.min(g[v],r)
}if(!w&&h.queue){if(t!=g[v]){l(h.onAfterFirst)
}delete g[v]
}});
l(h.onAfter);
function l(r){n.animate(g,j,h.easing,r&&function(){r.call(this,k,h)
})
}}).end()
};
e.max=function(k,j){var n=j=="x"?"Width":"Height",h="scroll"+n;
if(!f(k).is("html,body")){return k[h]-f(k)[n.toLowerCase()]()
}var m="client"+n,l=k.ownerDocument.documentElement,g=k.ownerDocument.body;
return Math.max(l[h],g[h])-Math.min(l[m],g[m])
};
function d(g){return typeof g=="object"?g:{top:g,left:g}
}}})(jQuery)
})
});
tccc.initComponent(".subNav",["subNav"],function(c,b,a){c.each(function(){var d=a;
d.Top.init();
a.Bottom.init();
$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(e,f){d.Top.init();
a.Bottom.init()
})
})
});
tccc.initComponent(".brand-product-grid",[],function(b,a){b.each(function(){var h=$(this),d=h.find(".brand-products"),p,g,o,l,c,k,e,f=$("html").hasClass("mobile");
$(document).ready(function(){g=d.data("productLinks");
m(d.empty(),g,f);
n()
});
function m(z,w,x){var u,q,v,t,s,r,y;
if(!w||!w.length){return
}v=$("<ul></ul>").appendTo(d);
for(u=0,q=w.length;
u<q;
u++){l=w[u].longTitle;
c=w[u].shortTitle;
k=w[u].url;
e=w[u].imageUrl;
y=j(x);
s='<img class="lazy" data-src="'+e+'"  title="'+l+'" />';
t='<a class="product-image" href="'+k+'"><div class="imageWrapper">'+s+" </div></a>";
r='<a class="product-details" href="'+k+'" ><span class="product-title" itemprop="name" datat-title="'+y+'"> '+y+" </span></a>";
v.append("<li> "+t+" "+r+" </li>")
}}function j(q){if(q){return c
}else{return l
}}function n(){if("IntersectionObserver" in window){p=document.querySelectorAll(".lazy");
var s=new IntersectionObserver(function(t,u){t.forEach(function(w){console.log("entry",w);
if(w.isIntersecting){var v=w.target;
v.src=v.dataset.src;
$(v).removeClass("lazy");
s.unobserve(v)
}})
});
p.forEach(function(t){s.observe(t)
})
}else{p=h.find(".lazy");
console.log("not intersection available",p);
var q;
function r(){if(q){clearTimeout(q)
}lazyTimeOut=setTimeout(function(){var t=window.pageYOffset;
$(p).each(function(w,u){var x=$(u).offset();
console.log("img",x);
if(x.top<(window.innerHeight+t)){var v=$(u).data("src");
$(u).attr("src",v);
$(u).removeClass("lazy")
}});
if(p.length==0){console.log("no images")
}},20)
}$(document).scroll(r)
}}})
});
tccc.initComponent(".profile-content",["jqSmoothScroll","listContentLoader","listContentRenderer","aws-sdk-2.187.0.min"],function(e,c,a,d,b){e.each(function(){var y,g,w,z,v,m=0,u,h,q,h,k,p,f,o,t,x,n,s,j=true;
$(document).ready(function(){var B=$(".profile-content .container").attr("data-cloudSearchBean");
if(B){B=B.replace(/'/g,'"');
B=JSON.parse(B);
y=B.awsEndpoint;
g=B.awsVersion;
h=B.language;
q=B.awsCountry;
h=B.awsLanguage;
v=B.initDisplay;
z=B.loadMore;
u=B.authorName;
storyLinks=B.storyLinks;
t=B.isAuthorMode;
if(storyLinks){n=storyLinks.split(",")
}k=q+"_"+h
}AWS.config.region=B.awsRegion;
csd=new AWS.CloudSearchDomain({endpoint:y,apiVersion:g,convertResponseTypes:false});
if(n){s=parseInt(v,10)-parseInt(n.length,10)
}if(s&&s>=0){v=s;
if(n.length>0){for(var A=0;
A<n.length;
A++){var D=n[A].lastIndexOf("/");
var C=n[A].substring(D+1);
paramsOverride={query:C,queryParser:"structured",filterQuery:"(and site:'"+k+"' (phrase field=cq_template'Article'))",size:1};
j=false;
l(paramsOverride)
}w={query:u,queryParser:"structured",filterQuery:"(and site:'"+k+"' (phrase field=cq_template'Article'))",start:m,size:v,sort:"cq_last_published_date desc"};
w["return"]="vanity_url,resize_image_url,search_rank,long_title,article_body,formatted_publish_date,section,path,override_video_info";
l(w)
}if(!s===0){w={query:u,queryParser:"structured",filterQuery:"(and site:'"+k+"' (phrase field=cq_template'Article'))",start:m,size:v,sort:"cq_last_published_date desc"};
w["return"]="vanity_url,resize_image_url,search_rank,long_title,article_body,formatted_publish_date,section,path,override_video_info";
l(w)
}}else{w={query:u,queryParser:"structured",filterQuery:"(and site:'"+k+"' (phrase field=cq_template'Article'))",start:m,size:v,sort:"cq_last_published_date desc"};
w["return"]="vanity_url,resize_image_url,search_rank,long_title,article_body,formatted_publish_date,section,path,override_video_info";
l(w)
}});
$(".AuthorRecentStoryList").find("#load-more-button").click(function(){j=false;
r()
});
function r(){m=parseInt(m,10)+parseInt(v,10);
w.start=m;
w.size=z;
l(w)
}function l(B){var A;
csd.search(B,function(C,D){if(C){console.log("in error "+C.stack)
}else{A=D.hits.hit;
if(j){$(".AuthorRecentStoryList .container").empty()
}if(A.length>0){if(!($("#authorRecentStoryListContainer").length>0)){$(".AuthorRecentStoryList .container").append("<ul id='authorRecentStoryListContainer'>")
}$.each(A,function(E){var K=A[E].fields,N=K.vanity_url,G=K.path,O=K.search_rank,H,F=K.resize_image_url;
if(q&&h){H=q.toLowerCase()+"/"+h.toLowerCase()
}var I="";
if(K.long_title){I=K.long_title;
if(I){var M='<span class="theme-secondary">';
var J="</span>";
I=I.replace("{",M);
I=I.replace("}",J)
}}var Q="";
if(K.article_body){Q=K.article_body
}var P=L(t,N,G);
function L(T,R,U){var S;
if(T){S=U+".html"
}else{S=R
}return S
}if(!(F)){$("#authorRecentStoryListContainer").append("<li class='list-result'><a class='link' title=''><div class='column-left'></div></a><div class='column-right'><a href='"+P+"' class='link' title=''><div class='title'><span>"+I+"</span></div> <div class='metadata'><a class='topic title_capitalize' href='javascript:;'title=''>"+K.section+"</a><span class='separator'></span><span class='date title_capitalize'>"+K.formatted_publish_date+"</span></div><div class='description theme-font-secondary truncate-5' style='display: block; line-height: 18px;'>"+Q+"</div></li>")
}else{$("#authorRecentStoryListContainer").append("<li class='list-result'><a class='link' title=''><div class='column-left'><img  alt='"+K.long_title+"' title='"+K.long_title+"' class='thumbnail bordered' src='"+F+"'></div></a><div class='column-right'><a href='"+P+"' class='link' title=''><div class='title'><span>"+I+"</span></div> <div class='metadata'><a class='topic title_capitalize' href='javascript:;'title=''>"+K.section+"</a><span class='separator'></span><span class='date title_capitalize'>"+K.formatted_publish_date+"</span></div><div class='description theme-font-secondary truncate-5' style='display: block; line-height: 18px;'>"+Q+"</div></li>")
}c.util.truncate_text($("#authorRecentStoryListContainer .description.truncate-5"),5)
})
}}})
}})
});